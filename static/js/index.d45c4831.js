(()=>{"use strict";var e={57606:function(e,t,a){var s=a(69979),r=a(52136),n=a(63742);a(60441);var l=a(61069),i=a(80885);function c(e){if(e.startsWith("http://")||e.startsWith("https://"))return e;let t=e.startsWith("/")?e:`/${e}`,a="https://bilal-ullah-khan-netra-ai.hf.space".replace(/\/$/,"");return`${a}${t}`}async function o(e){if(!e.ok){let t=await e.text()||e.statusText;throw Error(`${e.status}: ${t}`)}}async function d(e,t,a){let s,r=c(t),n=a instanceof FormData,l=a instanceof File,i={};if(n)s=a;else if(l){let e=new FormData;e.append("file",a),s=e}else a&&(i["Content-Type"]="application/json",s=JSON.stringify(a));let d=await fetch(r,{method:e,headers:i,body:s,credentials:"include"});return await o(d),d}a(56741);let m=new(a(30576)).S({defaultOptions:{queries:{queryFn:(e=>{let{on401:t}=e;return async e=>{let{queryKey:a}=e,s=c(a.join("/")),r=await fetch(s,{credentials:"include"});return"returnNull"===t&&401===r.status?null:(await o(r),await r.json())}})({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:1/0,retry:!1},mutations:{retry:!1}}});var u=a(54018);a(92360),a(61961),a(48230),a(94489),a(27166),a(80682),a(72161),a(83235),a(93899),a(92173),a(47672),a(42229),a(6966),a(33436),a(52434),a(89439),a(7230),a(70823),a(35459),a(8517),a(73996),a(41972);let x=0,h=new Map,p=e=>{if(h.has(e))return;let t=setTimeout(()=>{h.delete(e),j({type:"REMOVE_TOAST",toastId:e})},1e6);h.set(e,t)},f=[],g={toasts:[]};function j(e){g=((e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=t;return a?p(a):e.toasts.forEach(e=>{p(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}})(g,e),f.forEach(e=>{e(g)})}function y(e){let{...t}=e,a=(x=(x+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>j({type:"DISMISS_TOAST",toastId:a});return j({type:"ADD_TOAST",toast:{...t,id:a,open:!0,onOpenChange:e=>{e||s()}}}),{id:a,dismiss:s,update:e=>j({type:"UPDATE_TOAST",toast:{...e,id:a}})}}function v(){let[e,t]=r.useState(g);return r.useEffect(()=>(f.push(t),()=>{let e=f.indexOf(t);e>-1&&f.splice(e,1)}),[e]),{...e,toast:y,dismiss:e=>j({type:"DISMISS_TOAST",toastId:e})}}var N=a(18393),b=a(48690),w=a(43254),_=a(54461),S=a(64377);function C(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,S.m6)((0,_.W)(t))}let P=N.zt,k=r.forwardRef((e,t)=>{let a,r,n,i,c=(0,l.c)(9);return c[0]!==e?({className:a,...r}=e,c[0]=e,c[1]=a,c[2]=r):(a=c[1],r=c[2]),c[3]!==a?(n=C("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",a),c[3]=a,c[4]=n):n=c[4],c[5]!==r||c[6]!==t||c[7]!==n?(i=(0,s.jsx)(N.l_,{ref:t,className:n,...r}),c[5]=r,c[6]=t,c[7]=n,c[8]=i):i=c[8],i});k.displayName=N.l_.displayName;let A=(0,b.j)("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),D=r.forwardRef((e,t)=>{let a,r,n,i,c,o=(0,l.c)(11);return o[0]!==e?({className:a,variant:n,...r}=e,o[0]=e,o[1]=a,o[2]=r,o[3]=n):(a=o[1],r=o[2],n=o[3]),o[4]!==a||o[5]!==n?(i=C(A({variant:n}),a),o[4]=a,o[5]=n,o[6]=i):i=o[6],o[7]!==r||o[8]!==t||o[9]!==i?(c=(0,s.jsx)(N.fC,{ref:t,className:i,...r}),o[7]=r,o[8]=t,o[9]=i,o[10]=c):c=o[10],c});D.displayName=N.fC.displayName,r.forwardRef((e,t)=>{let a,r,n,i,c=(0,l.c)(9);return c[0]!==e?({className:a,...r}=e,c[0]=e,c[1]=a,c[2]=r):(a=c[1],r=c[2]),c[3]!==a?(n=C("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",a),c[3]=a,c[4]=n):n=c[4],c[5]!==r||c[6]!==t||c[7]!==n?(i=(0,s.jsx)(N.aU,{ref:t,className:n,...r}),c[5]=r,c[6]=t,c[7]=n,c[8]=i):i=c[8],i}).displayName=N.aU.displayName;let I=r.forwardRef((e,t)=>{let a,r,n,i,c,o=(0,l.c)(10);return o[0]!==e?({className:a,...r}=e,o[0]=e,o[1]=a,o[2]=r):(a=o[1],r=o[2]),o[3]!==a?(n=C("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",a),o[3]=a,o[4]=n):n=o[4],o[5]===Symbol.for("react.memo_cache_sentinel")?(i=(0,s.jsx)(w.Z,{className:"h-4 w-4"}),o[5]=i):i=o[5],o[6]!==r||o[7]!==t||o[8]!==n?(c=(0,s.jsx)(N.x8,{ref:t,className:n,"toast-close":"",...r,children:i}),o[6]=r,o[7]=t,o[8]=n,o[9]=c):c=o[9],c});I.displayName=N.x8.displayName;let T=r.forwardRef((e,t)=>{let a,r,n,i,c=(0,l.c)(9);return c[0]!==e?({className:a,...r}=e,c[0]=e,c[1]=a,c[2]=r):(a=c[1],r=c[2]),c[3]!==a?(n=C("text-sm font-semibold",a),c[3]=a,c[4]=n):n=c[4],c[5]!==r||c[6]!==t||c[7]!==n?(i=(0,s.jsx)(N.Dx,{ref:t,className:n,...r}),c[5]=r,c[6]=t,c[7]=n,c[8]=i):i=c[8],i});T.displayName=N.Dx.displayName;let Z=r.forwardRef((e,t)=>{let a,r,n,i,c=(0,l.c)(9);return c[0]!==e?({className:a,...r}=e,c[0]=e,c[1]=a,c[2]=r):(a=c[1],r=c[2]),c[3]!==a?(n=C("text-sm opacity-90",a),c[3]=a,c[4]=n):n=c[4],c[5]!==r||c[6]!==t||c[7]!==n?(i=(0,s.jsx)(N.dk,{ref:t,className:n,...r}),c[5]=r,c[6]=t,c[7]=n,c[8]=i):i=c[8],i});function O(){let e,t,a,r=(0,l.c)(5),{toasts:n}=v();return r[0]!==n?(e=n.map(M),r[0]=n,r[1]=e):e=r[1],r[2]===Symbol.for("react.memo_cache_sentinel")?(t=(0,s.jsx)(k,{}),r[2]=t):t=r[2],r[3]!==e?(a=(0,s.jsxs)(P,{children:[e,t]}),r[3]=e,r[4]=a):a=r[4],a}function M(e){let{id:t,title:a,description:r,action:n,...l}=e;return(0,s.jsxs)(D,{...l,children:[(0,s.jsxs)("div",{className:"grid gap-1",children:[a&&(0,s.jsx)(T,{children:a}),r&&(0,s.jsx)(Z,{children:r})]}),n,(0,s.jsx)(I,{})]},t)}Z.displayName=N.dk.displayName;var E=a(96855);let F=E.zt;E.fC,E.xz,r.forwardRef((e,t)=>{let a,r,n,i,c,o=(0,l.c)(11);o[0]!==e?({className:a,sideOffset:n,...r}=e,o[0]=e,o[1]=a,o[2]=r,o[3]=n):(a=o[1],r=o[2],n=o[3]);let d=void 0===n?4:n;return o[4]!==a?(i=C("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",a),o[4]=a,o[5]=i):i=o[5],o[6]!==r||o[7]!==t||o[8]!==d||o[9]!==i?(c=(0,s.jsx)(E.VY,{ref:t,sideOffset:d,className:i,...r}),o[6]=r,o[7]=t,o[8]=d,o[9]=i,o[10]=c):c=o[10],c}).displayName=E.VY.displayName;var $=a(65717);let R="https://sqgtgwrhxoaeaxofyelf.supabase.co",L="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNxZ3Rnd3JoeG9hZWF4b2Z5ZWxmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUyNTA2ODAsImV4cCI6MjA3MDgyNjY4MH0.uNLXA6AIjKH9WnH4vxR13WdnevaA0yVl0Vwcac4dOJY";R&&L||console.warn("Supabase URL and Anon Key are required. Please set VITE_SUPABASE_URL and VITE_SUPABASE_ANON_KEY environment variables.");let U=(0,$.eI)(R,L,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}}),z=async(e,t,a)=>{let{data:s,error:r}=await U.auth.signUp({email:e,password:t,options:{data:a}});return{data:s,error:r}},B=async(e,t)=>{let{data:a,error:s}=await U.auth.signInWithPassword({email:e,password:t});return{data:a,error:s}},V=async()=>{let{error:e}=await U.auth.signOut();return{error:e}},K=async()=>{let{data:{session:e},error:t}=await U.auth.getSession();return{session:e,error:t}},W=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"*",a=arguments.length>2?arguments[2]:void 0,s=U.from(e).select(t);a&&Object.keys(a).forEach(e=>{s=s.eq(e,a[e])});let{data:r,error:n}=await s;return{data:r,error:n}},q=(0,r.createContext)({user:null,session:null,loading:!0,signIn:async()=>({error:null}),signUp:async()=>({error:null}),signOut:async()=>({error:null}),resetPassword:async()=>({error:null})}),G=()=>{let e=(0,r.useContext)(q);if(!e)throw Error("useAuthContext must be used within an AuthProvider");return e};function H(e){let t,a,n,i,c=(0,l.c)(9),{children:o}=e,[d,m]=(0,r.useState)(null),[u,x]=(0,r.useState)(null),[h,p]=(0,r.useState)(!0);c[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{U.auth.getSession().then(e=>{let{data:t}=e,{session:a}=t;x(a),m((null==a?void 0:a.user)??null),p(!1)});let{data:e}=U.auth.onAuthStateChange(async(e,t)=>{x(t),m((null==t?void 0:t.user)??null),p(!1)}),{subscription:t}=e;return()=>t.unsubscribe()},a=[],c[0]=t,c[1]=a):(t=c[0],a=c[1]),(0,r.useEffect)(t,a),c[2]!==h||c[3]!==u||c[4]!==d?(n={user:d,session:u,loading:h,signIn:X,signUp:Q,signOut:Y,resetPassword:J},c[2]=h,c[3]=u,c[4]=d,c[5]=n):n=c[5];let f=n;return c[6]!==o||c[7]!==f?(i=(0,s.jsx)(q.Provider,{value:f,children:o}),c[6]=o,c[7]=f,c[8]=i):i=c[8],i}async function J(e){let{error:t}=await U.auth.resetPasswordForEmail(e,{redirectTo:`${window.location.origin}/reset-password`});return{error:t}}async function Y(){let{error:e}=await U.auth.signOut();return{error:e}}async function Q(e,t,a){let{error:s}=await U.auth.signUp({email:e,password:t,options:{data:a}});return{error:s}}async function X(e,t){let{error:a}=await U.auth.signInWithPassword({email:e,password:t});return{error:a}}var ee=a(51024);function et(e){let t,a,n,c=(0,l.c)(10),{children:o,redirectTo:d,fallback:m}=e,u=void 0===d?"/login":d,{user:x,loading:h}=G(),[,p]=(0,i.TH)();if(c[0]!==h||c[1]!==u||c[2]!==p||c[3]!==x?(t=()=>{h||x||p(u)},a=[x,h,p,u],c[0]=h,c[1]=u,c[2]=p,c[3]=x,c[4]=t,c[5]=a):(t=c[4],a=c[5]),(0,r.useEffect)(t,a),h){let e;return c[6]!==m?(e=m||(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)(ee.Z,{className:"h-8 w-8 animate-spin mx-auto mb-4 text-medical-blue"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Authenticating..."})]})}),c[6]=m,c[7]=e):e=c[7],e}return x?(c[8]!==o?(n=(0,s.jsx)(s.Fragment,{children:o}),c[8]=o,c[9]=n):n=c[9],n):null}function ea(e){let t,a,n,c=(0,l.c)(10),{children:o,redirectTo:d,restrictWhenAuthenticated:m}=e,u=void 0===d?"/dashboard":d,x=void 0===m||m,{user:h,loading:p}=G(),[,f]=(0,i.TH)();if(c[0]!==p||c[1]!==u||c[2]!==x||c[3]!==f||c[4]!==h?(t=()=>{!p&&h&&x&&f(u)},a=[h,p,f,u,x],c[0]=p,c[1]=u,c[2]=x,c[3]=f,c[4]=h,c[5]=t,c[6]=a):(t=c[5],a=c[6]),(0,r.useEffect)(t,a),p){let e;return c[7]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-pulse",children:(0,s.jsx)("div",{className:"h-8 w-8 bg-gray-300 rounded-full mx-auto mb-4"})}),(0,s.jsx)("p",{className:"text-gray-600",children:"Loading..."})]})}),c[7]=e):e=c[7],e}return h&&x?null:(c[8]!==o?(n=(0,s.jsx)(s.Fragment,{children:o}),c[8]=o,c[9]=n):n=c[9],n)}var es=a(60022),er=a(84848),en=a(95401),el=a(24794),ei=a(61511),ec=a(53909),eo=a(37247),ed=a(59166),em=a(78645);let eu=ec.fC,ex=ec.xz;ec.ZA,ec.Uv,ec.Tr,ec.Ee,r.forwardRef((e,t)=>{let a,r,n,i,c,o,d,m=(0,l.c)(14);m[0]!==e?({className:r,inset:n,children:a,...i}=e,m[0]=e,m[1]=a,m[2]=r,m[3]=n,m[4]=i):(a=m[1],r=m[2],n=m[3],i=m[4]);let u=n&&"pl-8";return m[5]!==r||m[6]!==u?(c=C("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",u,r),m[5]=r,m[6]=u,m[7]=c):c=m[7],m[8]===Symbol.for("react.memo_cache_sentinel")?(o=(0,s.jsx)(eo.Z,{className:"ml-auto"}),m[8]=o):o=m[8],m[9]!==a||m[10]!==i||m[11]!==t||m[12]!==c?(d=(0,s.jsxs)(ec.fF,{ref:t,className:c,...i,children:[a,o]}),m[9]=a,m[10]=i,m[11]=t,m[12]=c,m[13]=d):d=m[13],d}).displayName=ec.fF.displayName,r.forwardRef((e,t)=>{let a,r,n,i,c=(0,l.c)(9);return c[0]!==e?({className:a,...r}=e,c[0]=e,c[1]=a,c[2]=r):(a=c[1],r=c[2]),c[3]!==a?(n=C("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",a),c[3]=a,c[4]=n):n=c[4],c[5]!==r||c[6]!==t||c[7]!==n?(i=(0,s.jsx)(ec.tu,{ref:t,className:n,...r}),c[5]=r,c[6]=t,c[7]=n,c[8]=i):i=c[8],i}).displayName=ec.tu.displayName;let eh=r.forwardRef((e,t)=>{let a,r,n,i,c,o=(0,l.c)(11);o[0]!==e?({className:a,sideOffset:n,...r}=e,o[0]=e,o[1]=a,o[2]=r,o[3]=n):(a=o[1],r=o[2],n=o[3]);let d=void 0===n?4:n;return o[4]!==a?(i=C("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",a),o[4]=a,o[5]=i):i=o[5],o[6]!==r||o[7]!==t||o[8]!==d||o[9]!==i?(c=(0,s.jsx)(ec.Uv,{children:(0,s.jsx)(ec.VY,{ref:t,sideOffset:d,className:i,...r})}),o[6]=r,o[7]=t,o[8]=d,o[9]=i,o[10]=c):c=o[10],c});eh.displayName=ec.VY.displayName;let ep=r.forwardRef((e,t)=>{let a,r,n,i,c,o=(0,l.c)(11);o[0]!==e?({className:a,inset:r,...n}=e,o[0]=e,o[1]=a,o[2]=r,o[3]=n):(a=o[1],r=o[2],n=o[3]);let d=r&&"pl-8";return o[4]!==a||o[5]!==d?(i=C("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",d,a),o[4]=a,o[5]=d,o[6]=i):i=o[6],o[7]!==n||o[8]!==t||o[9]!==i?(c=(0,s.jsx)(ec.ck,{ref:t,className:i,...n}),o[7]=n,o[8]=t,o[9]=i,o[10]=c):c=o[10],c});ep.displayName=ec.ck.displayName,r.forwardRef((e,t)=>{let a,r,n,i,c,o,d,m=(0,l.c)(14);return m[0]!==e?({className:n,children:r,checked:a,...i}=e,m[0]=e,m[1]=a,m[2]=r,m[3]=n,m[4]=i):(a=m[1],r=m[2],n=m[3],i=m[4]),m[5]!==n?(c=C("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),m[5]=n,m[6]=c):c=m[6],m[7]===Symbol.for("react.memo_cache_sentinel")?(o=(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(ec.wU,{children:(0,s.jsx)(ed.Z,{className:"h-4 w-4"})})}),m[7]=o):o=m[7],m[8]!==a||m[9]!==r||m[10]!==i||m[11]!==t||m[12]!==c?(d=(0,s.jsxs)(ec.oC,{ref:t,className:c,checked:a,...i,children:[o,r]}),m[8]=a,m[9]=r,m[10]=i,m[11]=t,m[12]=c,m[13]=d):d=m[13],d}).displayName=ec.oC.displayName,r.forwardRef((e,t)=>{let a,r,n,i,c,o,d=(0,l.c)(12);return d[0]!==e?({className:r,children:a,...n}=e,d[0]=e,d[1]=a,d[2]=r,d[3]=n):(a=d[1],r=d[2],n=d[3]),d[4]!==r?(i=C("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),d[4]=r,d[5]=i):i=d[5],d[6]===Symbol.for("react.memo_cache_sentinel")?(c=(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(ec.wU,{children:(0,s.jsx)(em.Z,{className:"h-2 w-2 fill-current"})})}),d[6]=c):c=d[6],d[7]!==a||d[8]!==n||d[9]!==t||d[10]!==i?(o=(0,s.jsxs)(ec.Rk,{ref:t,className:i,...n,children:[c,a]}),d[7]=a,d[8]=n,d[9]=t,d[10]=i,d[11]=o):o=d[11],o}).displayName=ec.Rk.displayName,r.forwardRef((e,t)=>{let a,r,n,i,c,o=(0,l.c)(11);o[0]!==e?({className:a,inset:r,...n}=e,o[0]=e,o[1]=a,o[2]=r,o[3]=n):(a=o[1],r=o[2],n=o[3]);let d=r&&"pl-8";return o[4]!==a||o[5]!==d?(i=C("px-2 py-1.5 text-sm font-semibold",d,a),o[4]=a,o[5]=d,o[6]=i):i=o[6],o[7]!==n||o[8]!==t||o[9]!==i?(c=(0,s.jsx)(ec.__,{ref:t,className:i,...n}),o[7]=n,o[8]=t,o[9]=i,o[10]=c):c=o[10],c}).displayName=ec.__.displayName;let ef=r.forwardRef((e,t)=>{let a,r,n,i,c=(0,l.c)(9);return c[0]!==e?({className:a,...r}=e,c[0]=e,c[1]=a,c[2]=r):(a=c[1],r=c[2]),c[3]!==a?(n=C("-mx-1 my-1 h-px bg-muted",a),c[3]=a,c[4]=n):n=c[4],c[5]!==r||c[6]!==t||c[7]!==n?(i=(0,s.jsx)(ec.Z0,{ref:t,className:n,...r}),c[5]=r,c[6]=t,c[7]=n,c[8]=i):i=c[8],i});ef.displayName=ec.Z0.displayName;var eg=a(6802);let ej=(0,b.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),ey=r.forwardRef((e,t)=>{let a,r,n,i,c,o,d,m=(0,l.c)(15);m[0]!==e?({className:a,variant:c,size:n,asChild:i,...r}=e,m[0]=e,m[1]=a,m[2]=r,m[3]=n,m[4]=i,m[5]=c):(a=m[1],r=m[2],n=m[3],i=m[4],c=m[5]);let u=void 0!==i&&i?eg.g7:"button";return m[6]!==a||m[7]!==n||m[8]!==c?(o=C(ej({variant:c,size:n,className:a})),m[6]=a,m[7]=n,m[8]=c,m[9]=o):o=m[9],m[10]!==u||m[11]!==r||m[12]!==t||m[13]!==o?(d=(0,s.jsx)(u,{className:o,ref:t,...r}),m[10]=u,m[11]=r,m[12]=t,m[13]=o,m[14]=d):d=m[14],d});ey.displayName="Button";let ev=()=>{let e=G(),[,t]=(0,i.TH)(),a=(0,r.useCallback)(async function(a,s){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/dashboard",{error:n}=await e.signIn(a,s);return n||t(r),{error:n}},[e,t]),s=(0,r.useCallback)(async function(a,s,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"/registration-success",{error:l}=await e.signUp(a,s,r);return l||t(n),{error:l}},[e,t]),n=(0,r.useCallback)(async function(){let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/login",{error:s}=await e.signOut();return s||t(a),{error:s}},[e,t]),l=!!(e.user&&e.session);return{...e,loginAndRedirect:a,signUpAndRedirect:s,logoutAndRedirect:n,isAuthenticated:l}};function eN(){let e,t,a,r,n,c,o,d,m,u,x,h,p,f,g,j,y,v,N,b,w,_,S,C,P,k,A,D,I,T,Z,O,M,E=(0,l.c)(68),[F]=(0,i.TH)(),{logoutAndRedirect:$,user:R}=ev(),L=(null==R?void 0:R.email)||"";E[0]!==(null==R?void 0:R.user_metadata)?(e=(null==R?void 0:R.user_metadata)||{},E[0]=null==R?void 0:R.user_metadata,E[1]=e):e=E[1];let U=e;E[2]!==L||E[3]!==U.full_name||E[4]!==U.name?(t=U.full_name||U.name||L.split("@")[0],E[2]=L,E[3]=U.full_name,E[4]=U.name,E[5]=t):t=E[5];let z=t;E[6]!==z?(a=z.split(" ").map(eb).join("").toUpperCase().slice(0,2)||"U",E[6]=z,E[7]=a):a=E[7];let B=a;if(E[8]!==F||E[9]!==$){let e;E[18]!==$?(e=async()=>{try{let{error:e}=await $("/login");e&&console.error("Logout error:",e)}catch(e){console.error("Unexpected logout error:",e)}},E[18]=$,E[19]=e):e=E[19],r=e,x="bg-white shadow-sm border-b border-gray-200 sticky top-0 z-50",u="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",m="flex justify-between items-center h-16",o="flex items-center space-x-4",E[20]===Symbol.for("react.memo_cache_sentinel")?(d=(0,s.jsx)("div",{className:"w-[82px]",children:(0,s.jsx)("img",{src:"/images/netra-AI-logo.png",alt:"logo",className:"w-full h-full"})}),E[20]=d):d=E[20],n="hidden md:flex space-x-8 ml-8",c=[{path:"/dashboard",label:"Dashboard"},{path:"/patients",label:"Patients"},{path:"/appointments",label:"Appointments"},{path:"/procedures",label:"Procedures"},{path:"/ai-diagnosis",label:"AI Diagnosis"},{path:"/billing",label:"Billing"}].map(e=>{var t;return(0,s.jsx)(i.rU,{href:e.path,className:`font-medium pb-4 transition-colors ${("/dashboard"===(t=e.path)?"/"===F||"/dashboard"===F:F===t)?"text-medical-blue border-b-2 border-medical-blue":"text-gray-500 hover:text-medical-blue"}`,children:e.label},e.path)}),E[8]=F,E[9]=$,E[10]=r,E[11]=n,E[12]=c,E[13]=o,E[14]=d,E[15]=m,E[16]=u,E[17]=x}else r=E[10],n=E[11],c=E[12],o=E[13],d=E[14],m=E[15],u=E[16],x=E[17];return E[21]!==n||E[22]!==c?(h=(0,s.jsx)("nav",{className:n,children:c}),E[21]=n,E[22]=c,E[23]=h):h=E[23],E[24]!==h||E[25]!==o||E[26]!==d?(p=(0,s.jsxs)("div",{className:o,children:[d,h]}),E[24]=h,E[25]=o,E[26]=d,E[27]=p):p=E[27],E[28]===Symbol.for("react.memo_cache_sentinel")?(f=(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(es.Z,{className:"text-gray-400 text-lg cursor-pointer hover:text-medical-blue"}),(0,s.jsx)("span",{className:"absolute -top-1 -right-1 bg-alert-orange text-white text-xs rounded-full w-4 h-4 flex items-center justify-center",children:"3"})]}),E[28]=f):f=E[28],E[29]!==B?(g=(0,s.jsx)("div",{className:"w-8 h-8 bg-medical-blue rounded-full flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-white text-sm font-medium",children:B})}),E[29]=B,E[30]=g):g=E[30],E[31]!==z?(j=(0,s.jsx)("span",{className:"hidden sm:block text-sm font-medium",children:z}),E[31]=z,E[32]=j):j=E[32],E[33]===Symbol.for("react.memo_cache_sentinel")?(y=(0,s.jsx)(er.Z,{className:"text-gray-400 text-sm"}),E[33]=y):y=E[33],E[34]!==g||E[35]!==j?(v=(0,s.jsx)(ex,{asChild:!0,children:(0,s.jsxs)(ey,{variant:"ghost",className:"flex items-center space-x-2 h-auto p-2",children:[g,j,y]})}),E[34]=g,E[35]=j,E[36]=v):v=E[36],E[37]!==z?(N=(0,s.jsx)("p",{className:"text-sm font-medium",children:z}),E[37]=z,E[38]=N):N=E[38],E[39]!==L?(b=(0,s.jsx)("p",{className:"text-xs text-gray-500",children:L}),E[39]=L,E[40]=b):b=E[40],E[41]!==N||E[42]!==b?(w=(0,s.jsxs)("div",{className:"px-2 py-2",children:[N,b]}),E[41]=N,E[42]=b,E[43]=w):w=E[43],E[44]===Symbol.for("react.memo_cache_sentinel")?(_=(0,s.jsx)(ef,{}),E[44]=_):_=E[44],E[45]===Symbol.for("react.memo_cache_sentinel")?(S=(0,s.jsxs)(ep,{children:[(0,s.jsx)(en.Z,{className:"mr-2 h-4 w-4"}),(0,s.jsx)("span",{children:"Profile"})]}),E[45]=S):S=E[45],E[46]===Symbol.for("react.memo_cache_sentinel")?(C=(0,s.jsxs)(ep,{children:[(0,s.jsx)(el.Z,{className:"mr-2 h-4 w-4"}),(0,s.jsx)("span",{children:"Settings"})]}),P=(0,s.jsx)(ef,{}),E[46]=C,E[47]=P):(C=E[46],P=E[47]),E[48]===Symbol.for("react.memo_cache_sentinel")?(k=(0,s.jsx)(ei.Z,{className:"mr-2 h-4 w-4"}),A=(0,s.jsx)("span",{children:"Log out"}),E[48]=k,E[49]=A):(k=E[48],A=E[49]),E[50]!==r?(D=(0,s.jsxs)(ep,{onClick:r,className:"text-red-600",children:[k,A]}),E[50]=r,E[51]=D):D=E[51],E[52]!==w||E[53]!==D?(I=(0,s.jsxs)(eh,{align:"end",className:"w-56",children:[w,_,S,C,P,D]}),E[52]=w,E[53]=D,E[54]=I):I=E[54],E[55]!==v||E[56]!==I?(T=(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[f,(0,s.jsxs)(eu,{children:[v,I]})]}),E[55]=v,E[56]=I,E[57]=T):T=E[57],E[58]!==p||E[59]!==T||E[60]!==m?(Z=(0,s.jsxs)("div",{className:m,children:[p,T]}),E[58]=p,E[59]=T,E[60]=m,E[61]=Z):Z=E[61],E[62]!==Z||E[63]!==u?(O=(0,s.jsx)("div",{className:u,children:Z}),E[62]=Z,E[63]=u,E[64]=O):O=E[64],E[65]!==O||E[66]!==x?(M=(0,s.jsx)("header",{className:x,children:O}),E[65]=O,E[66]=x,E[67]=M):M=E[67],M}function eb(e){return e.charAt(0)}var ew=a(12690),e_=a(10631),eS=a(58018),eC=a(9071),eP=a(469);function ek(e){let t,a,r,n,i=(0,l.c)(8);return i[0]!==e?({className:t,...a}=e,i[0]=e,i[1]=t,i[2]=a):(t=i[1],a=i[2]),i[3]!==t?(r=C("animate-pulse rounded-md bg-muted",t),i[3]=t,i[4]=r):r=i[4],i[5]!==a||i[6]!==r?(n=(0,s.jsx)("div",{className:r,...a}),i[5]=a,i[6]=r,i[7]=n):n=i[7],n}function eA(e){let t,a,r,n,i,c,o=(0,l.c)(16),{stats:d,isLoading:m}=e;if(m){let e;return o[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:Array.from({length:4}).map(eI)}),o[0]=e):e=o[0],e}let u=(null==d?void 0:d.todayAppointments)||0;o[1]!==u?(t={title:"Today's Appointments",value:u,icon:e_.Z,color:"medical-blue",trend:"+8%",trendLabel:"from yesterday"},o[1]=u,o[2]=t):t=o[2];let x=(null==d?void 0:d.totalPatients)||0;o[3]!==x?(a={title:"Total Patients",value:x,icon:eS.Z,color:"healthcare-green",trend:"+12",trendLabel:"new this week"},o[3]=x,o[4]=a):a=o[4];let h=(null==d?void 0:d.aiDiagnoses)||0;o[5]!==h?(r={title:"AI Diagnoses",value:h,icon:eC.Z,color:"diagnostic-purple",trend:"94%",trendLabel:"accuracy rate"},o[5]=h,o[6]=r):r=o[6];let p=`$${((null==d?void 0:d.monthlyRevenue)||0).toLocaleString()}`;o[7]!==p?(n={title:"Revenue",value:p,icon:eP.Z,color:"healthcare-green",trend:"+15%",trendLabel:"from last month"},o[7]=p,o[8]=n):n=o[8],o[9]!==t||o[10]!==a||o[11]!==r||o[12]!==n?(i=[t,a,r,n],o[9]=t,o[10]=a,o[11]=r,o[12]=n,o[13]=i):i=o[13];let f=i;return o[14]!==f?(c=(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:f.map(eD)}),o[14]=f,o[15]=c):c=o[15],c}function eD(e,t){return(0,s.jsxs)("div",{className:"medical-card",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-600",children:e.title}),(0,s.jsx)("p",{className:"text-2xl font-semibold text-professional-dark mt-1",children:e.value})]}),(0,s.jsx)("div",{className:`w-12 h-12 bg-${e.color}/10 rounded-lg flex items-center justify-center`,children:(0,s.jsx)(e.icon,{className:`text-${e.color} text-lg`})})]}),(0,s.jsxs)("div",{className:"mt-4 flex items-center text-sm",children:[(0,s.jsx)("span",{className:"text-healthcare-green font-medium",children:e.trend}),(0,s.jsx)("span",{className:"text-gray-500 ml-1",children:e.trendLabel})]})]},t)}function eI(e,t){return(0,s.jsx)("div",{className:"medical-card",children:(0,s.jsx)(ek,{className:"h-16 w-full"})},t)}a(40914),a(73595);var eT=a(74841);function eZ(){let e,t,a,r,n=(0,l.c)(7);(0,eT.WU)(new Date,"yyyy-MM-dd");let i=[];n[0]===Symbol.for("react.memo_cache_sentinel")?(e={queryKey:["/api/patients"]},n[0]=e):e=n[0];let{data:c}=(0,ew.a)(e);n[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-professional-dark",children:"Today's Schedule"}),(0,s.jsx)("button",{className:"text-medical-blue hover:text-blue-700 text-sm font-medium",children:"View All"})]}),n[1]=t):t=n[1];let o=(null==i?void 0:i.length)===0?(0,s.jsx)("div",{className:"text-center py-8 text-gray-500",children:"No appointments scheduled for today"}):null==i?void 0:i.map(e=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsx)("div",{className:"w-2 h-12 bg-medical-blue rounded-full"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium text-professional-dark",children:(e=>{let t=null==c?void 0:c.find(t=>t.id===e);return t?`${t.firstName} ${t.lastName}`:"Unknown Patient"})(e.patientId)}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:e.procedure}),(0,s.jsxs)("p",{className:"text-sm text-gray-500",children:["Dr. ",e.doctorName]})]})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsx)("p",{className:"font-medium text-professional-dark",children:e.appointmentTime}),(0,s.jsx)("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${function(e){switch(e){case"confirmed":return"medical-badge-normal";case"in-progress":return"bg-yellow-100 text-yellow-800";case"urgent":return"medical-badge-urgent";default:return"bg-gray-100 text-gray-800"}}(e.status)}`,children:function(e){switch(e){case"confirmed":return"Confirmed";case"in-progress":return"In Progress";case"urgent":return"Urgent";case"completed":return"Completed";case"cancelled":return"Cancelled";default:return"Scheduled"}}(e.status)})]})]},e.id));return n[2]!==o?(a=(0,s.jsx)("div",{className:"space-y-4",children:o}),n[2]=o,n[3]=a):a=n[3],n[4]!==t||n[5]!==a?(r=(0,s.jsxs)("div",{className:"medical-card",children:[t,a]}),n[4]=t,n[5]=a,n[6]=r):r=n[6],r}a(86658),a(8759),a(52741);var eO=a(58115),eM=a(71223),eE=a(68983),eF=a(7474),e$=a(716),eR=a(96893),eL=a(53733);function eU(e,t){if(!e)return null;let a=e.replace(/_/g," ").trim().toLowerCase(),s=/^(no|none|negative)/.test(a)||a.includes("no ")||"normal"===a;if("dr"===t){if(s)return"No diabetic retinopathy detected";if(/pdr|proliferative/.test(a))return"Proliferative diabetic retinopathy detected";if(/npdr|non.?proliferative/.test(a)){let e=a.match(/mild|moderate|severe/),t=e?ez(e[0])+" ":"";return`${t}non-proliferative diabetic retinopathy detected`.trim()}if(/background/.test(a))return"Background diabetic retinopathy detected";if(a.includes("diabetic")&&a.includes("retinopathy"))return ez(a);let e=ez(a);return`${e} diabetic retinopathy detected`}{if(s)return"No glaucoma detected";let e=ez(a.replace(/glaucoma/g,"").trim());return e.toLowerCase().startsWith("suspect")?"Glaucoma suspect – further evaluation recommended":e.toLowerCase().includes("risk")?"Glaucoma risk detected":e?`${e} glaucoma detected`:"Glaucoma detected"}}function ez(e){return e?e.charAt(0).toUpperCase()+e.slice(1):e}function eB(e){if(!e)return null;let t=e;if("string"==typeof e)try{t=JSON.parse(e)}catch{return null}if("object"!=typeof t||Array.isArray(t))return null;let a={};for(let[e,s]of Object.entries(t)){let t="number"==typeof s?s:parseFloat(String(s));Number.isNaN(t)||(a[e]=t)}return Object.keys(a).length?a:null}function eV(e,t){if(!e)return null;let a=e.replace(/_/g," ").trim().toLowerCase(),s=/^(no|none|negative)/.test(a)||a.includes("no ")||"normal"===a;if("dr"===t){if(s)return"No diabetic retinopathy detected";if(/pdr|proliferative/.test(a))return"Proliferative diabetic retinopathy detected";if(/npdr|non.?proliferative/.test(a)){let e=a.match(/mild|moderate|severe/),t=e?eK(e[0])+" ":"";return`${t}non-proliferative diabetic retinopathy detected`.trim()}if(/background/.test(a))return"Background diabetic retinopathy detected";if(a.includes("diabetic")&&a.includes("retinopathy"))return eK(a);let e=eK(a);return`${e} diabetic retinopathy detected`}{if(s)return"No glaucoma detected";let e=eK(a.replace(/glaucoma/g,"").trim());return e.toLowerCase().startsWith("suspect")?"Glaucoma suspect – further evaluation recommended":e.toLowerCase().includes("risk")?"Glaucoma risk detected":e?`${e} glaucoma detected`:"Glaucoma detected"}}function eK(e){return e?e.charAt(0).toUpperCase()+e.slice(1):e}function eW(e){return null==e?null:e<=1?100*e:e}function eq(e){if(!e)return null;let t=e;if("string"==typeof e)try{t=JSON.parse(e)}catch{return null}if("object"!=typeof t||Array.isArray(t))return null;let a={};for(let[e,s]of Object.entries(t)){let t="number"==typeof s?s:parseFloat(String(s));Number.isNaN(t)||(a[e]=t)}return Object.keys(a).length?a:null}function eG(e){return Math.min(Math.max(e,0),1)}a(67693);var eH=a(35719),eJ=a(86048),eY=a(80112);let eQ=e=>{var t,a;let{data:n,children:l,placement:i="right",className:c}=e,[o,d]=(0,r.useState)(!1),m=(0,r.useRef)(null),{refs:u,floatingStyles:x,context:h}=(0,eH.YF)({open:o,onOpenChange:d,placement:i,middleware:[(0,eJ.cv)(8),(0,eJ.RR)(),(0,eJ.uY)({padding:8}),(0,eJ.x7)({element:m})],whileElementsMounted:eY.Me}),p=(0,eH.XI)(h,{handleClose:(0,eH.xp)({buffer:4})}),{getReferenceProps:f,getFloatingProps:g}=(0,eH.NI)([p]),j=e=>null==e?"—":e<=1?(100*e).toFixed(1)+"%":e.toFixed(1)+"%",y=e=>{let{probs:t,accent:a}=e;if(!t)return(0,s.jsx)("p",{className:"mt-2 text-[11px] text-gray-400 italic",children:"No probability data"});let r=Object.entries(t).filter(e=>{let[,t]=e;return"number"==typeof t}).sort((e,t)=>(t[1]||0)-(e[1]||0)).slice(0,5);if(!r.length)return(0,s.jsx)("p",{className:"mt-2 text-[11px] text-gray-400 italic",children:"No probability data"});let n="dr"===a?"bg-diagnostic-purple":"bg-medical-blue";return(0,s.jsx)("div",{className:"mt-2 space-y-1",children:r.map(e=>{let[t,a]=e,r=a<=1?100*a:a;return(0,s.jsxs)("div",{className:"grid grid-cols-[140px_1fr_42px] items-center gap-2 text-[11px]",children:[(0,s.jsx)("span",{className:"truncate text-gray-500",title:t,children:t}),(0,s.jsx)("div",{className:"h-1.5 bg-gray-200 rounded-full overflow-hidden",children:(0,s.jsx)("div",{className:C("h-1.5 rounded-full transition-all",n),style:{width:`${Math.min(r,100)}%`}})}),(0,s.jsxs)("span",{className:"tabular-nums text-gray-600 text-[10px] text-right",children:[r.toFixed(1),"%"]})]},t)})})};return(0,s.jsxs)("div",{ref:u.setReference,...f(),className:C("group/analysis relative",c),children:[l,o&&(0,s.jsx)(eH.ll,{children:(0,s.jsxs)("div",{ref:u.setFloating,style:x,...g(),className:"z-50 w-[420px] max-w-[90vw] rounded-lg border border-gray-200 bg-white shadow-xl p-4 animate-in fade-in-0 zoom-in-95",children:[(0,s.jsxs)("header",{className:"flex items-start justify-between mb-4",children:[(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)("div",{className:"w-9 h-9 rounded-md bg-diagnostic-purple/10 flex items-center justify-center shrink-0",children:(0,s.jsx)(eC.Z,{className:"w-4 h-4 text-diagnostic-purple"})}),(0,s.jsxs)("div",{className:"space-y-0.5",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-professional-dark leading-tight pr-6 break-words",children:n.diagnosis}),(0,s.jsxs)("div",{className:"flex items-center gap-2 text-[11px] text-gray-500",children:[(0,s.jsx)("span",{children:n.createdAt.toLocaleString()}),(0,s.jsx)("span",{className:"inline-block w-1 h-1 rounded-full bg-gray-300"}),(0,s.jsx)("span",{children:n.analyzedBy})]})]})]}),(0,s.jsx)("span",{className:C("px-2 py-0.5 rounded-full text-[10px] font-semibold capitalize",{normal:"medical-badge-normal",mild:"medical-badge-mild",moderate:"bg-orange-100 text-orange-800",severe:"medical-badge-urgent"}[n.severity]||"bg-gray-100 text-gray-800"),children:n.severity})]}),(0,s.jsxs)("div",{className:"space-y-5 text-xs",children:[(0,s.jsxs)("section",{children:[(0,s.jsxs)("h6",{className:"font-semibold text-gray-700 mb-1 flex items-center gap-1",children:[(0,s.jsx)(e$.Z,{className:"w-3 h-3"})," Diabetic Retinopathy"]}),(0,s.jsxs)("dl",{className:"grid grid-cols-[90px_1fr] gap-y-1 gap-x-2",children:[(0,s.jsx)("dt",{className:"text-gray-500",children:"Prediction"}),(0,s.jsx)("dd",{className:"font-medium break-words",children:n.drPrediction||"—"}),(0,s.jsx)("dt",{className:"text-gray-500",children:"Confidence"}),(0,s.jsx)("dd",{children:j(n.drConfidence)})]}),(0,s.jsx)(y,{probs:n.drProbability,accent:"dr"})]}),(0,s.jsxs)("section",{className:"pt-4 border-t border-gray-100",children:[(0,s.jsxs)("h6",{className:"font-semibold text-gray-700 mb-1 flex items-center gap-1",children:[(0,s.jsx)(e$.Z,{className:"w-3 h-3"})," Glaucoma"]}),(0,s.jsxs)("dl",{className:"grid grid-cols-[90px_1fr] gap-y-1 gap-x-2",children:[(0,s.jsx)("dt",{className:"text-gray-500",children:"Prediction"}),(0,s.jsx)("dd",{className:"font-medium break-words",children:n.glaucomaPrediction||"—"}),(0,s.jsx)("dt",{className:"text-gray-500",children:"Confidence"}),(0,s.jsx)("dd",{children:j(n.glaucomaConfidence)})]}),(0,s.jsx)(y,{probs:n.glaucomaProbability,accent:"gl"})]}),(0,s.jsxs)("section",{className:"grid grid-cols-4 gap-4 px-3 py-2 rounded-md bg-gray-50 border border-gray-100",children:[(0,s.jsxs)("div",{className:"space-y-0.5",children:[(0,s.jsx)("p",{className:"text-[10px] uppercase tracking-wide text-gray-500",children:"Risk"}),(0,s.jsx)("p",{className:"text-[11px] font-medium text-gray-800",children:n.riskLevel||"—"})]}),(0,s.jsxs)("div",{className:"space-y-0.5",children:[(0,s.jsx)("p",{className:"text-[10px] uppercase tracking-wide text-gray-500",children:"Status"}),(0,s.jsx)("p",{className:"text-[11px] font-medium text-gray-800",children:n.status||"—"})]}),(0,s.jsxs)("div",{className:"space-y-0.5",children:[(0,s.jsx)("p",{className:"text-[10px] uppercase tracking-wide text-gray-500",children:"Confidence"}),(0,s.jsxs)("p",{className:"text-[11px] font-medium text-gray-800",children:[n.confidence,"%"]})]}),(0,s.jsxs)("div",{className:"space-y-0.5",children:[(0,s.jsx)("p",{className:"text-[10px] uppercase tracking-wide text-gray-500",children:"Severity"}),(0,s.jsx)("p",{className:"text-[11px] font-medium capitalize text-gray-800",children:n.severity})]})]}),n.doctorNotes?(0,s.jsxs)("section",{className:"space-y-1",children:[(0,s.jsx)("p",{className:"text-[10px] uppercase tracking-wide text-gray-500",children:"Doctor Notes"}),(0,s.jsx)("p",{className:"text-[11px] text-gray-700 whitespace-pre-line max-h-28 overflow-y-auto leading-relaxed",children:n.doctorNotes})]}):null]}),(0,s.jsx)("div",{ref:m,className:"absolute w-3 h-3 rotate-45 bg-white shadow-sm border border-gray-200",style:{left:null==(t=h.middlewareData.arrow)?void 0:t.x,top:null==(a=h.middlewareData.arrow)?void 0:a.y,[h.placement.startsWith("top")?"bottom":h.placement.startsWith("bottom")?"top":h.placement.startsWith("left")?"right":"left"]:"-5px"}})]})})]})};function eX(){var e;let t,[a,n]=(0,r.useState)(null),[l,i]=(0,r.useState)(null),[c,o]=(0,r.useState)(null),[m,x]=(0,r.useState)(""),[h,p]=(0,r.useState)(""),{toast:f}=v(),g=(0,u.NL)(),j=(0,eO.D)({mutationFn:async e=>(await d("POST","/api/analysis-feedback",e)).json()}),{data:y}=(t=null==c||null==(e=c.meta)?void 0:e.request_id,(0,ew.a)({queryKey:["/api/analysis-feedback",t],queryFn:async()=>(await d("GET",`/api/analysis-feedback?analysis_id=${t}`)).json(),enabled:!!t})),{data:N,isLoading:b}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,{toast:t}=v();return(0,ew.a)({queryKey:["ai-diagnoses",{limit:e}],staleTime:3e4,queryFn:async()=>{try{let{data:{session:t}}=await U.auth.getSession();if(!t)throw Error("No authenticated session found");let a=`${R}/functions/v1/list-doctor-analysis?limit=${e}`,s=await fetch(a,{method:"GET",headers:{Authorization:`Bearer ${t.access_token}`,"Content-Type":"application/json"}});if(!s.ok){let e=await s.text(),t={};try{t=JSON.parse(e)}catch{t={message:e}}throw Error((null==t?void 0:t.error)||(null==t?void 0:t.message)||`HTTP error ${s.status}`)}let r=await s.json();if(!r.success)throw Error("Failed to fetch analyses");return r.analyses.map(e=>({id:e.id,patientId:e.patient_id,imageUrl:e.image_url||"",diagnosis:function(e){let t=[],a=eU(e.dr_prediction,"dr"),s=eU(e.glaucoma_prediction,"glaucoma");return a&&t.push(a),s&&t.push(s),t.join(" | ")||"Analysis"}(e),confidence:function(e){let t=[e.dr_confidence,e.glaucoma_confidence].filter(e=>"number"==typeof e);return t.length?Math.round(Math.max(...t.map(e=>e<=1?100*e:e))):0}(e),severity:function(e){let t=(e.risk_level||"").toLowerCase();return"mild"===t?"mild":"moderate"===t?"moderate":"severe"===t||"high"===t||"critical"===t?"severe":"normal"}(e),recommendations:[],analyzedBy:e.analyzed_by||"AI Model",reviewedByDoctor:(e.status||"").toLowerCase().includes("review"),doctorNotes:e.clinical_notes||void 0,createdAt:new Date(e.created_at),drPrediction:e.dr_prediction,drConfidence:e.dr_confidence,drProbability:eB(e.dr_probability),glaucomaPrediction:e.glaucoma_prediction,glaucomaConfidence:e.glaucoma_confidence,glaucomaProbability:function(e){let t=e.glaucoma_probability;if(t&&("object"==typeof t||"string"==typeof t&&t.trim().startsWith("{")))return eB(t);if("number"==typeof t){let a=e.glaucoma_confidence;"number"!=typeof a&&(a=1-t);let s=Math.min(Math.max(a,0),1),r=Math.min(Math.max(t,0),1),n=s+r,l=n>0?s/n:0,i=n>0?r/n:0,c=(e.glaucoma_prediction||"").toLowerCase();return"normal"===c||c.includes("normal")?{Normal:l,Glaucoma:i}:{Glaucoma:l,Normal:i}}return null}(e),riskLevel:e.risk_level,status:e.status}))}catch(e){throw t({title:"Failed to load analyses",description:e.message,variant:"destructive"}),e}}})}(3),{data:_}=(0,ew.a)({queryKey:["/api/patients"]}),{mutate:S}=function(){let e=(0,u.NL)(),{toast:t}=v();return(0,eO.D)({mutationFn:async e=>{let{data:{session:t}}=await U.auth.getSession();if(!t)throw Error("No authenticated session found");let a=await fetch("https://sqgtgwrhxoaeaxofyelf.supabase.co/functions/v1/store-analysis",{method:"POST",headers:{Authorization:`Bearer ${t.access_token}`,"Content-Type":"application/json"},body:JSON.stringify(e)});if(!a.ok){let e=await a.text(),t={};try{t=JSON.parse(e)}catch{t={message:e}}throw Error((null==t?void 0:t.error)||(null==t?void 0:t.message)||`HTTP error ${a.status}`)}let s=await a.json();if(!s.success)throw Error(s.error||"Failed to store AI diagnosis");return s},onSuccess:a=>(e.invalidateQueries({queryKey:["ai-diagnoses"]}),window.__lastAnalysisId__=a.analysis_id,t({title:"Analysis Stored Successfully",description:"AI diagnosis has been saved to the database."}),a),onError:e=>{console.error("Error storing AI diagnosis:",e),t({title:"Error Storing Analysis",description:e.message||"Failed to store AI diagnosis. Please try again.",variant:"destructive"})}})}(),C=(0,eO.D)({mutationFn:async e=>(await d("POST","/api/ai-diagnoses",e)).json(),onSuccess:e=>{o(e),S({aiResponse:e,imageUrl:a||""}),f({title:"Analysis Complete",description:"Image has been successfully analyzed and stored.",variant:"default"})},onError:e=>{f({title:"Analysis Failed",description:e.message||"Failed to analyze the image. Please try again.",variant:"destructive"})}}),P=()=>{i(null),o(null),a&&URL.revokeObjectURL(a),n(null)},k=e=>e.toLowerCase().includes("normal")||"no dr"===e.toLowerCase()?(0,s.jsx)(eM.Z,{className:"w-5 h-5 text-green-600"}):(0,s.jsx)(eE.Z,{className:"w-5 h-5 text-red-600"}),A=e=>0===e?"bg-green-100 text-green-800 border-green-200":1===e?"bg-yellow-100 text-yellow-800 border-yellow-200":2===e?"bg-orange-100 text-orange-800 border-orange-200":e>=3?"bg-red-100 text-red-800 border-red-200":"bg-gray-100 text-gray-800 border-gray-200";return(0,s.jsxs)("div",{className:"medical-card",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"w-8 h-8 bg-diagnostic-purple/10 rounded-lg flex items-center justify-center",children:(0,s.jsx)(eC.Z,{className:"text-diagnostic-purple"})}),(0,s.jsx)("h3",{className:"text-lg font-semibold text-professional-dark",children:"AI Fundus Analysis"})]}),(0,s.jsx)("span",{className:"text-xs bg-diagnostic-purple/10 text-diagnostic-purple px-2 py-1 rounded-full",children:"BETA"})]}),(0,s.jsx)("div",{className:"bg-gradient-to-r from-diagnostic-purple/5 to-medical-blue/5 rounded-lg p-6 mb-6",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"w-16 h-16 bg-diagnostic-purple/10 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,s.jsx)(eF.Z,{className:"text-diagnostic-purple text-2xl"})}),(0,s.jsx)("h4",{className:"text-lg font-medium text-professional-dark mb-2",children:"Upload Fundus Photography"}),(0,s.jsx)("p",{className:"text-gray-600 text-sm mb-4",children:"Our AI model can detect diabetic retinopathy, glaucoma, and macular degeneration with 94% accuracy"}),a?(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"relative inline-block",children:[(0,s.jsx)("img",{src:a,alt:"Fundus preview",className:"max-w-full max-h-64 rounded-lg shadow-md"}),(0,s.jsx)("button",{onClick:P,className:"absolute top-2 right-2 bg-red-500 hover:bg-red-600 text-white rounded-full p-1 transition-colors",children:(0,s.jsx)(w.Z,{className:"w-4 h-4"})})]}),(0,s.jsxs)("div",{className:"text-sm text-gray-600",children:[(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"File:"})," ",null==l?void 0:l.name]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Size:"})," ",l?(l.size/1024/1024).toFixed(2):0," MB"]})]}),!c&&(0,s.jsxs)("div",{className:"flex gap-2 justify-center",children:[(0,s.jsxs)(ey,{onClick:()=>{l&&C.mutate(l)},disabled:C.isPending,className:"bg-diagnostic-purple hover:bg-diagnostic-purple/90",children:[(0,s.jsx)(eC.Z,{className:"w-4 h-4 mr-2"}),C.isPending?"Analyzing...":"Analyze Image"]}),(0,s.jsx)(ey,{onClick:P,variant:"outline",disabled:C.isPending,children:"Upload Different Image"})]})]}):(0,s.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8",children:[(0,s.jsx)("input",{type:"file",id:"fundus-upload",className:"hidden",accept:"image/*",onChange:e=>{var t;let a=null==(t=e.target.files)?void 0:t[0];if(a){if(!a.type.startsWith("image/"))return void f({title:"Invalid File Type",description:"Please select an image file (PNG, JPG, JPEG).",variant:"destructive"});if(a.size>0xa00000)return void f({title:"File Too Large",description:"Please select an image smaller than 10MB.",variant:"destructive"});i(a),o(null),n(URL.createObjectURL(a))}}}),(0,s.jsx)("label",{htmlFor:"fundus-upload",className:"cursor-pointer",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)(eF.Z,{className:"text-4xl text-gray-400 mb-4 mx-auto"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Click to upload or drag and drop"}),(0,s.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"PNG, JPG, JPEG up to 10MB"})]})})]})]})}),c&&(0,s.jsxs)("div",{className:"mb-6 space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("h4",{className:"font-medium text-professional-dark flex items-center",children:[(0,s.jsx)(e$.Z,{className:"w-5 h-5 mr-2 text-diagnostic-purple"}),"Analysis Results"]}),(0,s.jsx)(ey,{onClick:P,variant:"outline",size:"sm",children:"New Analysis"})]}),(0,s.jsxs)("div",{className:"medical-card bg-white border border-gray-200",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[k(c.diabetic_retinopathy.prediction),(0,s.jsx)("h5",{className:"font-medium text-professional-dark",children:"Diabetic Retinopathy"})]}),(0,s.jsx)("span",{className:`px-3 py-1 rounded-full text-xs font-medium border ${A(c.diabetic_retinopathy.severity_level)}`,children:c.diabetic_retinopathy.prediction})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-sm text-gray-600",children:"Confidence"}),(0,s.jsxs)("span",{className:"text-sm font-medium",children:[(100*c.diabetic_retinopathy.confidence).toFixed(1),"%"]})]}),(0,s.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,s.jsx)("div",{className:"bg-diagnostic-purple h-2 rounded-full transition-all duration-500",style:{width:`${100*c.diabetic_retinopathy.confidence}%`}})}),(0,s.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:(0,s.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,s.jsx)(eR.Z,{className:"w-4 h-4 text-blue-600 mt-0.5"}),(0,s.jsx)("p",{className:"text-sm text-blue-800",children:c.diabetic_retinopathy.doctor_note})]})}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("h6",{className:"text-xs font-medium text-gray-700 uppercase tracking-wide",children:"Probability Breakdown"}),Object.entries(c.diabetic_retinopathy.probabilities).map(e=>{let[t,a]=e;return(0,s.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,s.jsx)("span",{className:"text-gray-600",children:t}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("div",{className:"w-16 bg-gray-200 rounded-full h-1",children:(0,s.jsx)("div",{className:"bg-diagnostic-purple h-1 rounded-full",style:{width:`${100*a}%`}})}),(0,s.jsxs)("span",{className:"text-gray-800 font-medium min-w-[3rem] text-right",children:[(100*a).toFixed(1),"%"]})]})]},t)})]})]})]}),(0,s.jsxs)("div",{className:"medical-card bg-white border border-gray-200",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[k(c.glaucoma.prediction),(0,s.jsx)("h5",{className:"font-medium text-professional-dark",children:"Glaucoma"})]}),(0,s.jsx)("span",{className:`px-3 py-1 rounded-full text-xs font-medium border ${A(c.glaucoma.severity_level)}`,children:c.glaucoma.prediction})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-sm text-gray-600",children:"Confidence"}),(0,s.jsxs)("span",{className:"text-sm font-medium",children:[(100*c.glaucoma.confidence).toFixed(1),"%"]})]}),(0,s.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,s.jsx)("div",{className:"bg-medical-blue h-2 rounded-full transition-all duration-500",style:{width:`${100*c.glaucoma.confidence}%`}})}),(0,s.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:(0,s.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,s.jsx)(eR.Z,{className:"w-4 h-4 text-green-600 mt-0.5"}),(0,s.jsx)("p",{className:"text-sm text-green-800",children:c.glaucoma.doctor_note})]})}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("h6",{className:"text-xs font-medium text-gray-700 uppercase tracking-wide",children:"Probability Breakdown"}),Object.entries(c.glaucoma.probabilities).map(e=>{let[t,a]=e;return(0,s.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,s.jsx)("span",{className:"text-gray-600",children:t}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("div",{className:"w-16 bg-gray-200 rounded-full h-1",children:(0,s.jsx)("div",{className:"bg-medical-blue h-1 rounded-full",style:{width:`${100*a}%`}})}),(0,s.jsxs)("span",{className:"text-gray-800 font-medium min-w-[3rem] text-right",children:[(100*a).toFixed(1),"%"]})]})]},t)})]})]})]}),(0,s.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2 mb-3",children:[(0,s.jsx)(eL.Z,{className:"w-4 h-4 text-gray-500"}),(0,s.jsx)("h6",{className:"text-sm font-medium text-gray-700",children:"Analysis Details"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-xs",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-gray-500",children:"Request ID:"}),(0,s.jsx)("p",{className:"font-mono text-gray-800",children:c.meta.request_id})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-gray-500",children:"Processing Time:"}),(0,s.jsxs)("p",{className:"text-gray-800",children:[c.meta.inference_time_ms,"ms"]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-gray-500",children:"Image Size:"}),(0,s.jsx)("p",{className:"text-gray-800",children:c.meta.image_size})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-gray-500",children:"Model Version:"}),(0,s.jsx)("p",{className:"text-gray-800",children:c.meta.model_version})]})]})]}),(0,s.jsxs)("div",{className:"medical-card bg-white border border-gray-200",children:[(0,s.jsx)("h5",{className:"font-medium text-professional-dark mb-3",children:"Doctor Feedback"}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)("textarea",{className:"w-full border rounded-md p-2 text-sm",rows:4,placeholder:"Add clinical notes or additional findings (e.g., AMD, CSR)…",value:m,onChange:e=>x(e.target.value)}),(0,s.jsx)("input",{type:"text",className:"w-full border rounded-md p-2 text-sm",placeholder:"Tags (comma separated): e.g., AMD, CSR",value:h,onChange:e=>p(e.target.value)}),(0,s.jsx)("div",{className:"flex justify-end",children:(0,s.jsx)(ey,{className:"bg-diagnostic-purple hover:bg-diagnostic-purple/90",disabled:j.isPending||!m.trim(),onClick:async()=>{try{var e;let t=h.split(",").map(e=>e.trim()).filter(Boolean),a=window.__lastAnalysisId__||(null==c||null==(e=c.meta)?void 0:e.request_id);await j.mutateAsync({analysis_id:a,notes:m.trim(),tags:t}),x(""),p(""),f({title:"Feedback saved",variant:"default"}),g.invalidateQueries({queryKey:["/api/analysis-feedback",a]})}catch(e){f({title:"Failed to save feedback",description:(null==e?void 0:e.message)||"",variant:"destructive"})}},children:"Save Feedback"})})]}),(0,s.jsxs)("div",{className:"mt-5",children:[(0,s.jsx)("h6",{className:"text-sm font-medium text-gray-700 mb-2",children:"Previous Feedback"}),y&&0!==y.length?(0,s.jsx)("ul",{className:"space-y-2",children:y.map(e=>{var t;return(0,s.jsxs)("li",{className:"border rounded-md p-2",children:[(0,s.jsx)("div",{className:"text-xs text-gray-500 mb-1",children:(0,eT.WU)(new Date(e.created_at),"MMM dd, yyyy HH:mm")}),(0,s.jsx)("p",{className:"text-sm text-gray-800",children:e.notes}),(null==(t=e.tags)?void 0:t.length)?(0,s.jsx)("div",{className:"mt-2 flex flex-wrap gap-2",children:e.tags.map(e=>(0,s.jsx)("span",{className:"px-2 py-0.5 rounded-full bg-gray-100 text-gray-700 text-xs border",children:e},e))}):null]},e.id)})}):(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"No feedback yet"})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-medium text-professional-dark mb-4",children:"Recent Analysis Results"}),(0,s.jsx)("div",{className:"space-y-3",children:b?(0,s.jsx)("div",{className:"text-center py-8 text-gray-500 text-sm",children:"Loading analyses…"}):N&&0!==N.length?N.map(e=>{let t;return(0,s.jsx)(eQ,{data:e,placement:"right",children:(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg cursor-pointer hover:bg-gray-100 transition-colors",onClick:()=>window.location.href=`/ai-diagnosis/${e.id}`,children:[(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsx)("div",{className:"w-12 h-12 bg-diagnostic-purple/10 rounded-lg flex items-center justify-center",children:(0,s.jsx)(eC.Z,{className:"text-diagnostic-purple"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium text-professional-dark",children:(e=>{let t=null==_?void 0:_.find(t=>t.id===e);return t?`${t.firstName} ${t.lastName}`:"Unknown Patient"})(e.patientId)}),(0,s.jsx)("p",{className:"text-sm text-gray-600 line-clamp-1 max-w-[260px]",children:e.diagnosis}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:(0,eT.WU)(new Date(e.createdAt),"MMM dd, yyyy HH:mm")})]})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsx)("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${(e=>{switch(e){case"normal":return"medical-badge-normal";case"mild":return"medical-badge-mild";case"moderate":return"bg-orange-100 text-orange-800";case"severe":return"medical-badge-urgent";default:return"bg-gray-100 text-gray-800"}})(e.severity)}`,children:(t=e.severity).charAt(0).toUpperCase()+t.slice(1)}),(0,s.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[e.confidence,"% confidence"]})]})]})},e.id)}):(0,s.jsx)("div",{className:"text-center py-8 text-gray-500",children:"No AI diagnoses available yet"})})]})]})}var e0=a(45077);let e1=r.forwardRef((e,t)=>{let a,r,n,i,c,o=(0,l.c)(11);return o[0]!==e?({className:a,type:n,...r}=e,o[0]=e,o[1]=a,o[2]=r,o[3]=n):(a=o[1],r=o[2],n=o[3]),o[4]!==a?(i=C("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),o[4]=a,o[5]=i):i=o[5],o[6]!==r||o[7]!==t||o[8]!==i||o[9]!==n?(c=(0,s.jsx)("input",{type:n,className:i,ref:t,...r}),o[6]=r,o[7]=t,o[8]=i,o[9]=n,o[10]=c):c=o[10],c});function e2(){let e,t,a,n,i,c,o,d,m,u=(0,l.c)(27),[x,h]=(0,r.useState)("");u[0]===Symbol.for("react.memo_cache_sentinel")?(e={queryKey:["/api/patients"]},u[0]=e):e=u[0];let{data:p}=(0,ew.a)(e);if(u[1]!==p||u[2]!==x){let e,r,l,d=null==p?void 0:p.filter(e=>`${e.firstName} ${e.lastName}`.toLowerCase().includes(x.toLowerCase())||e.email.toLowerCase().includes(x.toLowerCase())).slice(0,5),m=e4;i="medical-card",u[9]===Symbol.for("react.memo_cache_sentinel")?(c=(0,s.jsx)("h3",{className:"text-lg font-semibold text-professional-dark mb-4",children:"Quick Patient Search"}),u[9]=c):c=u[9],u[10]===Symbol.for("react.memo_cache_sentinel")?(e=e=>h(e.target.value),u[10]=e):e=u[10],u[11]!==x?(r=(0,s.jsx)(e1,{type:"text",placeholder:"Search patients...",value:x,onChange:e,className:"pl-10"}),u[11]=x,u[12]=r):r=u[12],u[13]===Symbol.for("react.memo_cache_sentinel")?(l=(0,s.jsx)(e0.Z,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),u[13]=l):l=u[13],u[14]!==r?(o=(0,s.jsxs)("div",{className:"relative mb-4",children:[r,l]}),u[14]=r,u[15]=o):o=u[15],t="space-y-3";let f=x?"Search Results":"Recent Patients";u[16]!==f?(a=(0,s.jsx)("p",{className:"text-sm font-medium text-gray-600",children:f}),u[16]=f,u[17]=a):a=u[17],n=(null==d?void 0:d.length)===0?(0,s.jsx)("div",{className:"text-center py-4 text-gray-500",children:x?"No patients found":"No patients available"}):null==d?void 0:d.map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 hover:bg-gray-50 rounded-lg cursor-pointer transition-colors",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:`w-8 h-8 bg-${m(t)}/10 rounded-full flex items-center justify-center`,children:(0,s.jsx)("span",{className:`text-xs font-medium text-${m(t)}`,children:function(e,t){return`${e.charAt(0)}${t.charAt(0)}`.toUpperCase()}(e.firstName,e.lastName)})}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("p",{className:"text-sm font-medium text-professional-dark",children:[e.firstName," ",e.lastName]}),(0,s.jsxs)("p",{className:"text-xs text-gray-500",children:["Last visit: ",e.updatedAt?new Date(e.updatedAt).toLocaleDateString():"N/A"]})]})]}),(0,s.jsx)(eo.Z,{className:"h-4 w-4 text-gray-400"})]},e.id)),u[1]=p,u[2]=x,u[3]=t,u[4]=a,u[5]=n,u[6]=i,u[7]=c,u[8]=o}else t=u[3],a=u[4],n=u[5],i=u[6],c=u[7],o=u[8];return u[18]!==t||u[19]!==a||u[20]!==n?(d=(0,s.jsxs)("div",{className:t,children:[a,n]}),u[18]=t,u[19]=a,u[20]=n,u[21]=d):d=u[21],u[22]!==i||u[23]!==c||u[24]!==o||u[25]!==d?(m=(0,s.jsxs)("div",{className:i,children:[c,o,d]}),u[22]=i,u[23]=c,u[24]=o,u[25]=d,u[26]=m):m=u[26],m}function e4(e){let t=["medical-blue","healthcare-green","diagnostic-purple"];return t[e%t.length]}e1.displayName="Input";var e5=a(70381);let e3=r.forwardRef((e,t)=>{let a,r,n,i,c,o=(0,l.c)(10);return o[0]!==e?({className:a,...r}=e,o[0]=e,o[1]=a,o[2]=r):(a=o[1],r=o[2]),o[3]!==a?(n=C("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",a),o[3]=a,o[4]=n):n=o[4],o[5]===Symbol.for("react.memo_cache_sentinel")?(i=(0,s.jsx)(e5.z$,{className:C("flex items-center justify-center text-current"),children:(0,s.jsx)(ed.Z,{className:"h-4 w-4"})}),o[5]=i):i=o[5],o[6]!==r||o[7]!==t||o[8]!==n?(c=(0,s.jsx)(e5.fC,{ref:t,className:n,...r,children:i}),o[6]=r,o[7]=t,o[8]=n,o[9]=c):c=o[9],c});function e6(){let e,t,a,r,n,i,c,o,d,m=(0,l.c)(22),x=(0,u.NL)();m[0]===Symbol.for("react.memo_cache_sentinel")?(e={queryKey:["/api/tasks",{assignedTo:"Dr. Rodriguez"}]},m[0]=e):e=m[0];let{data:h}=(0,ew.a)(e);m[1]!==x?(t={mutationFn:e7,onSuccess:()=>{x.invalidateQueries({queryKey:["/api/tasks"]})}},m[1]=x,m[2]=t):t=m[2];let p=(0,eO.D)(t);if(m[3]!==h||m[4]!==p){let e,t,l=null==h?void 0:h.filter(e8).slice(0,5);m[9]!==p?(e=(e,t)=>{p.mutate({taskId:e,status:t?"completed":"pending"})},m[9]=p,m[10]=e):e=m[10];let c=e;n="medical-card",m[11]===Symbol.for("react.memo_cache_sentinel")?(t=(0,s.jsx)("h3",{className:"text-lg font-semibold text-professional-dark",children:"Pending Tasks"}),m[11]=t):t=m[11];let o=(null==l?void 0:l.length)||0;m[12]!==o?(i=(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[t,(0,s.jsx)("span",{className:"bg-alert-orange/10 text-alert-orange text-xs px-2 py-1 rounded-full",children:o})]}),m[12]=o,m[13]=i):i=m[13],a="space-y-3",r=(null==l?void 0:l.length)===0?(0,s.jsx)("div",{className:"text-center py-8 text-gray-500",children:"No pending tasks"}):null==l?void 0:l.map(e=>(0,s.jsxs)("div",{className:"flex items-start space-x-3 p-3 bg-gray-50 rounded-lg",children:[(0,s.jsx)(e3,{className:"mt-1",checked:"completed"===e.status,onCheckedChange:t=>c(e.id,t)}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-professional-dark",children:e.title}),e.description&&(0,s.jsx)("p",{className:"text-xs text-gray-600 mt-1",children:e.description}),(0,s.jsxs)("div",{className:"flex items-center space-x-2 mt-1",children:[e.dueDate&&(0,s.jsxs)("p",{className:"text-xs text-gray-500",children:["Due: ",(0,eT.WU)(new Date(e.dueDate),"MMM dd, yyyy")]}),(0,s.jsx)("span",{className:`text-xs font-medium ${function(e){switch(e){case"urgent":return"text-alert-orange";case"high":return"text-red-600";case"medium":return"text-yellow-600";case"low":return"text-green-600";default:return"text-gray-600"}}(e.priority)}`,children:e.priority})]})]})]},e.id)),m[3]=h,m[4]=p,m[5]=a,m[6]=r,m[7]=n,m[8]=i}else a=m[5],r=m[6],n=m[7],i=m[8];return m[14]!==a||m[15]!==r?(c=(0,s.jsx)("div",{className:a,children:r}),m[14]=a,m[15]=r,m[16]=c):c=m[16],m[17]===Symbol.for("react.memo_cache_sentinel")?(o=(0,s.jsx)("button",{className:"w-full mt-4 text-center text-medical-blue text-sm font-medium hover:text-blue-700",children:"View All Tasks"}),m[17]=o):o=m[17],m[18]!==n||m[19]!==i||m[20]!==c?(d=(0,s.jsxs)("div",{className:n,children:[i,c,o]}),m[18]=n,m[19]=i,m[20]=c,m[21]=d):d=m[21],d}function e8(e){return"pending"===e.status}async function e7(e){let{taskId:t,status:a}=e;return(await d("PATCH",`/api/tasks/${t}`,{status:a})).json()}e3.displayName=e5.fC.displayName;var e9=a(22474),te=a(34465),tt=a(25568);function ta(){let e,t,a,r=(0,l.c)(3);r[0]===Symbol.for("react.memo_cache_sentinel")?(e=[{icon:e9.Z,label:"New Patient",href:"/patients",color:"medical-blue"},{icon:te.Z,label:"Book Appointment",href:"/appointments",color:"healthcare-green"},{icon:eC.Z,label:"AI Analysis",href:"/ai-diagnosis",color:"diagnostic-purple"},{icon:tt.Z,label:"Generate Invoice",href:"/billing",color:"alert-orange"}],r[0]=e):e=r[0];let n=e;return r[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,s.jsx)("h3",{className:"text-lg font-semibold text-professional-dark mb-4",children:"Quick Actions"}),r[1]=t):t=r[1],r[2]===Symbol.for("react.memo_cache_sentinel")?(a=(0,s.jsxs)("div",{className:"medical-card",children:[t,(0,s.jsx)("div",{className:"grid grid-cols-2 gap-3",children:n.map(ts)})]}),r[2]=a):a=r[2],a}function ts(e,t){return(0,s.jsx)(i.rU,{href:e.href,children:(0,s.jsxs)("button",{className:`flex flex-col items-center justify-center p-4 bg-${e.color}/5 hover:bg-${e.color}/10 rounded-lg transition-colors w-full`,children:[(0,s.jsx)(e.icon,{className:`text-${e.color} text-xl mb-2`}),(0,s.jsx)("span",{className:`text-sm font-medium text-${e.color}`,children:e.label})]})},t)}function tr(){let e,t,a,r,n,i,c,o=(0,l.c)(10);o[0]===Symbol.for("react.memo_cache_sentinel")?(e={queryKey:["/api/dashboard/stats"]},o[0]=e):e=o[0];let{data:d,isLoading:m}=(0,ew.a)(e);return o[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-semibold text-professional-dark",children:"Dashboard Overview"}),(0,s.jsx)("p",{className:"text-gray-600 mt-1",children:"Welcome back, Dr. Rodriguez. Here's your clinic overview for today."})]}),o[1]=t):t=o[1],o[2]===Symbol.for("react.memo_cache_sentinel")?(a=(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6",children:[t,(0,s.jsx)("div",{className:"mt-4 sm:mt-0",children:(0,s.jsxs)("span",{className:"text-sm text-gray-500",children:["Today: ",(0,s.jsx)("span",{className:"font-medium",children:new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]})})]}),o[2]=a):a=o[2],o[3]!==m||o[4]!==d?(r=(0,s.jsxs)("div",{className:"mb-8",children:[a,(0,s.jsx)(eA,{stats:d,isLoading:m})]}),o[3]=m,o[4]=d,o[5]=r):r=o[5],o[6]===Symbol.for("react.memo_cache_sentinel")?(n=(0,s.jsxs)("div",{className:"lg:col-span-2 space-y-8",children:[(0,s.jsx)(eZ,{}),(0,s.jsx)(eX,{})]}),o[6]=n):n=o[6],o[7]===Symbol.for("react.memo_cache_sentinel")?(i=(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[n,(0,s.jsxs)("div",{className:"space-y-8",children:[(0,s.jsx)(e2,{}),(0,s.jsx)(e6,{}),(0,s.jsx)(ta,{})]})]}),o[7]=i):i=o[7],o[8]!==r?(c=(0,s.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[r,i]}),o[8]=r,o[9]=c):c=o[9],c}var tn=a(90388);let tl=r.forwardRef((e,t)=>{let a,r,n,i,c=(0,l.c)(9);return c[0]!==e?({className:a,...r}=e,c[0]=e,c[1]=a,c[2]=r):(a=c[1],r=c[2]),c[3]!==a?(n=C("rounded-lg border bg-card text-card-foreground shadow-sm",a),c[3]=a,c[4]=n):n=c[4],c[5]!==r||c[6]!==t||c[7]!==n?(i=(0,s.jsx)("div",{ref:t,className:n,...r}),c[5]=r,c[6]=t,c[7]=n,c[8]=i):i=c[8],i});tl.displayName="Card";let ti=r.forwardRef((e,t)=>{let a,r,n,i,c=(0,l.c)(9);return c[0]!==e?({className:a,...r}=e,c[0]=e,c[1]=a,c[2]=r):(a=c[1],r=c[2]),c[3]!==a?(n=C("flex flex-col space-y-1.5 p-6",a),c[3]=a,c[4]=n):n=c[4],c[5]!==r||c[6]!==t||c[7]!==n?(i=(0,s.jsx)("div",{ref:t,className:n,...r}),c[5]=r,c[6]=t,c[7]=n,c[8]=i):i=c[8],i});ti.displayName="CardHeader";let tc=r.forwardRef((e,t)=>{let a,r,n,i,c=(0,l.c)(9);return c[0]!==e?({className:a,...r}=e,c[0]=e,c[1]=a,c[2]=r):(a=c[1],r=c[2]),c[3]!==a?(n=C("text-2xl font-semibold leading-none tracking-tight",a),c[3]=a,c[4]=n):n=c[4],c[5]!==r||c[6]!==t||c[7]!==n?(i=(0,s.jsx)("div",{ref:t,className:n,...r}),c[5]=r,c[6]=t,c[7]=n,c[8]=i):i=c[8],i});tc.displayName="CardTitle";let to=r.forwardRef((e,t)=>{let a,r,n,i,c=(0,l.c)(9);return c[0]!==e?({className:a,...r}=e,c[0]=e,c[1]=a,c[2]=r):(a=c[1],r=c[2]),c[3]!==a?(n=C("text-sm text-muted-foreground",a),c[3]=a,c[4]=n):n=c[4],c[5]!==r||c[6]!==t||c[7]!==n?(i=(0,s.jsx)("div",{ref:t,className:n,...r}),c[5]=r,c[6]=t,c[7]=n,c[8]=i):i=c[8],i});to.displayName="CardDescription";let td=r.forwardRef((e,t)=>{let a,r,n,i,c=(0,l.c)(9);return c[0]!==e?({className:a,...r}=e,c[0]=e,c[1]=a,c[2]=r):(a=c[1],r=c[2]),c[3]!==a?(n=C("p-6 pt-0",a),c[3]=a,c[4]=n):n=c[4],c[5]!==r||c[6]!==t||c[7]!==n?(i=(0,s.jsx)("div",{ref:t,className:n,...r}),c[5]=r,c[6]=t,c[7]=n,c[8]=i):i=c[8],i});td.displayName="CardContent",r.forwardRef((e,t)=>{let a,r,n,i,c=(0,l.c)(9);return c[0]!==e?({className:a,...r}=e,c[0]=e,c[1]=a,c[2]=r):(a=c[1],r=c[2]),c[3]!==a?(n=C("flex items-center p-6 pt-0",a),c[3]=a,c[4]=n):n=c[4],c[5]!==r||c[6]!==t||c[7]!==n?(i=(0,s.jsx)("div",{ref:t,className:n,...r}),c[5]=r,c[6]=t,c[7]=n,c[8]=i):i=c[8],i}).displayName="CardFooter";let tm=(0,b.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function tu(e){let t,a,r,n,i,c=(0,l.c)(10);return c[0]!==e?({className:t,variant:r,...a}=e,c[0]=e,c[1]=t,c[2]=a,c[3]=r):(t=c[1],a=c[2],r=c[3]),c[4]!==t||c[5]!==r?(n=C(tm({variant:r}),t),c[4]=t,c[5]=r,c[6]=n):n=c[6],c[7]!==a||c[8]!==n?(i=(0,s.jsx)("div",{className:n,...a}),c[7]=a,c[8]=n,c[9]=i):i=c[9],i}var tx=a(30273),th=a(55980),tp=a(84319),tf=a(79080);let tg=tf.fC;tf.xz;let tj=tf.h_;tf.x8;let ty=r.forwardRef((e,t)=>{let a,r,n,i,c=(0,l.c)(9);return c[0]!==e?({className:a,...r}=e,c[0]=e,c[1]=a,c[2]=r):(a=c[1],r=c[2]),c[3]!==a?(n=C("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),c[3]=a,c[4]=n):n=c[4],c[5]!==r||c[6]!==t||c[7]!==n?(i=(0,s.jsx)(tf.aV,{ref:t,className:n,...r}),c[5]=r,c[6]=t,c[7]=n,c[8]=i):i=c[8],i});ty.displayName=tf.aV.displayName;let tv=r.forwardRef((e,t)=>{let a,r,n,i,c,o,d,m=(0,l.c)(13);return m[0]!==e?({className:r,children:a,...n}=e,m[0]=e,m[1]=a,m[2]=r,m[3]=n):(a=m[1],r=m[2],n=m[3]),m[4]===Symbol.for("react.memo_cache_sentinel")?(i=(0,s.jsx)(ty,{}),m[4]=i):i=m[4],m[5]!==r?(c=C("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 origin-center data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 sm:rounded-lg",r),m[5]=r,m[6]=c):c=m[6],m[7]===Symbol.for("react.memo_cache_sentinel")?(o=(0,s.jsxs)(tf.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,s.jsx)(w.Z,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]}),m[7]=o):o=m[7],m[8]!==a||m[9]!==n||m[10]!==t||m[11]!==c?(d=(0,s.jsxs)(tj,{children:[i,(0,s.jsxs)(tf.VY,{ref:t,className:c,...n,children:[a,o]})]}),m[8]=a,m[9]=n,m[10]=t,m[11]=c,m[12]=d):d=m[12],d});tv.displayName=tf.VY.displayName;let tN=e=>{let t,a,r,n,i=(0,l.c)(8);return i[0]!==e?({className:t,...a}=e,i[0]=e,i[1]=t,i[2]=a):(t=i[1],a=i[2]),i[3]!==t?(r=C("flex flex-col space-y-1.5 text-center sm:text-left",t),i[3]=t,i[4]=r):r=i[4],i[5]!==a||i[6]!==r?(n=(0,s.jsx)("div",{className:r,...a}),i[5]=a,i[6]=r,i[7]=n):n=i[7],n};tN.displayName="DialogHeader";let tb=r.forwardRef((e,t)=>{let a,r,n,i,c=(0,l.c)(9);return c[0]!==e?({className:a,...r}=e,c[0]=e,c[1]=a,c[2]=r):(a=c[1],r=c[2]),c[3]!==a?(n=C("text-lg font-semibold leading-none tracking-tight",a),c[3]=a,c[4]=n):n=c[4],c[5]!==r||c[6]!==t||c[7]!==n?(i=(0,s.jsx)(tf.Dx,{ref:t,className:n,...r}),c[5]=r,c[6]=t,c[7]=n,c[8]=i):i=c[8],i});tb.displayName=tf.Dx.displayName,r.forwardRef((e,t)=>{let a,r,n,i,c=(0,l.c)(9);return c[0]!==e?({className:a,...r}=e,c[0]=e,c[1]=a,c[2]=r):(a=c[1],r=c[2]),c[3]!==a?(n=C("text-sm text-muted-foreground",a),c[3]=a,c[4]=n):n=c[4],c[5]!==r||c[6]!==t||c[7]!==n?(i=(0,s.jsx)(tf.dk,{ref:t,className:n,...r}),c[5]=r,c[6]=t,c[7]=n,c[8]=i):i=c[8],i}).displayName=tf.dk.displayName;var tw=a(31761),t_=a(33170);let tS=tw.fC;tw.ZA;let tC=tw.B4,tP=r.forwardRef((e,t)=>{let a,r,n,i,c,o,d=(0,l.c)(12);return d[0]!==e?({className:r,children:a,...n}=e,d[0]=e,d[1]=a,d[2]=r,d[3]=n):(a=d[1],r=d[2],n=d[3]),d[4]!==r?(i=C("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",r),d[4]=r,d[5]=i):i=d[5],d[6]===Symbol.for("react.memo_cache_sentinel")?(c=(0,s.jsx)(tw.JO,{asChild:!0,children:(0,s.jsx)(er.Z,{className:"h-4 w-4 opacity-50"})}),d[6]=c):c=d[6],d[7]!==a||d[8]!==n||d[9]!==t||d[10]!==i?(o=(0,s.jsxs)(tw.xz,{ref:t,className:i,...n,children:[a,c]}),d[7]=a,d[8]=n,d[9]=t,d[10]=i,d[11]=o):o=d[11],o});tP.displayName=tw.xz.displayName;let tk=r.forwardRef((e,t)=>{let a,r,n,i,c,o=(0,l.c)(10);return o[0]!==e?({className:a,...r}=e,o[0]=e,o[1]=a,o[2]=r):(a=o[1],r=o[2]),o[3]!==a?(n=C("flex cursor-default items-center justify-center py-1",a),o[3]=a,o[4]=n):n=o[4],o[5]===Symbol.for("react.memo_cache_sentinel")?(i=(0,s.jsx)(t_.Z,{className:"h-4 w-4"}),o[5]=i):i=o[5],o[6]!==r||o[7]!==t||o[8]!==n?(c=(0,s.jsx)(tw.u_,{ref:t,className:n,...r,children:i}),o[6]=r,o[7]=t,o[8]=n,o[9]=c):c=o[9],c});tk.displayName=tw.u_.displayName;let tA=r.forwardRef((e,t)=>{let a,r,n,i,c,o=(0,l.c)(10);return o[0]!==e?({className:a,...r}=e,o[0]=e,o[1]=a,o[2]=r):(a=o[1],r=o[2]),o[3]!==a?(n=C("flex cursor-default items-center justify-center py-1",a),o[3]=a,o[4]=n):n=o[4],o[5]===Symbol.for("react.memo_cache_sentinel")?(i=(0,s.jsx)(er.Z,{className:"h-4 w-4"}),o[5]=i):i=o[5],o[6]!==r||o[7]!==t||o[8]!==n?(c=(0,s.jsx)(tw.$G,{ref:t,className:n,...r,children:i}),o[6]=r,o[7]=t,o[8]=n,o[9]=c):c=o[9],c});tA.displayName=tw.$G.displayName;let tD=r.forwardRef((e,t)=>{let a,r,n,i,c,o,d,m,u,x,h=(0,l.c)(21);h[0]!==e?({className:r,children:a,position:i,...n}=e,h[0]=e,h[1]=a,h[2]=r,h[3]=n,h[4]=i):(a=h[1],r=h[2],n=h[3],i=h[4]);let p=void 0===i?"popper":i,f="popper"===p&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1";h[5]!==r||h[6]!==f?(c=C("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",f,r),h[5]=r,h[6]=f,h[7]=c):c=h[7],h[8]===Symbol.for("react.memo_cache_sentinel")?(o=(0,s.jsx)(tk,{}),h[8]=o):o=h[8];let g="popper"===p&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]";return h[9]!==g?(d=C("p-1",g),h[9]=g,h[10]=d):d=h[10],h[11]!==a||h[12]!==d?(m=(0,s.jsx)(tw.l_,{className:d,children:a}),h[11]=a,h[12]=d,h[13]=m):m=h[13],h[14]===Symbol.for("react.memo_cache_sentinel")?(u=(0,s.jsx)(tA,{}),h[14]=u):u=h[14],h[15]!==p||h[16]!==n||h[17]!==t||h[18]!==c||h[19]!==m?(x=(0,s.jsx)(tw.h_,{children:(0,s.jsxs)(tw.VY,{ref:t,className:c,position:p,...n,children:[o,m,u]})}),h[15]=p,h[16]=n,h[17]=t,h[18]=c,h[19]=m,h[20]=x):x=h[20],x});tD.displayName=tw.VY.displayName,r.forwardRef((e,t)=>{let a,r,n,i,c=(0,l.c)(9);return c[0]!==e?({className:a,...r}=e,c[0]=e,c[1]=a,c[2]=r):(a=c[1],r=c[2]),c[3]!==a?(n=C("py-1.5 pl-8 pr-2 text-sm font-semibold",a),c[3]=a,c[4]=n):n=c[4],c[5]!==r||c[6]!==t||c[7]!==n?(i=(0,s.jsx)(tw.__,{ref:t,className:n,...r}),c[5]=r,c[6]=t,c[7]=n,c[8]=i):i=c[8],i}).displayName=tw.__.displayName;let tI=r.forwardRef((e,t)=>{let a,r,n,i,c,o,d,m=(0,l.c)(14);return m[0]!==e?({className:r,children:a,...n}=e,m[0]=e,m[1]=a,m[2]=r,m[3]=n):(a=m[1],r=m[2],n=m[3]),m[4]!==r?(i=C("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),m[4]=r,m[5]=i):i=m[5],m[6]===Symbol.for("react.memo_cache_sentinel")?(c=(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(tw.wU,{children:(0,s.jsx)(ed.Z,{className:"h-4 w-4"})})}),m[6]=c):c=m[6],m[7]!==a?(o=(0,s.jsx)(tw.eT,{children:a}),m[7]=a,m[8]=o):o=m[8],m[9]!==n||m[10]!==t||m[11]!==i||m[12]!==o?(d=(0,s.jsxs)(tw.ck,{ref:t,className:i,...n,children:[c,o]}),m[9]=n,m[10]=t,m[11]=i,m[12]=o,m[13]=d):d=m[13],d});tI.displayName=tw.ck.displayName,r.forwardRef((e,t)=>{let a,r,n,i,c=(0,l.c)(9);return c[0]!==e?({className:a,...r}=e,c[0]=e,c[1]=a,c[2]=r):(a=c[1],r=c[2]),c[3]!==a?(n=C("-mx-1 my-1 h-px bg-muted",a),c[3]=a,c[4]=n):n=c[4],c[5]!==r||c[6]!==t||c[7]!==n?(i=(0,s.jsx)(tw.Z0,{ref:t,className:n,...r}),c[5]=r,c[6]=t,c[7]=n,c[8]=i):i=c[8],i}).displayName=tw.Z0.displayName;let tT=r.forwardRef((e,t)=>{let a,r,n,i,c=(0,l.c)(9);return c[0]!==e?({className:a,...r}=e,c[0]=e,c[1]=a,c[2]=r):(a=c[1],r=c[2]),c[3]!==a?(n=C("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),c[3]=a,c[4]=n):n=c[4],c[5]!==r||c[6]!==t||c[7]!==n?(i=(0,s.jsx)("textarea",{className:n,ref:t,...r}),c[5]=r,c[6]=t,c[7]=n,c[8]=i):i=c[8],i});tT.displayName="Textarea";var tZ=a(95537),tO=a(4996),tM=a(49597);let tE=(0,b.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),tF=r.forwardRef((e,t)=>{let a,r,n,i,c=(0,l.c)(9);return c[0]!==e?({className:a,...r}=e,c[0]=e,c[1]=a,c[2]=r):(a=c[1],r=c[2]),c[3]!==a?(n=C(tE(),a),c[3]=a,c[4]=n):n=c[4],c[5]!==r||c[6]!==t||c[7]!==n?(i=(0,s.jsx)(tM.f,{ref:t,className:n,...r}),c[5]=r,c[6]=t,c[7]=n,c[8]=i):i=c[8],i});tF.displayName=tM.f.displayName;let t$=tZ.RV,tR=r.createContext({}),tL=e=>{let t,a,r,n,i=(0,l.c)(9);return i[0]!==e?({...t}=e,i[0]=e,i[1]=t):t=i[1],i[2]!==t.name?(a={name:t.name},i[2]=t.name,i[3]=a):a=i[3],i[4]!==t?(r=(0,s.jsx)(tZ.Qr,{...t}),i[4]=t,i[5]=r):r=i[5],i[6]!==a||i[7]!==r?(n=(0,s.jsx)(tR.Provider,{value:a,children:r}),i[6]=a,i[7]=r,i[8]=n):n=i[8],n},tU=()=>{let e,t,a=(0,l.c)(11),s=r.useContext(tR),n=r.useContext(tz),{getFieldState:i,formState:c}=(0,tZ.Gc)();a[0]!==s.name||a[1]!==c||a[2]!==i?(e=i(s.name,c),a[0]=s.name,a[1]=c,a[2]=i,a[3]=e):e=a[3];let o=e;if(!s)throw Error("useFormField should be used within <FormField>");let{id:d}=n,m=`${d}-form-item`,u=`${d}-form-item-description`,x=`${d}-form-item-message`;return a[4]!==s.name||a[5]!==o||a[6]!==d||a[7]!==m||a[8]!==u||a[9]!==x?(t={id:d,name:s.name,formItemId:m,formDescriptionId:u,formMessageId:x,...o},a[4]=s.name,a[5]=o,a[6]=d,a[7]=m,a[8]=u,a[9]=x,a[10]=t):t=a[10],t},tz=r.createContext({}),tB=r.forwardRef((e,t)=>{let a,n,i,c,o,d,m=(0,l.c)(14);m[0]!==e?({className:a,...n}=e,m[0]=e,m[1]=a,m[2]=n):(a=m[1],n=m[2]);let u=r.useId();return m[3]!==u?(i={id:u},m[3]=u,m[4]=i):i=m[4],m[5]!==a?(c=C("space-y-2",a),m[5]=a,m[6]=c):c=m[6],m[7]!==n||m[8]!==t||m[9]!==c?(o=(0,s.jsx)("div",{ref:t,className:c,...n}),m[7]=n,m[8]=t,m[9]=c,m[10]=o):o=m[10],m[11]!==i||m[12]!==o?(d=(0,s.jsx)(tz.Provider,{value:i,children:o}),m[11]=i,m[12]=o,m[13]=d):d=m[13],d});tB.displayName="FormItem";let tV=r.forwardRef((e,t)=>{let a,r,n,i,c=(0,l.c)(11);c[0]!==e?({className:a,...r}=e,c[0]=e,c[1]=a,c[2]=r):(a=c[1],r=c[2]);let{error:o,formItemId:d}=tU(),m=o&&"text-destructive";return c[3]!==a||c[4]!==m?(n=C(m,a),c[3]=a,c[4]=m,c[5]=n):n=c[5],c[6]!==d||c[7]!==r||c[8]!==t||c[9]!==n?(i=(0,s.jsx)(tF,{ref:t,className:n,htmlFor:d,...r}),c[6]=d,c[7]=r,c[8]=t,c[9]=n,c[10]=i):i=c[10],i});tV.displayName="FormLabel";let tK=r.forwardRef((e,t)=>{let a,r,n=(0,l.c)(8);n[0]!==e?({...a}=e,n[0]=e,n[1]=a):a=n[1];let{error:i,formItemId:c,formDescriptionId:o,formMessageId:d}=tU(),m=i?`${o} ${d}`:`${o}`,u=!!i;return n[2]!==c||n[3]!==a||n[4]!==t||n[5]!==m||n[6]!==u?(r=(0,s.jsx)(eg.g7,{ref:t,id:c,"aria-describedby":m,"aria-invalid":u,...a}),n[2]=c,n[3]=a,n[4]=t,n[5]=m,n[6]=u,n[7]=r):r=n[7],r});tK.displayName="FormControl",r.forwardRef((e,t)=>{let a,r,n,i,c=(0,l.c)(10);c[0]!==e?({className:a,...r}=e,c[0]=e,c[1]=a,c[2]=r):(a=c[1],r=c[2]);let{formDescriptionId:o}=tU();return c[3]!==a?(n=C("text-sm text-muted-foreground",a),c[3]=a,c[4]=n):n=c[4],c[5]!==o||c[6]!==r||c[7]!==t||c[8]!==n?(i=(0,s.jsx)("p",{ref:t,id:o,className:n,...r}),c[5]=o,c[6]=r,c[7]=t,c[8]=n,c[9]=i):i=c[9],i}).displayName="FormDescription";let tW=r.forwardRef((e,t)=>{let a,r,n,i,c,o=(0,l.c)(12);o[0]!==e?({className:r,children:a,...n}=e,o[0]=e,o[1]=a,o[2]=r,o[3]=n):(a=o[1],r=o[2],n=o[3]);let{error:d,formMessageId:m}=tU(),u=d?String((null==d?void 0:d.message)??""):a;return u?(o[4]!==r?(i=C("text-sm font-medium text-destructive",r),o[4]=r,o[5]=i):i=o[5],o[6]!==u||o[7]!==m||o[8]!==n||o[9]!==t||o[10]!==i?(c=(0,s.jsx)("p",{ref:t,id:m,className:i,...n,children:u}),o[6]=u,o[7]=m,o[8]=n,o[9]=t,o[10]=i,o[11]=c):c=o[11],c):null});function tq(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{toast:t}=v();return(0,ew.a)({queryKey:["patients",e],queryFn:async()=>{try{let{data:{session:t}}=await U.auth.getSession();if(!t)throw Error("No authenticated session found");let a=new URL("https://sqgtgwrhxoaeaxofyelf.supabase.co/functions/v1/get-patients");e.page&&a.searchParams.set("page",e.page.toString()),e.limit&&a.searchParams.set("limit",e.limit.toString()),e.search&&a.searchParams.set("search",e.search),e.status&&a.searchParams.set("status",e.status);let s=await fetch(a.toString(),{method:"GET",headers:{Authorization:`Bearer ${t.access_token}`,"Content-Type":"application/json"}});if(!s.ok)throw Error(`HTTP error! status: ${s.status}`);let r=await s.json();if(!r.success)throw Error(r.error||"Failed to fetch patients");return r}catch(e){throw console.error("Error fetching patients:",e),t({title:"Error Fetching Patients",description:e.message||"Failed to fetch patients. Please try again.",variant:"destructive"}),e}},staleTime:3e5,refetchOnWindowFocus:!0})}tW.displayName="FormMessage";var tG=a(84096);let tH=tG.Ry({id:tG.Z_(),firstName:tG.Z_(),lastName:tG.Z_(),email:tG.Z_().email(),phone:tG.Z_(),dateOfBirth:tG.hT(),gender:tG.Z_(),address:tG.Z_(),insuranceProvider:tG.Z_().optional(),insurancePolicyNumber:tG.Z_().optional(),insuranceGroupNumber:tG.Z_().optional(),emergencyContactName:tG.Z_().optional(),emergencyContactPhone:tG.Z_().optional(),medicalHistory:tG.Z_().optional(),allergies:tG.IX(tG.Z_()).default([]),currentMedications:tG.IX(tG.Z_()).default([]),memberSince:tG.hT(),isActive:tG.O7().default(!0),createdAt:tG.hT(),updatedAt:tG.hT()}),tJ=tG.Ry({id:tG.Z_(),patientId:tG.Z_(),doctorName:tG.Z_(),appointmentDate:tG.hT(),appointmentTime:tG.Z_(),procedure:tG.Z_(),status:tG.Km(["scheduled","confirmed","in-progress","completed","cancelled","urgent"]).default("scheduled"),notes:tG.Z_().optional(),createdAt:tG.hT(),updatedAt:tG.hT()}),tY=tG.Ry({id:tG.Z_(),patientId:tG.Z_(),appointmentId:tG.Z_().optional(),procedureName:tG.Z_(),description:tG.Z_().optional(),doctorName:tG.Z_(),performedDate:tG.hT(),duration:tG.Rx().optional(),cost:tG.Rx().optional(),status:tG.Km(["planned","in-progress","completed","cancelled"]).default("planned"),notes:tG.Z_().optional(),createdAt:tG.hT(),updatedAt:tG.hT()}),tQ=tG.Ry({id:tG.Z_(),patientId:tG.Z_(),imageUrl:tG.Z_().url(),diagnosis:tG.Z_(),confidence:tG.Rx().min(0).max(100),severity:tG.Km(["normal","mild","moderate","severe"]),recommendations:tG.IX(tG.Z_()).default([]),analyzedBy:tG.Z_().default("AI Model v2.1"),reviewedByDoctor:tG.O7().default(!1),doctorNotes:tG.Z_().optional(),createdAt:tG.hT()}),tX=tG.Ry({id:tG.Z_(),patientId:tG.Z_(),appointmentId:tG.Z_().optional(),procedureId:tG.Z_().optional(),amount:tG.Rx(),paymentMethod:tG.Km(["cash","card","insurance","check"]),paymentStatus:tG.Km(["pending","paid","partial","overdue"]).default("pending"),insuranceClaim:tG.O7().default(!1),insuranceAmount:tG.Rx().optional(),patientAmount:tG.Rx().optional(),paymentDate:tG.hT().optional(),dueDate:tG.hT().optional(),invoiceNumber:tG.Z_().optional(),createdAt:tG.hT(),updatedAt:tG.hT()}),t0=tG.Ry({id:tG.Z_(),title:tG.Z_(),description:tG.Z_().optional(),patientId:tG.Z_().optional(),priority:tG.Km(["low","medium","high","urgent"]).default("medium"),status:tG.Km(["pending","in-progress","completed"]).default("pending"),dueDate:tG.hT().optional(),assignedTo:tG.Z_(),createdAt:tG.hT(),updatedAt:tG.hT()}),t1=tH.omit({id:!0,memberSince:!0,createdAt:!0,updatedAt:!0}).extend({dateOfBirth:tG.Z_().or(tG.hT())});tJ.omit({id:!0,createdAt:!0,updatedAt:!0}).extend({appointmentDate:tG.Z_().or(tG.hT())});let t2=tY.omit({id:!0,createdAt:!0,updatedAt:!0}).extend({performedDate:tG.Z_().or(tG.hT())});tQ.omit({id:!0,createdAt:!0});let t4=tX.omit({id:!0,createdAt:!0,updatedAt:!0}).extend({paymentDate:tG.Z_().or(tG.hT()).optional(),dueDate:tG.Z_().or(tG.hT()).optional()});t0.omit({id:!0,createdAt:!0,updatedAt:!0}).extend({dueDate:tG.Z_().or(tG.hT()).optional()});let t5=e=>{let t={...e};return Object.keys(t).forEach(e=>{(e.includes("Date")||e.includes("At")||"memberSince"===e)&&"string"==typeof t[e]&&(t[e]=new Date(t[e]))}),t};function t3(e){let t,a,r,n,i,c,o,d,m,x,h,p,f,g,j,y,N,b,w,_,S,C,P,k=(0,l.c)(55),{isOpen:A,onClose:D}=e,I=function(){let e=(0,u.NL)(),{toast:t}=v();return(0,eO.D)({mutationFn:async e=>{let{data:{session:t}}=await U.auth.getSession();if(!t)throw Error("No authenticated session found");let{data:a,error:s}=await U.functions.invoke("add-patient",{body:e,headers:{Authorization:`Bearer ${t.access_token}`}});if(s)throw s;return a},onSuccess:a=>(e.invalidateQueries({queryKey:["patients"]}),t({title:"Patient Added Successfully",description:"New patient has been registered in the system."}),a),onError:e=>{console.error("Error adding patient:",e),t({title:"Error Adding Patient",description:e.message||"Failed to add new patient. Please try again.",variant:"destructive"})}})}();k[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,tO.F)(t1),k[0]=t):t=k[0],k[1]===Symbol.for("react.memo_cache_sentinel")?(a={resolver:t,defaultValues:{firstName:"",lastName:"",email:"",phone:"",dateOfBirth:new Date,gender:"",address:"",emergencyContactName:void 0,emergencyContactPhone:void 0,insuranceProvider:void 0,medicalHistory:void 0}},k[1]=a):a=k[1];let T=(0,tZ.cI)(a);k[2]!==I||k[3]!==T||k[4]!==D?(r=e=>{let t={...e,emergencyContactName:e.emergencyContactName?e.emergencyContactName:void 0,emergencyContactPhone:e.emergencyContactPhone?e.emergencyContactPhone:void 0,insuranceProvider:e.insuranceProvider?e.insuranceProvider:void 0,medicalHistory:"string"==typeof e.medicalHistory&&e.medicalHistory.trim().length>0?e.medicalHistory:void 0};I.mutate(t,{onSuccess:()=>{T.reset(),D()}})},k[2]=I,k[3]=T,k[4]=D,k[5]=r):r=k[5];let Z=r;k[6]!==T||k[7]!==D?(n=()=>{T.reset(),D()},k[6]=T,k[7]=D,k[8]=n):n=k[8];let O=n;k[9]!==O?(i=e=>{e||O()},k[9]=O,k[10]=i):i=k[10],k[11]===Symbol.for("react.memo_cache_sentinel")?(c=(0,s.jsx)(tN,{children:(0,s.jsxs)(tb,{className:"flex items-center space-x-2 text-xl font-semibold text-professional-dark",children:[(0,s.jsx)(en.Z,{className:"h-5 w-5 text-medical-blue"}),(0,s.jsx)("span",{children:"Add New Patient"})]})}),k[11]=c):c=k[11],k[12]!==T||k[13]!==Z?(o=T.handleSubmit(Z),k[12]=T,k[13]=Z,k[14]=o):o=k[14],k[15]===Symbol.for("react.memo_cache_sentinel")?(d=(0,s.jsx)(ti,{children:(0,s.jsx)(tc,{className:"text-lg text-medical-blue",children:"Personal Information"})}),k[15]=d):d=k[15],k[16]!==T.control?(m=(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsx)(tL,{control:T.control,name:"firstName",render:al}),(0,s.jsx)(tL,{control:T.control,name:"lastName",render:an})]}),k[16]=T.control,k[17]=m):m=k[17],k[18]!==T.control?(x=(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsx)(tL,{control:T.control,name:"email",render:ar}),(0,s.jsx)(tL,{control:T.control,name:"phone",render:as})]}),k[18]=T.control,k[19]=x):x=k[19],k[20]!==T.control?(h=(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsx)(tL,{control:T.control,name:"dateOfBirth",render:aa}),(0,s.jsx)(tL,{control:T.control,name:"gender",render:at})]}),p=(0,s.jsx)(tL,{control:T.control,name:"address",render:ae}),k[20]=T.control,k[21]=h,k[22]=p):(h=k[21],p=k[22]),k[23]!==x||k[24]!==h||k[25]!==p||k[26]!==m?(f=(0,s.jsxs)(tl,{children:[d,(0,s.jsxs)(td,{className:"space-y-4",children:[m,x,h,p]})]}),k[23]=x,k[24]=h,k[25]=p,k[26]=m,k[27]=f):f=k[27],k[28]===Symbol.for("react.memo_cache_sentinel")?(g=(0,s.jsx)(ti,{children:(0,s.jsx)(tc,{className:"text-lg text-healthcare-green",children:"Emergency Contact"})}),k[28]=g):g=k[28],k[29]!==T.control?(j=(0,s.jsxs)(tl,{children:[g,(0,s.jsx)(td,{className:"space-y-4",children:(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsx)(tL,{control:T.control,name:"emergencyContactName",render:t9}),(0,s.jsx)(tL,{control:T.control,name:"emergencyContactPhone",render:t7})]})})]}),k[29]=T.control,k[30]=j):j=k[30],k[31]===Symbol.for("react.memo_cache_sentinel")?(y=(0,s.jsx)(ti,{children:(0,s.jsx)(tc,{className:"text-lg text-diagnostic-purple",children:"Medical Information"})}),k[31]=y):y=k[31],k[32]!==T.control?(N=(0,s.jsxs)(tl,{children:[y,(0,s.jsxs)(td,{className:"space-y-4",children:[(0,s.jsx)(tL,{control:T.control,name:"insuranceProvider",render:t8}),(0,s.jsx)(tL,{control:T.control,name:"medicalHistory",render:t6})]})]}),k[32]=T.control,k[33]=N):N=k[33],k[34]!==O?(b=(0,s.jsx)(ey,{type:"button",variant:"outline",onClick:O,children:"Cancel"}),k[34]=O,k[35]=b):b=k[35];let M=I.isPending?"Adding Patient...":"Add Patient";return k[36]!==I.isPending||k[37]!==M?(w=(0,s.jsx)(ey,{type:"submit",className:"medical-button-primary",disabled:I.isPending,children:M}),k[36]=I.isPending,k[37]=M,k[38]=w):w=k[38],k[39]!==b||k[40]!==w?(_=(0,s.jsxs)("div",{className:"flex justify-end space-x-3 pt-4 border-t",children:[b,w]}),k[39]=b,k[40]=w,k[41]=_):_=k[41],k[42]!==f||k[43]!==j||k[44]!==N||k[45]!==_||k[46]!==o?(S=(0,s.jsxs)("form",{onSubmit:o,className:"space-y-6",children:[f,j,N,_]}),k[42]=f,k[43]=j,k[44]=N,k[45]=_,k[46]=o,k[47]=S):S=k[47],k[48]!==T||k[49]!==S?(C=(0,s.jsxs)(tv,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[c,(0,s.jsx)(t$,{...T,children:S})]}),k[48]=T,k[49]=S,k[50]=C):C=k[50],k[51]!==A||k[52]!==C||k[53]!==i?(P=(0,s.jsx)(tg,{open:A,onOpenChange:i,children:C}),k[51]=A,k[52]=C,k[53]=i,k[54]=P):P=k[54],P}function t6(e){let{field:t}=e;return(0,s.jsxs)(tB,{children:[(0,s.jsx)(tV,{children:"Medical History"}),(0,s.jsx)(tK,{children:(0,s.jsx)(tT,{placeholder:"Previous medical conditions, allergies, medications, surgical history... (one per line)",className:"min-h-[120px]",value:Array.isArray(t.value)?t.value.join("\n"):"string"==typeof t.value?t.value:"",onChange:e=>t.onChange(e.target.value)})}),(0,s.jsx)(tW,{})]})}function t8(e){let{field:t}=e;return(0,s.jsxs)(tB,{children:[(0,s.jsx)(tV,{children:"Insurance Information"}),(0,s.jsx)(tK,{children:(0,s.jsx)(e1,{placeholder:"Insurance provider and policy details",value:t.value||"",onChange:e=>t.onChange(e.target.value||void 0)})}),(0,s.jsx)(tW,{})]})}function t7(e){let{field:t}=e;return(0,s.jsxs)(tB,{children:[(0,s.jsx)(tV,{children:"Emergency Contact Phone"}),(0,s.jsx)(tK,{children:(0,s.jsx)(e1,{placeholder:"(555) 987-6543",value:t.value||"",onChange:e=>t.onChange(e.target.value||void 0)})}),(0,s.jsx)(tW,{})]})}function t9(e){let{field:t}=e;return(0,s.jsxs)(tB,{children:[(0,s.jsx)(tV,{children:"Emergency Contact Name"}),(0,s.jsx)(tK,{children:(0,s.jsx)(e1,{placeholder:"Contact person name",value:t.value||"",onChange:e=>t.onChange(e.target.value||void 0)})}),(0,s.jsx)(tW,{})]})}function ae(e){let{field:t}=e;return(0,s.jsxs)(tB,{children:[(0,s.jsxs)(tV,{className:"flex items-center space-x-1",children:[(0,s.jsx)(tx.Z,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:"Address"})]}),(0,s.jsx)(tK,{children:(0,s.jsx)(tT,{placeholder:"Enter full address",className:"min-h-[80px]",...t})}),(0,s.jsx)(tW,{})]})}function at(e){let{field:t}=e;return(0,s.jsxs)(tB,{children:[(0,s.jsx)(tV,{children:"Gender *"}),(0,s.jsxs)(tS,{onValueChange:t.onChange,defaultValue:t.value,children:[(0,s.jsx)(tK,{children:(0,s.jsx)(tP,{children:(0,s.jsx)(tC,{placeholder:"Select gender"})})}),(0,s.jsxs)(tD,{children:[(0,s.jsx)(tI,{value:"male",children:"Male"}),(0,s.jsx)(tI,{value:"female",children:"Female"}),(0,s.jsx)(tI,{value:"other",children:"Other"}),(0,s.jsx)(tI,{value:"prefer-not-to-say",children:"Prefer not to say"})]})]}),(0,s.jsx)(tW,{})]})}function aa(e){let{field:t}=e;return(0,s.jsxs)(tB,{children:[(0,s.jsxs)(tV,{className:"flex items-center space-x-1",children:[(0,s.jsx)(e_.Z,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:"Date of Birth *"})]}),(0,s.jsx)(tK,{children:(0,s.jsx)(e1,{type:"date",value:t.value instanceof Date?t.value.toISOString().split("T")[0]:t.value,onChange:e=>t.onChange(new Date(e.target.value))})}),(0,s.jsx)(tW,{})]})}function as(e){let{field:t}=e;return(0,s.jsxs)(tB,{children:[(0,s.jsxs)(tV,{className:"flex items-center space-x-1",children:[(0,s.jsx)(th.Z,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:"Phone Number *"})]}),(0,s.jsx)(tK,{children:(0,s.jsx)(e1,{placeholder:"(555) 123-4567",...t})}),(0,s.jsx)(tW,{})]})}function ar(e){let{field:t}=e;return(0,s.jsxs)(tB,{children:[(0,s.jsxs)(tV,{className:"flex items-center space-x-1",children:[(0,s.jsx)(tp.Z,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:"Email Address *"})]}),(0,s.jsx)(tK,{children:(0,s.jsx)(e1,{type:"email",placeholder:"patient@example.com",...t})}),(0,s.jsx)(tW,{})]})}function an(e){let{field:t}=e;return(0,s.jsxs)(tB,{children:[(0,s.jsx)(tV,{children:"Last Name *"}),(0,s.jsx)(tK,{children:(0,s.jsx)(e1,{placeholder:"Enter last name",...t})}),(0,s.jsx)(tW,{})]})}function al(e){let{field:t}=e;return(0,s.jsxs)(tB,{children:[(0,s.jsx)(tV,{children:"First Name *"}),(0,s.jsx)(tK,{children:(0,s.jsx)(e1,{placeholder:"Enter first name",...t})}),(0,s.jsx)(tW,{})]})}var ai=a(87197);let ac=r.forwardRef((e,t)=>{let a,r,n,i,c,o=(0,l.c)(10);return o[0]!==e?({className:a,...r}=e,o[0]=e,o[1]=a,o[2]=r):(a=o[1],r=o[2]),o[3]!==a?(n=C("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",a),o[3]=a,o[4]=n):n=o[4],o[5]===Symbol.for("react.memo_cache_sentinel")?(i=(0,s.jsx)(ai.bU,{className:C("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")}),o[5]=i):i=o[5],o[6]!==r||o[7]!==t||o[8]!==n?(c=(0,s.jsx)(ai.fC,{className:n,...r,ref:t,children:i}),o[6]=r,o[7]=t,o[8]=n,o[9]=c):c=o[9],c});function ao(e){let t,a,r,n,i,c,o,d,m,u,x,h,p,f,g,j,y,v,N,b,w,_,S,C,P,k,A,D,I,T,Z=(0,l.c)(73),{patient:O,editedPatient:M,setEditedPatient:E,getInitials:F,getAge:$,toSafeDate:R}=e,L=M.firstName||"",U=M.lastName||"";Z[0]!==F||Z[1]!==L||Z[2]!==U?(t=F(L,U),Z[0]=F,Z[1]=L,Z[2]=U,Z[3]=t):t=Z[3],Z[4]!==t?(a=(0,s.jsx)("div",{className:"w-16 h-16 bg-medical-blue/10 rounded-full flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-lg font-medium text-medical-blue",children:t})}),Z[4]=t,Z[5]=a):a=Z[5];let z=M.firstName??"";Z[6]!==E?(r=e=>E(t=>({...t,firstName:e.target.value})),Z[6]=E,Z[7]=r):r=Z[7],Z[8]!==z||Z[9]!==r?(n=(0,s.jsx)(e1,{value:z,onChange:r,className:"w-full",placeholder:"First name"}),Z[8]=z,Z[9]=r,Z[10]=n):n=Z[10];let B=M.lastName??"";Z[11]!==E?(i=e=>E(t=>({...t,lastName:e.target.value})),Z[11]=E,Z[12]=i):i=Z[12],Z[13]!==B||Z[14]!==i?(c=(0,s.jsx)(e1,{value:B,onChange:i,className:"w-full",placeholder:"Last name"}),Z[13]=B,Z[14]=i,Z[15]=c):c=Z[15],Z[16]!==c||Z[17]!==n?(o=(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[n,c]}),Z[16]=c,Z[17]=n,Z[18]=o):o=Z[18],Z[19]===Symbol.for("react.memo_cache_sentinel")?(d=(0,s.jsx)("div",{className:"w-40 inline-block align-middle mr-3"}),Z[19]=d):d=Z[19];let V=M.dateOfBirth??O.dateOfBirth;Z[20]!==$||Z[21]!==V?(m=$(V),Z[20]=$,Z[21]=V,Z[22]=m):m=Z[22],Z[23]!==m?(u=(0,s.jsxs)("p",{className:"text-gray-600 mt-2",children:[d,m," years old"]}),Z[23]=m,Z[24]=u):u=Z[24],Z[25]===Symbol.for("react.memo_cache_sentinel")?(x=(0,s.jsx)(tp.Z,{className:"h-4 w-4"}),Z[25]=x):x=Z[25];let K=M.email??"";Z[26]!==E?(h=e=>E(t=>({...t,email:e.target.value})),Z[26]=E,Z[27]=h):h=Z[27],Z[28]!==K||Z[29]!==h?(p=(0,s.jsxs)("div",{className:"flex items-center space-x-1",children:[x,(0,s.jsx)(e1,{value:K,onChange:h,className:"w-56",placeholder:"Email"})]}),Z[28]=K,Z[29]=h,Z[30]=p):p=Z[30],Z[31]===Symbol.for("react.memo_cache_sentinel")?(f=(0,s.jsx)(th.Z,{className:"h-4 w-4"}),Z[31]=f):f=Z[31];let W=M.phone??"";Z[32]!==E?(g=e=>E(t=>({...t,phone:e.target.value})),Z[32]=E,Z[33]=g):g=Z[33],Z[34]!==W||Z[35]!==g?(j=(0,s.jsxs)("div",{className:"flex items-center space-x-1",children:[f,(0,s.jsx)(e1,{value:W,onChange:g,className:"w-40",placeholder:"Phone"})]}),Z[34]=W,Z[35]=g,Z[36]=j):j=Z[36],Z[37]!==p||Z[38]!==j?(y=(0,s.jsxs)("div",{className:"flex items-center space-x-4 mt-2 text-sm text-gray-600",children:[p,j]}),Z[37]=p,Z[38]=j,Z[39]=y):y=Z[39],Z[40]===Symbol.for("react.memo_cache_sentinel")?(v=(0,s.jsx)(tx.Z,{className:"h-4 w-4"}),Z[40]=v):v=Z[40];let q=M.address??"";Z[41]!==E?(N=e=>E(t=>({...t,address:e.target.value})),Z[41]=E,Z[42]=N):N=Z[42],Z[43]!==q||Z[44]!==N?(b=(0,s.jsxs)("div",{className:"flex items-center space-x-1 mt-1 text-sm text-gray-600",children:[v,(0,s.jsx)(e1,{value:q,onChange:N,className:"w-full",placeholder:"Address"})]}),Z[43]=q,Z[44]=N,Z[45]=b):b=Z[45];let G=M.isActive??O.isActive?"medical-badge-normal":"bg-gray-100 text-gray-800",H=M.isActive??O.isActive?"Active Patient":"Inactive";Z[46]!==G||Z[47]!==H?(w=(0,s.jsx)(tu,{className:G,children:H}),Z[46]=G,Z[47]=H,Z[48]=w):w=Z[48],Z[49]===Symbol.for("react.memo_cache_sentinel")?(_=(0,s.jsx)(tF,{className:"text-xs text-gray-500",children:"Active"}),Z[49]=_):_=Z[49];let J=!!(M.isActive??O.isActive);Z[50]!==E?(S=e=>E(t=>({...t,isActive:!!e})),Z[50]=E,Z[51]=S):S=Z[51],Z[52]!==J||Z[53]!==S?(C=(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[_,(0,s.jsx)(ac,{checked:J,onCheckedChange:S})]}),Z[52]=J,Z[53]=S,Z[54]=C):C=Z[54];let Y=M.memberSince??O.memberSince;if(Z[55]!==Y||Z[56]!==R){let e=R(Y);k=e?e.getFullYear():"N/A",Z[55]=Y,Z[56]=R,Z[57]=k}else k=Z[57];return P=k,Z[58]!==P?(A=(0,s.jsxs)("span",{className:"text-xs text-gray-500",children:["Member since ",P]}),Z[58]=P,Z[59]=A):A=Z[59],Z[60]!==w||Z[61]!==C||Z[62]!==A?(D=(0,s.jsxs)("div",{className:"flex items-center space-x-4 mt-2",children:[w,C,A]}),Z[60]=w,Z[61]=C,Z[62]=A,Z[63]=D):D=Z[63],Z[64]!==o||Z[65]!==u||Z[66]!==y||Z[67]!==b||Z[68]!==D?(I=(0,s.jsxs)("div",{className:"flex-1",children:[o,u,y,b,D]}),Z[64]=o,Z[65]=u,Z[66]=y,Z[67]=b,Z[68]=D,Z[69]=I):I=Z[69],Z[70]!==a||Z[71]!==I?(T=(0,s.jsx)("div",{className:"md:col-span-2",children:(0,s.jsxs)("div",{className:"flex items-start space-x-4",children:[a,I]})}),Z[70]=a,Z[71]=I,Z[72]=T):T=Z[72],T}function ad(e){let t,a,r,n,i,c,o,d,m,u,x,h=(0,l.c)(23),{editedPatient:p,setEditedPatient:f}=e;h[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,s.jsx)(ti,{className:"pb-3",children:(0,s.jsx)(tc,{className:"text-base",children:"Insurance Info"})}),h[0]=t):t=h[0],h[1]===Symbol.for("react.memo_cache_sentinel")?(a=(0,s.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Provider"}),h[1]=a):a=h[1];let g=p.insuranceProvider??"";h[2]!==f?(r=e=>f(t=>({...t,insuranceProvider:e.target.value})),h[2]=f,h[3]=r):r=h[3],h[4]!==g||h[5]!==r?(n=(0,s.jsxs)("div",{children:[a,(0,s.jsx)(e1,{value:g,onChange:r,className:"w-full p-1 rounded border text-sm",placeholder:"Insurance provider"})]}),h[4]=g,h[5]=r,h[6]=n):n=h[6],h[7]===Symbol.for("react.memo_cache_sentinel")?(i=(0,s.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Policy Number"}),h[7]=i):i=h[7];let j=p.insurancePolicyNumber??"";h[8]!==f?(c=e=>f(t=>({...t,insurancePolicyNumber:e.target.value})),h[8]=f,h[9]=c):c=h[9],h[10]!==j||h[11]!==c?(o=(0,s.jsxs)("div",{children:[i,(0,s.jsx)(e1,{value:j,onChange:c,className:"w-full p-1 rounded border text-sm",placeholder:"Policy number"})]}),h[10]=j,h[11]=c,h[12]=o):o=h[12],h[13]===Symbol.for("react.memo_cache_sentinel")?(d=(0,s.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Group Number"}),h[13]=d):d=h[13];let y=p.insuranceGroupNumber??"";return h[14]!==f?(m=e=>f(t=>({...t,insuranceGroupNumber:e.target.value})),h[14]=f,h[15]=m):m=h[15],h[16]!==y||h[17]!==m?(u=(0,s.jsxs)("div",{children:[d,(0,s.jsx)(e1,{value:y,onChange:m,className:"w-full p-1 rounded border text-sm",placeholder:"Group number"})]}),h[16]=y,h[17]=m,h[18]=u):u=h[18],h[19]!==u||h[20]!==n||h[21]!==o?(x=(0,s.jsx)("div",{children:(0,s.jsxs)(tl,{children:[t,(0,s.jsxs)(td,{className:"space-y-2",children:[n,o,u]})]})}),h[19]=u,h[20]=n,h[21]=o,h[22]=x):x=h[22],x}ac.displayName=ai.fC.displayName;var am=a(9705);let au=am.fC,ax=r.forwardRef((e,t)=>{let a,r,n,i,c=(0,l.c)(9);return c[0]!==e?({className:a,...r}=e,c[0]=e,c[1]=a,c[2]=r):(a=c[1],r=c[2]),c[3]!==a?(n=C("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",a),c[3]=a,c[4]=n):n=c[4],c[5]!==r||c[6]!==t||c[7]!==n?(i=(0,s.jsx)(am.aV,{ref:t,className:n,...r}),c[5]=r,c[6]=t,c[7]=n,c[8]=i):i=c[8],i});ax.displayName=am.aV.displayName;let ah=r.forwardRef((e,t)=>{let a,r,n,i,c=(0,l.c)(9);return c[0]!==e?({className:a,...r}=e,c[0]=e,c[1]=a,c[2]=r):(a=c[1],r=c[2]),c[3]!==a?(n=C("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",a),c[3]=a,c[4]=n):n=c[4],c[5]!==r||c[6]!==t||c[7]!==n?(i=(0,s.jsx)(am.xz,{ref:t,className:n,...r}),c[5]=r,c[6]=t,c[7]=n,c[8]=i):i=c[8],i});ah.displayName=am.xz.displayName;let ap=r.forwardRef((e,t)=>{let a,r,n,i,c=(0,l.c)(9);return c[0]!==e?({className:a,...r}=e,c[0]=e,c[1]=a,c[2]=r):(a=c[1],r=c[2]),c[3]!==a?(n=C("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),c[3]=a,c[4]=n):n=c[4],c[5]!==r||c[6]!==t||c[7]!==n?(i=(0,s.jsx)(am.VY,{ref:t,className:n,...r}),c[5]=r,c[6]=t,c[7]=n,c[8]=i):i=c[8],i});ap.displayName=am.VY.displayName;var af=a(68643);function ag(e){let t,a,r,n,i,c,o,d,m,u,x,h,p=(0,l.c)(29),{activeTab:f,setActiveTab:g,appointments:j,procedures:y,payments:v,getStatusColor:N,toSafeDate:b}=e;return p[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,s.jsxs)(ax,{className:"grid w-full grid-cols-4",children:[(0,s.jsx)(ah,{value:"medical-history",children:"Medical History"}),(0,s.jsx)(ah,{value:"appointments",children:"Appointments"}),(0,s.jsx)(ah,{value:"procedures",children:"Procedures"}),(0,s.jsx)(ah,{value:"billing",children:"Billing"})]}),p[0]=t):t=p[0],p[1]===Symbol.for("react.memo_cache_sentinel")?(a=(0,s.jsx)(ap,{value:"medical-history",className:"mt-6",children:(0,s.jsx)("div",{className:"text-sm text-gray-600",children:"Use the parent to render medical history card"})}),p[1]=a):a=p[1],p[2]===Symbol.for("react.memo_cache_sentinel")?(r=(0,s.jsx)(ti,{children:(0,s.jsx)(tc,{className:"text-base",children:"Appointment History"})}),p[2]=r):r=p[2],p[3]!==j||p[4]!==N||p[5]!==b?(n=j&&j.length>0?j.map(e=>(0,s.jsx)("div",{className:"p-4 bg-gray-50 rounded-lg",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium text-professional-dark",children:e.procedure}),(0,s.jsxs)("p",{className:"text-sm text-gray-600",children:["Dr. ",e.doctorName]}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:(()=>{let t=b(e.appointmentDate);return`${t?(0,eT.WU)(t,"MMM dd, yyyy"):"Unknown date"}${e.appointmentTime?` at ${e.appointmentTime}`:""}`})()}),e.notes&&(0,s.jsx)("p",{className:"text-sm text-gray-600 mt-2",children:e.notes})]}),(0,s.jsx)(tu,{className:N(e.status),children:e.status.charAt(0).toUpperCase()+e.status.slice(1)})]})},e.id)):(0,s.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,s.jsx)(e_.Z,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),(0,s.jsx)("p",{children:"No appointments recorded"})]}),p[3]=j,p[4]=N,p[5]=b,p[6]=n):n=p[6],p[7]!==n?(i=(0,s.jsx)(ap,{value:"appointments",className:"mt-6",children:(0,s.jsxs)(tl,{children:[r,(0,s.jsx)(td,{children:(0,s.jsx)("div",{className:"space-y-3",children:n})})]})}),p[7]=n,p[8]=i):i=p[8],p[9]===Symbol.for("react.memo_cache_sentinel")?(c=(0,s.jsx)(ti,{children:(0,s.jsx)(tc,{className:"text-base",children:"Procedure History"})}),p[9]=c):c=p[9],p[10]!==N||p[11]!==y||p[12]!==b?(o=y&&y.length>0?y.map(e=>(0,s.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsx)("h4",{className:"font-medium text-professional-dark",children:e.procedureName}),(0,s.jsx)(tu,{className:N(e.status),children:e.status.charAt(0).toUpperCase()+e.status.slice(1)})]}),(0,s.jsxs)("p",{className:"text-sm text-gray-600",children:["Dr. ",e.doctorName]}),(0,s.jsxs)("p",{className:"text-sm text-gray-500",children:[(()=>{let t=b(e.performedDate);return t?(0,eT.WU)(t,"MMM dd, yyyy"):"Unknown date"})(),e.duration&&` \u{2022} ${e.duration} minutes`,e.cost&&` \u{2022} $${e.cost}`]}),e.description&&(0,s.jsx)("p",{className:"text-sm text-gray-600 mt-2",children:e.description}),e.notes&&(0,s.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:["Notes: ",e.notes]})]},e.id)):(0,s.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,s.jsx)(af.Z,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),(0,s.jsx)("p",{children:"No procedures recorded"})]}),p[10]=N,p[11]=y,p[12]=b,p[13]=o):o=p[13],p[14]!==o?(d=(0,s.jsx)(ap,{value:"procedures",className:"mt-6",children:(0,s.jsxs)(tl,{children:[c,(0,s.jsx)(td,{children:(0,s.jsx)("div",{className:"space-y-3",children:o})})]})}),p[14]=o,p[15]=d):d=p[15],p[16]===Symbol.for("react.memo_cache_sentinel")?(m=(0,s.jsx)(ti,{children:(0,s.jsx)(tc,{className:"text-base",children:"Billing History"})}),p[16]=m):m=p[16],p[17]!==N||p[18]!==v||p[19]!==b?(u=v&&v.length>0?v.map(e=>(0,s.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("p",{className:"font-medium text-professional-dark",children:["Invoice: ",e.invoiceNumber||"N/A"]}),(0,s.jsxs)("p",{className:"text-sm text-gray-600",children:["Amount: $",Number(e.amount).toFixed(2)]}),(0,s.jsxs)("p",{className:"text-sm text-gray-500",children:["Method: ",e.paymentMethod,e.paymentDate&&(()=>{let t=b(e.paymentDate);return t?` \u{2022} Paid: ${(0,eT.WU)(t,"MMM dd, yyyy")}`:""})(),e.dueDate&&(()=>{let t=b(e.dueDate);return t?` \u{2022} Due: ${(0,eT.WU)(t,"MMM dd, yyyy")}`:""})()]})]}),(0,s.jsx)(tu,{className:N(e.paymentStatus),children:e.paymentStatus.charAt(0).toUpperCase()+e.paymentStatus.slice(1)})]}),e.insuranceClaim&&(0,s.jsxs)("div",{className:"mt-2 pt-2 border-t border-gray-200 text-sm",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{children:"Insurance Amount:"}),(0,s.jsxs)("span",{children:["$",e.insuranceAmount||"0.00"]})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{children:"Patient Amount:"}),(0,s.jsxs)("span",{children:["$",e.patientAmount||"0.00"]})]})]})]},e.id)):(0,s.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,s.jsx)(eP.Z,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),(0,s.jsx)("p",{children:"No billing records found"})]}),p[17]=N,p[18]=v,p[19]=b,p[20]=u):u=p[20],p[21]!==u?(x=(0,s.jsx)(ap,{value:"billing",className:"mt-6",children:(0,s.jsxs)(tl,{children:[m,(0,s.jsx)(td,{children:(0,s.jsx)("div",{className:"space-y-3",children:u})})]})}),p[21]=u,p[22]=x):x=p[22],p[23]!==f||p[24]!==g||p[25]!==x||p[26]!==i||p[27]!==d?(h=(0,s.jsxs)(au,{value:f,onValueChange:g,children:[t,a,i,d,x]}),p[23]=f,p[24]=g,p[25]=x,p[26]=i,p[27]=d,p[28]=h):h=p[28],h}function aj(e){let t,a,r,n,i,c,o,d=(0,l.c)(15),{patient:m,editedPatient:u,setEditedPatient:x}=e;if(!(m.emergencyContactName||m.emergencyContactPhone))return null;d[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,s.jsx)(ti,{children:(0,s.jsx)(tc,{className:"text-base",children:"Emergency Contact"})}),d[0]=t):t=d[0],d[1]===Symbol.for("react.memo_cache_sentinel")?(a=(0,s.jsx)(en.Z,{className:"h-5 w-5 text-gray-400"}),d[1]=a):a=d[1];let h=u.emergencyContactName??"";d[2]!==x?(r=e=>x(t=>({...t,emergencyContactName:e.target.value})),d[2]=x,d[3]=r):r=d[3],d[4]!==h||d[5]!==r?(n=(0,s.jsx)(e1,{value:h,onChange:r,className:"w-full p-1 rounded border text-sm mb-1",placeholder:"Contact name"}),d[4]=h,d[5]=r,d[6]=n):n=d[6];let p=u.emergencyContactPhone??"";return d[7]!==x?(i=e=>x(t=>({...t,emergencyContactPhone:e.target.value})),d[7]=x,d[8]=i):i=d[8],d[9]!==p||d[10]!==i?(c=(0,s.jsx)(e1,{value:p,onChange:i,className:"w-full p-1 rounded border text-sm",placeholder:"Contact phone"}),d[9]=p,d[10]=i,d[11]=c):c=d[11],d[12]!==n||d[13]!==c?(o=(0,s.jsxs)(tl,{children:[t,(0,s.jsx)(td,{children:(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[a,(0,s.jsxs)("div",{className:"w-full",children:[n,c]})]})})]}),d[12]=n,d[13]=c,d[14]=o):o=d[14],o}function ay(e){let t,a,n,i,c,o,d,m,x,h,p,f,g,j,y,N,b,_,S,C,P,k,A,D,I,T,Z,O,M,E,F,$,R,L,z,B,V,K,W,q,G,H,J,Y,Q,X,ee,et=(0,l.c)(104),{patient:ea,isOpen:es,onClose:er}=e,[en,el]=(0,r.useState)("medical-history");et[0]===Symbol.for("react.memo_cache_sentinel")?(t=[],et[0]=t):t=et[0];let ei=t,ec=null==ea?void 0:ea.id;et[1]!==ec?(a=["/api/procedures",{patientId:ec}],et[1]=ec,et[2]=a):a=et[2];let eo=!!(null==ea?void 0:ea.id);et[3]!==a||et[4]!==eo?(n={queryKey:a,enabled:eo},et[3]=a,et[4]=eo,et[5]=n):n=et[5];let{data:ed}=(0,ew.a)(n),em=null==ea?void 0:ea.id;et[6]!==em?(i=["/api/payments",{patientId:em}],et[6]=em,et[7]=i):i=et[7];let eu=!!(null==ea?void 0:ea.id);et[8]!==i||et[9]!==eu?(c={queryKey:i,enabled:eu},et[8]=i,et[9]=eu,et[10]=c):c=et[10];let{data:ex}=(0,ew.a)(c),eh=function(){let e=(0,u.NL)(),{toast:t}=v();return(0,eO.D)({mutationFn:async e=>{let{data:{session:t}}=await U.auth.getSession();if(!t)throw Error("No authenticated session found");let a={...e};!a.id||"patientId"in a||(a.patientId=a.id,delete a.id);let s=await fetch("https://sqgtgwrhxoaeaxofyelf.supabase.co/functions/v1/update-patient",{method:"PATCH",headers:{Authorization:`Bearer ${t.access_token}`,"Content-Type":"application/json"},body:JSON.stringify(a)});if(!s.ok){let e=await s.text(),t={};try{t=JSON.parse(e)}catch{t={message:e}}throw Error((null==t?void 0:t.error)||(null==t?void 0:t.message)||`HTTP error ${s.status}`)}let r=await s.json();if(!r.success)throw Error(r.error||"Failed to update patient");return r},onSuccess:a=>{var s;return e.invalidateQueries({queryKey:["patients"]}),(null==a||null==(s=a.patient)?void 0:s.id)&&e.invalidateQueries({queryKey:["patients",{id:a.patient.id}]}),t({title:"Patient Updated",description:(null==a?void 0:a.message)||"Patient information has been updated."}),a},onError:e=>{console.error("Error updating patient:",e),t({title:"Error Updating Patient",description:(null==e?void 0:e.message)||"Failed to update patient. Please try again.",variant:"destructive"})}})}(),{data:ep}=function(e){let{toast:t}=v();return(0,ew.a)({queryKey:["patientById",e],queryFn:async()=>{try{if(!e)throw Error("Patient ID is required");let{data:{session:t}}=await U.auth.getSession();if(!t)throw Error("No authenticated session found");let a=new URL("https://sqgtgwrhxoaeaxofyelf.supabase.co/functions/v1/get-patient-by-id");a.searchParams.set("id",e);let s=await fetch(a.toString(),{method:"GET",headers:{Authorization:`Bearer ${t.access_token}`,"Content-Type":"application/json"}});if(!s.ok){let e=await s.text(),t={};try{t=JSON.parse(e)}catch{t={message:e}}throw Error((null==t?void 0:t.error)||(null==t?void 0:t.message)||`HTTP error ${s.status}`)}let r=await s.json();if(!r.success)throw Error(r.error||"Failed to fetch patient");return r}catch(e){throw console.error("Error fetching patient by ID (queryFn):",e),t({title:"Error Fetching Patient",description:(null==e?void 0:e.message)||"Failed to fetch patient. Please try again.",variant:"destructive"}),e}},enabled:!!e,staleTime:3e5,refetchOnWindowFocus:!0})}(null==ea?void 0:ea.id);et[11]!==ea?(o=()=>({...ea}),et[11]=ea,et[12]=o):o=et[12];let[ef,eg]=(0,r.useState)(o);if(et[13]!==ea?(d=()=>{eg({...ea})},m=[ea],et[13]=ea,et[14]=d,et[15]=m):(d=et[14],m=et[15]),(0,r.useEffect)(d,m),et[16]!==es||et[17]!==ep?(x=()=>{if(!(null==ep?void 0:ep.patient)||!es)return;let e=ep.patient,t=(e.name||"").trim().split(/\s+/),a=t.shift()||"",s=t.join(" ")||"",r=e.emergencyContact||e.emergency_contact||{};eg(t=>({...t,firstName:a,lastName:s,dateOfBirth:e.dateOfBirth??e.dateOfBirth??t.dateOfBirth,email:e.email??t.email,phone:e.phone??t.phone,address:e.address??t.address,insuranceProvider:e.insurance??t.insuranceProvider??"",insurancePolicyNumber:t.insurancePolicyNumber??"",insuranceGroupNumber:t.insuranceGroupNumber??"",medicalHistory:e.medicalHistory??t.medicalHistory,currentMedications:e.currentMedications??t.currentMedications??[],allergies:e.allergies??t.allergies??[],emergencyContactName:(null==r?void 0:r.name)||(null==r?void 0:r.fullName)||(null==r?void 0:r.contactName)||t.emergencyContactName||"",emergencyContactPhone:(null==r?void 0:r.phone)||(null==r?void 0:r.contactPhone)||t.emergencyContactPhone||"",isActive:"boolean"==typeof e.isActive?e.isActive:"Active"===e.status||t.isActive,memberSince:e.memberSince??t.memberSince}))},h=[ep,es],et[16]=es,et[17]=ep,et[18]=x,et[19]=h):(x=et[18],h=et[19]),(0,r.useEffect)(x,h),!ea)return null;let ej=aw;et[20]===Symbol.for("react.memo_cache_sentinel")?(p=e=>{let t=ej(e);if(!t)return"N/A";let a=new Date,s=a.getFullYear()-t.getFullYear(),r=a.getMonth()-t.getMonth();return(r<0||0===r&&a.getDate()<t.getDate())&&s--,s},et[20]=p):p=et[20];let ev=p;et[21]===Symbol.for("react.memo_cache_sentinel")?(f=e=>{var t;return e?{firstName:e.firstName||"",lastName:e.lastName||"",gender:e.gender||"",dateOfBirth:(null==(t=ej(e.dateOfBirth))?void 0:t.toISOString())||"",email:e.email||"",phone:e.phone||"",address:e.address||"",insuranceProvider:e.insuranceProvider||"",insurancePolicyNumber:e.insurancePolicyNumber||"",insuranceGroupNumber:e.insuranceGroupNumber||"",medicalHistory:e.medicalHistory||"",currentMedications:Array.isArray(e.currentMedications)?e.currentMedications:e.currentMedications?[e.currentMedications]:[],allergies:Array.isArray(e.allergies)?e.allergies:e.allergies?[e.allergies]:[],emergencyContactName:e.emergencyContactName||"",emergencyContactPhone:e.emergencyContactPhone||"",isActive:!!e.isActive}:null},et[21]=f):f=et[21];let eN=f,eb=JSON.stringify(eN(ea))!==JSON.stringify(eN(ef));et[22]===Symbol.for("react.memo_cache_sentinel")?(g=(0,s.jsx)("span",{children:"Patient Record"}),et[22]=g):g=et[22],et[23]===Symbol.for("react.memo_cache_sentinel")?(j=(0,s.jsx)(w.Z,{className:"h-4 w-4"}),et[23]=j):j=et[23],et[24]!==er?(y=(0,s.jsx)(tN,{children:(0,s.jsxs)(tb,{className:"flex items-center justify-between",children:[g,(0,s.jsx)(ey,{variant:"ghost",size:"sm",onClick:er,children:j})]})}),et[24]=er,et[25]=y):y=et[25],et[26]!==ef||et[27]!==ea?(N=(0,s.jsx)(ao,{patient:ea,editedPatient:ef,setEditedPatient:eg,getInitials:ab,getAge:ev,toSafeDate:ej}),et[26]=ef,et[27]=ea,et[28]=N):N=et[28],et[29]!==ef?(b=(0,s.jsx)("div",{children:(0,s.jsx)(ad,{editedPatient:ef,setEditedPatient:eg})}),et[29]=ef,et[30]=b):b=et[30],et[31]!==N||et[32]!==b?(_=(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[N,b]}),et[31]=N,et[32]=b,et[33]=_):_=et[33],et[34]===Symbol.for("react.memo_cache_sentinel")?(S=(0,s.jsx)(ti,{children:(0,s.jsx)(tc,{className:"text-base",children:"Medical Conditions"})}),et[34]=S):S=et[34];let e_=ef.medicalHistory??"";et[35]===Symbol.for("react.memo_cache_sentinel")?(C=e=>eg(t=>({...t,medicalHistory:e.target.value})),et[35]=C):C=et[35],et[36]!==e_?(P=(0,s.jsxs)(tl,{children:[S,(0,s.jsx)(td,{children:(0,s.jsx)("div",{className:"space-y-3",children:(0,s.jsx)(tT,{value:e_,onChange:C,className:"min-h-[120px] text-sm",placeholder:"Medical history"})})})]}),et[36]=e_,et[37]=P):P=et[37],et[38]===Symbol.for("react.memo_cache_sentinel")?(k=(0,s.jsx)(ti,{children:(0,s.jsx)(tc,{className:"text-base",children:"Current Medications"})}),et[38]=k):k=et[38],et[39]!==ef.currentMedications?(A=ef.currentMedications&&Array.isArray(ef.currentMedications)?ef.currentMedications.join("\n"):"string"==typeof ef.currentMedications?ef.currentMedications:"",et[39]=ef.currentMedications,et[40]=A):A=et[40],et[41]===Symbol.for("react.memo_cache_sentinel")?(D=e=>eg(t=>({...t,currentMedications:e.target.value.split("\n").filter(Boolean)})),et[41]=D):D=et[41],et[42]!==A?(I=(0,s.jsx)("div",{className:"space-y-2",children:(0,s.jsx)(tT,{value:A,onChange:D,className:"min-h-[80px] text-sm",placeholder:"One medication per line"})}),et[42]=A,et[43]=I):I=et[43],et[44]===Symbol.for("react.memo_cache_sentinel")?(T=(0,s.jsx)("h4",{className:"font-medium text-professional-dark mb-2",children:"Allergies"}),et[44]=T):T=et[44],et[45]!==ef.allergies?(Z=ef.allergies&&ef.allergies.length>0?ef.allergies.map(av):(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"No known allergies"}),et[45]=ef.allergies,et[46]=Z):Z=et[46],et[47]!==ef.allergies?(O=ef.allergies&&Array.isArray(ef.allergies)?ef.allergies.join("\n"):"",et[47]=ef.allergies,et[48]=O):O=et[48],et[49]===Symbol.for("react.memo_cache_sentinel")?(M=e=>eg(t=>({...t,allergies:e.target.value.split("\n").filter(Boolean)})),et[49]=M):M=et[49],et[50]!==O?(E=(0,s.jsx)("div",{className:"mt-2",children:(0,s.jsx)(tT,{value:O,onChange:M,className:"min-h-[60px] text-sm",placeholder:"One allergy per line"})}),et[50]=O,et[51]=E):E=et[51],et[52]!==Z||et[53]!==E?(F=(0,s.jsxs)("div",{className:"mt-6",children:[T,(0,s.jsxs)("div",{className:"space-y-2",children:[Z,E]})]}),et[52]=Z,et[53]=E,et[54]=F):F=et[54],et[55]!==I||et[56]!==F?($=(0,s.jsxs)(tl,{children:[k,(0,s.jsxs)(td,{children:[I,F]})]}),et[55]=I,et[56]=F,et[57]=$):$=et[57],et[58]!==P||et[59]!==$?(R=(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[P,$]}),et[58]=P,et[59]=$,et[60]=R):R=et[60],et[61]!==en||et[62]!==ex||et[63]!==ed?(L=(0,s.jsx)(ag,{activeTab:en,setActiveTab:el,appointments:ei,procedures:ed,payments:ex,getStatusColor:aN,toSafeDate:ej}),et[61]=en,et[62]=ex,et[63]=ed,et[64]=L):L=et[64],et[65]!==ef||et[66]!==ea?(z=(0,s.jsx)(aj,{patient:ea,editedPatient:ef,setEditedPatient:eg}),et[65]=ef,et[66]=ea,et[67]=z):z=et[67],et[68]!==_||et[69]!==R||et[70]!==L||et[71]!==z?(B=(0,s.jsxs)("div",{className:"space-y-6",children:[_,R,L,z]}),et[68]=_,et[69]=R,et[70]=L,et[71]=z,et[72]=B):B=et[72],et[73]===Symbol.for("react.memo_cache_sentinel")?(V=(0,s.jsx)("div",{className:"text-xs text-gray-500",children:"Date of birth"}),et[73]=V):V=et[73],et[74]!==ef.dateOfBirth||et[75]!==ea.dateOfBirth?(K=ej(ef.dateOfBirth??ea.dateOfBirth)?(0,eT.WU)(ej(ef.dateOfBirth??ea.dateOfBirth),"yyyy-MM-dd"):"",et[74]=ef.dateOfBirth,et[75]=ea.dateOfBirth,et[76]=K):K=et[76],et[77]===Symbol.for("react.memo_cache_sentinel")?(W=e=>eg(t=>({...t,dateOfBirth:e.target.value})),et[77]=W):W=et[77],et[78]!==K?(q=(0,s.jsxs)("div",{className:"flex-1",children:[V,(0,s.jsx)(e1,{type:"date",value:K,onChange:W,className:"p-1"})]}),et[78]=K,et[79]=q):q=et[79],et[80]!==er?(G=(0,s.jsx)(ey,{variant:"outline",onClick:er,children:"Close"}),et[80]=er,et[81]=G):G=et[81],et[82]!==ef||et[83]!==ea||et[84]!==eh?(H=()=>{let e={id:ea.id},t=eN(ea),a=eN(ef);Object.keys(a).forEach(s=>{if(a[s]!==t[s])if("currentMedications"===s||"allergies"===s)e[s]=ef[s];else if("dateOfBirth"===s){let t=ef.dateOfBirth??ea.dateOfBirth;t?"string"==typeof t?e[s]=t:e[s]=new Date(t).toISOString().split("T")[0]:e[s]=null}else e[s]=ef[s]}),eh.mutate(e)},et[82]=ef,et[83]=ea,et[84]=eh,et[85]=H):H=et[85];let eS=!eb||"pending"===eh.status,eC="pending"===eh.status?"Saving...":"Save Changes";return et[86]!==H||et[87]!==eS||et[88]!==eC?(J=(0,s.jsx)(ey,{className:"medical-button-primary",onClick:H,disabled:eS,children:eC}),et[86]=H,et[87]=eS,et[88]=eC,et[89]=J):J=et[89],et[90]!==G||et[91]!==J?(Y=(0,s.jsxs)("div",{className:"flex justify-end space-x-3",children:[G,J]}),et[90]=G,et[91]=J,et[92]=Y):Y=et[92],et[93]!==q||et[94]!==Y?(Q=(0,s.jsxs)("div",{className:"flex flex-col md:flex-row justify-end space-y-3 md:space-y-0 md:space-x-3 pt-6 border-t",children:[q,Y]}),et[93]=q,et[94]=Y,et[95]=Q):Q=et[95],et[96]!==y||et[97]!==B||et[98]!==Q?(X=(0,s.jsxs)(tv,{className:"max-w-6xl max-h-[90vh] overflow-y-auto",children:[y,B,Q]}),et[96]=y,et[97]=B,et[98]=Q,et[99]=X):X=et[99],et[100]!==es||et[101]!==er||et[102]!==X?(ee=(0,s.jsx)(tg,{open:es,onOpenChange:er,children:X}),et[100]=es,et[101]=er,et[102]=X,et[103]=ee):ee=et[103],ee}function av(e,t){return(0,s.jsx)(tu,{variant:"outline",className:"mr-2",children:e},t)}function aN(e){switch(e){case"confirmed":case"completed":case"paid":return"medical-badge-normal";case"in-progress":case"pending":return"medical-badge-mild";case"urgent":case"overdue":return"medical-badge-urgent";default:return"bg-gray-100 text-gray-800"}}function ab(e,t){return`${e.charAt(0)}${t.charAt(0)}`.toUpperCase()}function aw(e){if(!e)return null;let t=e instanceof Date?e:new Date(e);return isNaN(t.getTime())?null:t}function a_(){var e,t,a,n,i,c,o,d;let m,u,x,h,p,f,g,j,y,v,N,b,w,_,S,C,P,k,A,D,I,T,Z,O,M,E=(0,l.c)(55),[F,$]=(0,r.useState)(""),[R,L]=(0,r.useState)(!1),[U,z]=(0,r.useState)(null),[B,V]=(0,r.useState)(!1),[K,q]=(0,r.useState)(1),[G,H]=(0,r.useState)("all"),[J,Y]=(0,r.useState)("");E[0]!==F?(m=()=>{let e=setTimeout(()=>{Y(F),q(1)},500);return()=>clearTimeout(e)},u=[F],E[0]=F,E[1]=m,E[2]=u):(m=E[1],u=E[2]),(0,r.useEffect)(m,u),E[3]!==K||E[4]!==J||E[5]!==G?(x={page:K,limit:12,search:J,status:G},E[3]=K,E[4]=J,E[5]=G,E[6]=x):x=E[6];let{data:Q,isLoading:X}=tq(x);E[7]!==(null==Q||null==(e=Q.data)?void 0:e.patients)?(h=(null==Q||null==(a=Q.data)?void 0:a.patients)||[],E[7]=null==Q||null==(n=Q.data)?void 0:n.patients,E[8]=h):h=E[8];let ee=h,et=null==Q||null==(t=Q.data)?void 0:t.pagination,{data:ea}=(c=(null==U?void 0:U.id)||"",o="patients",d={id:c},(0,ew.a)({queryKey:["supabase",o,"*",d],queryFn:()=>W(o,"*",d),select:e=>e.data,staleTime:3e5}));e:{let e;if(!U){p=null;break e}if(!ea){p=U;break e}if(Array.isArray(ea)&&ea.length>0&&(null==(i=ea[0])?void 0:i.id)){let e;E[9]!==ea[0]?(e=t5(ea[0]),E[9]=ea[0],E[10]=e):e=E[10],p=e;break e}if(ea&&"object"==typeof ea&&ea.id){let e;E[11]!==ea?(e=t5(ea),E[11]=ea,E[12]=e):e=E[12],p=e;break e}E[13]!==U?(e=t5(U),E[13]=U,E[14]=e):e=E[14],p=e}let es=p;E[15]===Symbol.for("react.memo_cache_sentinel")?(f=e=>{H(e),q(1)},E[15]=f):f=E[15];let er=f;if(X){let e;return E[16]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,s.jsx)("div",{className:"text-center",children:"Loading patients..."})}),E[16]=e):e=E[16],e}E[17]===Symbol.for("react.memo_cache_sentinel")?(g=(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-semibold text-professional-dark",children:"Patient Management"}),(0,s.jsx)("p",{className:"text-gray-600 mt-1",children:"Manage patient records and medical history"})]}),E[17]=g):g=E[17],E[18]===Symbol.for("react.memo_cache_sentinel")?(j=(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-8",children:[g,(0,s.jsxs)(ey,{className:"mt-4 sm:mt-0 medical-button-primary",onClick:()=>L(!0),children:[(0,s.jsx)(tn.Z,{className:"h-4 w-4 mr-2"}),"Add New Patient"]})]}),E[18]=j):j=E[18],E[19]===Symbol.for("react.memo_cache_sentinel")?(y=(0,s.jsx)(e0.Z,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),E[19]=y):y=E[19],E[20]===Symbol.for("react.memo_cache_sentinel")?(v=e=>$(e.target.value),E[20]=v):v=E[20],E[21]!==F?(N=(0,s.jsxs)("div",{className:"relative flex-1",children:[y,(0,s.jsx)(e1,{placeholder:"Search patients by name or email...",value:F,onChange:v,className:"pl-10"})]}),E[21]=F,E[22]=N):N=E[22];let en="all"===G?"default":"outline";E[23]===Symbol.for("react.memo_cache_sentinel")?(b=()=>er("all"),E[23]=b):b=E[23],E[24]!==en?(w=(0,s.jsx)(ey,{variant:en,onClick:b,children:"All"}),E[24]=en,E[25]=w):w=E[25];let el="active"===G?"default":"outline";E[26]===Symbol.for("react.memo_cache_sentinel")?(_=()=>er("active"),E[26]=_):_=E[26],E[27]!==el?(S=(0,s.jsx)(ey,{variant:el,onClick:_,children:"Active"}),E[27]=el,E[28]=S):S=E[28];let ei="inactive"===G?"default":"outline";return E[29]===Symbol.for("react.memo_cache_sentinel")?(C=()=>er("inactive"),E[29]=C):C=E[29],E[30]!==ei?(P=(0,s.jsx)(ey,{variant:ei,onClick:C,children:"Inactive"}),E[30]=ei,E[31]=P):P=E[31],E[32]!==w||E[33]!==S||E[34]!==P?(k=(0,s.jsxs)("div",{className:"flex gap-2",children:[w,S,P]}),E[32]=w,E[33]=S,E[34]=P,E[35]=k):k=E[35],E[36]!==N||E[37]!==k?(A=(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[N,k]}),E[36]=N,E[37]=k,E[38]=A):A=E[38],E[39]!==J||E[40]!==et||E[41]!==ee?(D=(null==ee?void 0:ee.length)===0?(0,s.jsx)(tl,{children:(0,s.jsx)(td,{className:"text-center py-8",children:(0,s.jsx)("p",{className:"text-gray-500",children:J?"No patients found matching your search.":"No patients registered yet."})})}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:null==ee?void 0:ee.map(e=>(0,s.jsxs)(tl,{className:"hover:shadow-md transition-shadow cursor-pointer",onClick:()=>{z({id:e.id,firstName:e.name.split(" ")[0]||"",lastName:e.name.split(" ").slice(1).join(" ")||"",email:e.email||"",phone:e.phone||"",dateOfBirth:new Date,gender:e.gender||"Unknown",address:e.address||"",insuranceProvider:e.insurance||void 0,insurancePolicyNumber:void 0,insuranceGroupNumber:void 0,emergencyContactName:void 0,emergencyContactPhone:void 0,medicalHistory:void 0,allergies:[],currentMedications:[],memberSince:new Date(e.memberSince||new Date().toISOString()),isActive:e.isActive,createdAt:new Date,updatedAt:new Date}),V(!0)},children:[(0,s.jsx)(ti,{className:"pb-3",children:(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"w-12 h-12 bg-medical-blue/10 rounded-full flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-sm font-medium text-medical-blue",children:e.initials})}),(0,s.jsxs)("div",{children:[(0,s.jsx)(tc,{className:"text-lg",children:e.name}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:e.email})]})]}),(0,s.jsx)(tu,{variant:e.isActive?"default":"secondary",children:e.status})]})}),(0,s.jsx)(td,{children:(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,s.jsx)("span",{className:"text-gray-500",children:"Age:"}),(0,s.jsx)("span",{children:e.age||"N/A"})]}),(0,s.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,s.jsx)("span",{className:"text-gray-500",children:"Phone:"}),(0,s.jsx)("span",{children:e.phone})]}),(0,s.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,s.jsx)("span",{className:"text-gray-500",children:"Insurance:"}),(0,s.jsx)("span",{children:e.insurance||"N/A"})]}),(0,s.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,s.jsx)("span",{className:"text-gray-500",children:"Member since:"}),(0,s.jsx)("span",{children:e.memberSince||"N/A"})]})]})})]},e.id))}),et&&et.totalPages>1&&(0,s.jsxs)("div",{className:"flex justify-center items-center gap-4 mt-8",children:[(0,s.jsx)(ey,{variant:"outline",onClick:()=>q(aC),disabled:!et.hasPrevPage,children:"Previous"}),(0,s.jsxs)("span",{className:"text-sm text-gray-600",children:["Page ",et.currentPage," of ",et.totalPages," (",et.totalCount," total)"]}),(0,s.jsx)(ey,{variant:"outline",onClick:()=>q(aS),disabled:!et.hasNextPage,children:"Next"})]})]}),E[39]=J,E[40]=et,E[41]=ee,E[42]=D):D=E[42],E[43]===Symbol.for("react.memo_cache_sentinel")?(I=()=>L(!1),E[43]=I):I=E[43],E[44]!==R?(T=(0,s.jsx)(t3,{isOpen:R,onClose:I}),E[44]=R,E[45]=T):T=E[45],E[46]===Symbol.for("react.memo_cache_sentinel")?(Z=()=>{V(!1),z(null)},E[46]=Z):Z=E[46],E[47]!==B||E[48]!==es?(O=(0,s.jsx)(ay,{patient:es,isOpen:B,onClose:Z}),E[47]=B,E[48]=es,E[49]=O):O=E[49],E[50]!==A||E[51]!==D||E[52]!==T||E[53]!==O?(M=(0,s.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[j,A,D,T,O]}),E[50]=A,E[51]=D,E[52]=T,E[53]=O,E[54]=M):M=E[54],M}function aS(e){return e+1}function aC(e){return Math.max(1,e-1)}var aP=a(92627),ak=a(8495),aA=a(84154),aD=a(66005),aI=a(74021),aT=a(79831),aZ=a(76575),aO=a(82898),aM=a(83528),aE=a(82535),aF=a(13181),a$=a(62725),aR=a(71794),aL=a(91382),aU=a(83137),az=a(49311);function aB(e){var t,a;let{children:n,content:l,trigger:i="hover",placement:c="top",offset:o=8,className:d=""}=e,[m,u]=(0,r.useState)(!1),x=(0,r.useRef)(null),{refs:h,floatingStyles:p,context:f}=(0,eH.YF)({open:m,onOpenChange:u,placement:c,middleware:[(0,eJ.cv)(o),(0,eJ.RR)({fallbackAxisSideDirection:"start"}),(0,eJ.uY)({padding:5}),(0,eJ.x7)({element:x})],whileElementsMounted:eY.Me}),g=(0,eH.XI)(f,{enabled:"hover"===i,delay:{open:200,close:100}}),j=(0,eH.eS)(f,{enabled:"click"===i}),y=(0,eH.KK)(f),v=(0,eH.bQ)(f),N=(0,eH.qs)(f,{role:"tooltip"}),{getReferenceProps:b,getFloatingProps:w}=(0,eH.NI)([g,j,y,v,N]);return(0,s.jsxs)(s.Fragment,{children:[(0,r.cloneElement)(n,{ref:h.setReference,...b()}),m&&(0,s.jsx)(eH.ll,{children:(0,s.jsxs)("div",{ref:h.setFloating,style:p,...w(),className:"z-50",children:[(0,s.jsx)(tl,{className:`p-4 shadow-lg border max-w-sm ${d}`,children:l}),(0,s.jsx)("div",{ref:x,className:"absolute w-2 h-2 bg-white border rotate-45",style:{left:null==(t=f.middlewareData.arrow)?void 0:t.x,top:null==(a=f.middlewareData.arrow)?void 0:a.y}})]})})]})}a(64520);let aV={"en-US":aR._},aK=(0,aA.lD)({format:eT.WU,parse:aD.Qc,startOfWeek:aI.z,getDay:aT.w,locales:aV});function aW(e){let t,a,n,i,c,o,d,m,x,h,p,f,g,j,y,N,b,w,_=(0,l.c)(41),{appointments:S,onEditAppointment:C,onDeleteAppointment:P,onSelectSlot:k}=e,[A,D]=(0,r.useState)(aA.kO.MONTH);_[0]===Symbol.for("react.memo_cache_sentinel")?(t=new Date,_[0]=t):t=_[0];let[I,T]=(0,r.useState)(t),Z=aJ;e:{let e;if(!S){let e;_[1]===Symbol.for("react.memo_cache_sentinel")?(e=[],_[1]=e):e=_[1],a=e;break e}if(_[2]!==S){let t;_[4]===Symbol.for("react.memo_cache_sentinel")?(t=e=>{let t=new Date(e.appointmentDate),[a,s]=e.appointmentTime.split(":").map(Number);t.setHours(a,s,0,0);let r=new Date(t),n=e.duration;return n?r.setMinutes(r.getMinutes()+n):r.setHours(r.getHours()+1),{id:e.id,title:`${Z(e)} - ${e.procedure}`,start:t,end:r,resource:e}},_[4]=t):t=_[4],e=S.map(t),_[2]=S,_[3]=e}else e=_[3];a=e}let O=a,M=function(){let e=(0,u.NL)(),{toast:t}=v();return(0,eO.D)({mutationFn:async e=>{if(!e)throw Error("Missing appointment id");let{data:{session:t}}=await U.auth.getSession();if(!t)throw Error("No authenticated session found");let a=await fetch(`${R}/functions/v1/delete-appointment/${encodeURIComponent(e)}`,{method:"DELETE",headers:{Authorization:`Bearer ${t.access_token}`}});if(!a.ok)throw Error(await a.text().catch(()=>"")||"Failed to delete appointment");let s=await a.json().catch(()=>({}));if(s&&!1===s.success)throw Error(s.message||"Failed to delete appointment");return s},onSuccess:a=>(e.invalidateQueries({queryKey:["appointments"]}),t({title:"Appointment Deleted",description:(null==a?void 0:a.message)||"Appointment has been removed."}),a),onError:e=>{console.error("Error deleting appointment:",e);let a=(null==e?void 0:e.message)||"Failed to delete appointment. Please try again.";/not found or not in your clinic/i.test(a)&&(a="Appointment not found or you lack clinic permission."),t({title:"Error Deleting Appointment",description:a,variant:"destructive"})}})}();_[5]!==M||_[6]!==P?(n=e=>{null==P||P(String(e)),M.mutate(String(e))},_[5]=M,_[6]=P,_[7]=n):n=_[7];let E=n;_[8]!==M||_[9]!==E||_[10]!==C?(i=e=>{let{appointment:t}=e;return(0,s.jsxs)("div",{className:"space-y-3 min-w-[280px]",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("h4",{className:"font-semibold text-medical-blue",children:t.procedure}),(0,s.jsx)(tu,{className:function(e){switch(e){case"confirmed":return"bg-green-100 text-green-800 border-green-200";case"scheduled":return"bg-blue-100 text-blue-800 border-blue-200";case"in-progress":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"completed":default:return"bg-gray-100 text-gray-800 border-gray-200";case"cancelled":return"bg-red-100 text-red-800 border-red-200";case"urgent":return"bg-orange-100 text-orange-800 border-orange-200"}}(t.status),children:t.status})]}),(0,s.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(en.Z,{className:"h-4 w-4 text-gray-500"}),(0,s.jsx)("span",{children:Z(t)})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(e_.Z,{className:"h-4 w-4 text-gray-500"}),(0,s.jsx)("span",{children:(0,eT.WU)(new Date(t.appointmentDate),"MMM dd, yyyy")})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(eL.Z,{className:"h-4 w-4 text-gray-500"}),(0,s.jsx)("span",{children:t.appointmentTime})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(en.Z,{className:"h-4 w-4 text-gray-500"}),(0,s.jsxs)("span",{children:["Dr. ",t.doctorName]})]}),t.notes&&(0,s.jsxs)("div",{className:"mt-2 p-2 bg-gray-50 rounded text-xs",children:[(0,s.jsx)("strong",{children:"Notes:"})," ",t.notes]})]}),(0,s.jsxs)("div",{className:"flex space-x-2 pt-2 border-t",children:[(0,s.jsxs)(ey,{size:"sm",variant:"outline",className:"flex-1",onClick:()=>null==C?void 0:C(t),children:[(0,s.jsx)(aL.Z,{className:"h-3 w-3 mr-1"}),"Edit"]}),(0,s.jsxs)(ey,{size:"sm",variant:"destructive",className:"flex-1",onClick:()=>E(t.id),disabled:M.isPending,children:[(0,s.jsx)(aU.Z,{className:"h-3 w-3 mr-1"}),M.isPending?"Deleting...":"Delete"]})]})]})},_[8]=M,_[9]=E,_[10]=C,_[11]=i):i=_[11];let F=i;_[12]!==F?(c=e=>{let{event:t}=e;return(0,s.jsx)(aB,{content:(0,s.jsx)(F,{appointment:t.resource}),trigger:"hover",placement:"top",className:"bg-white shadow-xl border-0",children:(0,s.jsxs)("div",{className:"h-full w-full cursor-pointer",children:[(0,s.jsx)("div",{className:"text-xs font-medium truncate",children:Z(t.resource)}),(0,s.jsx)("div",{className:"text-xs opacity-90 truncate",children:t.resource.procedure})]})})},_[12]=F,_[13]=c):c=_[13];let $=c;_[14]===Symbol.for("react.memo_cache_sentinel")?(o=e=>{T(e)},_[14]=o):o=_[14];let L=o;_[15]===Symbol.for("react.memo_cache_sentinel")?(d=e=>{D(e)},_[15]=d):d=_[15];let z=d;_[16]!==I||_[17]!==A?(m=e=>{switch(A){case aA.kO.MONTH:return"next"===e?(0,aZ.z)(I,1):(0,aO.W)(I,1);case aA.kO.WEEK:return"next"===e?(0,aM.j)(I,1):(0,aE.t)(I,1);case aA.kO.DAY:return"next"===e?(0,aF.E)(I,1):(0,a$.k)(I,1);default:return"next"===e?(0,aZ.z)(I,1):(0,aO.W)(I,1)}},_[16]=I,_[17]=A,_[18]=m):m=_[18];let B=m;_[19]!==I||_[20]!==A||_[21]!==B?(x=()=>(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4 p-4 bg-white rounded-lg border",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(ey,{variant:"outline",size:"sm",onClick:()=>L(B("prev")),children:(0,s.jsx)(az.Z,{className:"h-4 w-4"})}),(0,s.jsx)(ey,{variant:"outline",size:"sm",onClick:()=>L(new Date),children:"Today"}),(0,s.jsx)(ey,{variant:"outline",size:"sm",onClick:()=>L(B("next")),children:(0,s.jsx)(eo.Z,{className:"h-4 w-4"})}),(0,s.jsx)("span",{className:"font-semibold text-lg text-professional-dark ml-4",children:(0,eT.WU)(I,A===aA.kO.MONTH?"MMMM yyyy":A===aA.kO.WEEK?"MMM dd, yyyy":"MMMM dd, yyyy")})]}),(0,s.jsxs)("div",{className:"flex space-x-2",children:[(0,s.jsx)(ey,{variant:A===aA.kO.MONTH?"default":"outline",size:"sm",onClick:()=>z(aA.kO.MONTH),className:A===aA.kO.MONTH?"medical-button-primary":"",children:"Month"}),(0,s.jsx)(ey,{variant:A===aA.kO.WEEK?"default":"outline",size:"sm",onClick:()=>z(aA.kO.WEEK),className:A===aA.kO.WEEK?"medical-button-primary":"",children:"Week"}),(0,s.jsx)(ey,{variant:A===aA.kO.DAY?"default":"outline",size:"sm",onClick:()=>z(aA.kO.DAY),className:A===aA.kO.DAY?"medical-button-primary":"",children:"Day"})]})]}),_[19]=I,_[20]=A,_[21]=B,_[22]=x):x=_[22];let V=x;return _[23]===Symbol.for("react.memo_cache_sentinel")?(h=(0,s.jsx)(ti,{className:"pb-2",children:(0,s.jsx)(tc,{className:"text-xl text-professional-dark",children:"Appointment Calendar"})}),_[23]=h):h=_[23],_[24]!==V?(p=V(),_[24]=V,_[25]=p):p=_[25],_[26]===Symbol.for("react.memo_cache_sentinel")?(f={height:"600px",padding:"0 1rem 1rem"},_[26]=f):f=_[26],_[27]!==$?(g={event:$,toolbar:aG},_[27]=$,_[28]=g):g=_[28],_[29]===Symbol.for("react.memo_cache_sentinel")?(j=new Date(2024,0,1,8,0,0),y=new Date(2024,0,1,18,0,0),N={timeGutterFormat:"h:mm a",eventTimeRangeFormat:aq},_[29]=j,_[30]=y,_[31]=N):(j=_[29],y=_[30],N=_[31]),_[32]!==I||_[33]!==A||_[34]!==O||_[35]!==k||_[36]!==g?(b=(0,s.jsx)("div",{className:"calendar-container",style:f,children:(0,s.jsx)(aA.f,{localizer:aK,events:O,startAccessor:"start",endAccessor:"end",view:A,onView:z,date:I,onNavigate:L,eventPropGetter:aH,components:g,onSelectSlot:k,selectable:!0,popup:!0,showMultiDayTimes:!0,step:30,timeslots:2,min:j,max:y,formats:N})}),_[32]=I,_[33]=A,_[34]=O,_[35]=k,_[36]=g,_[37]=b):b=_[37],_[38]!==p||_[39]!==b?(w=(0,s.jsxs)(tl,{className:"h-full",children:[h,(0,s.jsxs)(td,{className:"p-0",children:[p,b]})]}),_[38]=p,_[39]=b,_[40]=w):w=_[40],w}function aq(e){let{start:t,end:a}=e;return`${(0,eT.WU)(t,"h:mm a")} - ${(0,eT.WU)(a,"h:mm a")}`}function aG(){return null}function aH(e){let t=e.resource.status,a="#3174ad",s="#265a87";switch(t){case"confirmed":a="#22c55e",s="#16a34a";break;case"scheduled":a="#3b82f6",s="#2563eb";break;case"in-progress":a="#f59e0b",s="#d97706";break;case"completed":a="#6b7280",s="#4b5563";break;case"cancelled":a="#ef4444",s="#dc2626";break;case"urgent":a="#f97316",s="#ea580c"}return{style:{backgroundColor:a,borderColor:s,border:`1px solid ${s}`,borderRadius:"4px",color:"white",fontSize:"12px",padding:"2px 4px"}}}function aJ(e){var t,a,s;return e.patientName||(null==(t=e.patient)?void 0:t.name)||[null==(a=e.patient)?void 0:a.firstName,null==(s=e.patient)?void 0:s.lastName].filter(Boolean).join(" ")||"Unknown Patient"}function aY(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{toast:t}=v();return(0,ew.a)({queryKey:["doctors",e],queryFn:async()=>{try{let{data:{session:t}}=await U.auth.getSession();if(!t)throw Error("No authenticated session found");let a=new URL("https://sqgtgwrhxoaeaxofyelf.supabase.co/functions/v1/get-doctors-by-clinic-id");e.includeInactive&&a.searchParams.set("include_inactive","true"),e.specialization&&a.searchParams.set("specialization",e.specialization);let s=await fetch(a.toString(),{method:"GET",headers:{Authorization:`Bearer ${t.access_token}`,"Content-Type":"application/json"}});if(!s.ok){let e=await s.text(),t={};try{t=JSON.parse(e)}catch{t={message:e}}throw Error((null==t?void 0:t.error)||(null==t?void 0:t.message)||`HTTP error ${s.status}`)}let r=await s.json();if(!r.success)throw Error(r.error||"Failed to fetch doctors");return r}catch(e){throw console.error("Error fetching doctors:",e),t({title:"Error Fetching Doctors",description:(null==e?void 0:e.message)||"Failed to fetch doctors. Please try again.",variant:"destructive"}),e}},staleTime:3e5,refetchOnWindowFocus:!0})}function aQ(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{toast:t}=v();return(0,ew.a)({queryKey:["procedures",e],queryFn:async()=>{try{let{data:{session:t}}=await U.auth.getSession();if(!t)throw Error("No authenticated session found");let a=new URL("https://sqgtgwrhxoaeaxofyelf.supabase.co/functions/v1/get-procedures");e.page&&a.searchParams.set("page",e.page.toString()),e.limit&&a.searchParams.set("limit",e.limit.toString()),e.search&&a.searchParams.set("search",e.search),e.status&&a.searchParams.set("status",e.status),e.doctorName&&a.searchParams.set("doctor_name",e.doctorName),e.procedureName&&a.searchParams.set("procedure_name",e.procedureName),e.dateFrom&&a.searchParams.set("date_from",e.dateFrom),e.dateTo&&a.searchParams.set("date_to",e.dateTo),e.minCost&&a.searchParams.set("min_cost",e.minCost),e.maxCost&&a.searchParams.set("max_cost",e.maxCost),void 0!==e.includeStandalone&&a.searchParams.set("include_standalone",String(e.includeStandalone)),void 0!==e.linkedOnly&&a.searchParams.set("linked_only",String(e.linkedOnly));let s=await fetch(a.toString(),{method:"GET",headers:{Authorization:`Bearer ${t.access_token}`,"Content-Type":"application/json"}});if(!s.ok){let e=await s.text(),t={};try{t=JSON.parse(e)}catch{t={message:e}}throw Error((null==t?void 0:t.error)||(null==t?void 0:t.message)||`HTTP error ${s.status}`)}let r=await s.json();if(!r.success)throw Error(r.error||"Failed to fetch procedures");return r}catch(e){throw console.error("Error fetching procedures:",e),t({title:"Error Fetching Procedures",description:(null==e?void 0:e.message)||"Failed to fetch procedures. Please try again.",variant:"destructive"}),e}},staleTime:3e5,refetchOnWindowFocus:!0})}function aX(e){var t,a,n;let i,c,o,d,m,x,h,p,f,g,j,y,N,b,w,_,S,C,P,k,A,D,I,T,Z,O,M,E,F,$,L,z,B=(0,l.c)(83),{appointment:V,patients:K,isOpen:W,onClose:q}=e,{toast:G}=v();B[0]===Symbol.for("react.memo_cache_sentinel")?(i={defaultValues:{patientId:"",doctorId:"",appointmentDate:new Date,appointmentTime:"",procedure:"",status:"scheduled",notes:""}},B[0]=i):i=B[0];let H=(0,tZ.cI)(i);B[1]!==K?(c=Array.isArray(K)?K:(null==K||null==(t=K.data)?void 0:t.patients)??(null==K?void 0:K.patients)??[],B[1]=K,B[2]=c):c=B[2];let J=c;B[3]!==J?(o=J.map(a9),B[3]=J,B[4]=o):o=B[4];let Y=o,{data:Q}=aY();B[5]!==Q?(d=(null==Q||null==(a=Q.data)?void 0:a.doctors)??[],B[5]=Q,B[6]=d):d=B[6];let X=d;B[7]!==X?(m=X.map(a7),B[7]=X,B[8]=m):m=B[8];let ee=m;B[9]===Symbol.for("react.memo_cache_sentinel")?(x={page:1,limit:200},B[9]=x):x=B[9];let{data:et}=aQ(x);B[10]!==et?(h=(null==et||null==(n=et.data)?void 0:n.procedures)??[],B[10]=et,B[11]=h):h=B[11];let ea=h;B[12]!==ea?(p=ea.map(a8),B[12]=ea,B[13]=p):p=B[13];let es=p;B[14]!==V||B[15]!==H||B[16]!==ee||B[17]!==es?(f=()=>{if(V){var e,t,a,s,r,n,l,i;let c=V.patientId||(null==(e=V.patient)?void 0:e.id)||(null==(t=V.patient)?void 0:t.patientId)||(null==(a=V.patient)?void 0:a.userId)||"",o=V.doctorId||(null==(s=V.doctor)?void 0:s.id)||(null==(r=V.doctor)?void 0:r.userId)||(null==(n=V.doctor)?void 0:n.doctorId)||"";if(!o){let e=V.doctorName||(null==(l=V.doctor)?void 0:l.displayName)||(null==(i=V.doctor)?void 0:i.name)||"",t=ee.find(t=>t.label===e||t.id===String(e));o=t?t.id:""}let d=V.procedure||"";if(!d&&Array.isArray(V.procedures)&&V.procedures.length>0){let e=V.procedures[0];d=(null==e?void 0:e.procedureName)||(null==e?void 0:e.procedure_name)||(null==e?void 0:e.id)||""}let m="";if(d){let e=es.find(e=>e.id===String(d)||e.name===d);m=e?e.id:String(d)}let u=V.appointmentDate?new Date(V.appointmentDate):new Date,x=V.appointmentTime||"",h=V.status||"scheduled",p=V.notes||"";H.reset({patientId:c,doctorId:o,appointmentDate:u,appointmentTime:x,procedure:m,status:h,notes:p})}},g=[V,H,ee,es],B[14]=V,B[15]=H,B[16]=ee,B[17]=es,B[18]=f,B[19]=g):(f=B[18],g=B[19]),(0,r.useEffect)(f,g);let er=function(){let e=(0,u.NL)(),{toast:t}=v();return(0,eO.D)({mutationFn:async e=>{let{appointmentId:t,data:a}=e,{data:{session:s}}=await U.auth.getSession();if(!s)throw Error("No authenticated session found");let r=await fetch(`${R}/functions/v1/update-appointment/${t}`,{method:"PUT",headers:{Authorization:`Bearer ${s.access_token}`,"Content-Type":"application/json"},body:JSON.stringify(a)});if(!r.ok){let e=await r.text();throw Error(`HTTP error ${r.status}: ${e}`)}let n=await r.json();if(!n.success)throw Error(n.error||"Failed to update appointment");return n},onSuccess:a=>(e.invalidateQueries({queryKey:["appointments"]}),t({title:"Appointment Updated",description:(null==a?void 0:a.message)||"Appointment updated successfully."}),a),onError:e=>{console.error("Error updating appointment:",e),t({title:"Error Updating Appointment",description:(null==e?void 0:e.message)||"Failed to update appointment. Please try again.",variant:"destructive"})}})}();B[20]!==V||B[21]!==es||B[22]!==q||B[23]!==G||B[24]!==er?(j=e=>{var t;let a=e.appointmentDate instanceof Date?e.appointmentDate.toISOString():String(e.appointmentDate),s=(null==(t=es.find(t=>t.id===e.procedure))?void 0:t.name)??e.procedure,r={patient:{id:e.patientId},doctor:{id:e.doctorId},appointmentDate:a,appointmentTime:e.appointmentTime,duration:30,appointmentType:"consultation",reason:null,notes:e.notes||null,status:e.status,procedures:[{id:e.procedure,procedureName:s,performedDate:a,status:"planned"}]};if(!(null==V?void 0:V.id))return void G({title:"Missing Appointment ID",description:"Cannot update appointment without a valid id.",variant:"destructive"});er.mutate({appointmentId:String(V.id),data:r},{onSuccess:()=>q()})},B[20]=V,B[21]=es,B[22]=q,B[23]=G,B[24]=er,B[25]=j):j=B[25];let el=j;B[26]!==H||B[27]!==q?(y=()=>{H.reset(),q()},B[26]=H,B[27]=q,B[28]=y):y=B[28];let ei=y;if(!V)return null;B[29]===Symbol.for("react.memo_cache_sentinel")?(N=(0,s.jsx)(tN,{children:(0,s.jsxs)(tb,{className:"flex items-center space-x-2 text-xl font-semibold text-professional-dark",children:[(0,s.jsx)(af.Z,{className:"h-5 w-5 text-medical-blue"}),(0,s.jsx)("span",{children:"Edit Appointment"})]})}),B[29]=N):N=B[29],B[30]!==H||B[31]!==el?(b=H.handleSubmit(el),B[30]=H,B[31]=el,B[32]=b):b=B[32],B[33]===Symbol.for("react.memo_cache_sentinel")?(w=(0,s.jsx)(ti,{children:(0,s.jsx)(tc,{className:"text-lg text-medical-blue",children:"Appointment Details"})}),B[33]=w):w=B[33],B[34]!==Y?(_=e=>{let{field:t}=e;return(0,s.jsxs)(tB,{children:[(0,s.jsxs)(tV,{className:"flex items-center space-x-1",children:[(0,s.jsx)(en.Z,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:"Patient *"})]}),(0,s.jsxs)(tS,{value:t.value,onValueChange:t.onChange,children:[(0,s.jsx)(tK,{children:(0,s.jsx)(tP,{children:(0,s.jsx)(tC,{placeholder:"Select patient"})})}),(0,s.jsx)(tD,{children:Y.map(a6)})]}),(0,s.jsx)(tW,{})]})},B[34]=Y,B[35]=_):_=B[35],B[36]!==H.control||B[37]!==_?(S=(0,s.jsx)(tL,{control:H.control,name:"patientId",render:_}),B[36]=H.control,B[37]=_,B[38]=S):S=B[38],B[39]!==H.control?(C=(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsx)(tL,{control:H.control,name:"appointmentDate",render:a3}),(0,s.jsx)(tL,{control:H.control,name:"appointmentTime",render:a5})]}),B[39]=H.control,B[40]=C):C=B[40],B[41]!==ee?(P=e=>{let{field:t}=e;return(0,s.jsxs)(tB,{children:[(0,s.jsx)(tV,{children:"Doctor *"}),(0,s.jsxs)(tS,{value:t.value,onValueChange:t.onChange,children:[(0,s.jsx)(tK,{children:(0,s.jsx)(tP,{children:(0,s.jsx)(tC,{placeholder:"Select doctor"})})}),(0,s.jsx)(tD,{children:0===ee.length?(0,s.jsx)(tI,{value:"",children:"No doctors available"}):ee.map(a4)})]}),(0,s.jsx)(tW,{})]})},B[41]=ee,B[42]=P):P=B[42],B[43]!==H.control||B[44]!==P?(k=(0,s.jsx)(tL,{control:H.control,name:"doctorId",render:P}),B[43]=H.control,B[44]=P,B[45]=k):k=B[45],B[46]!==H.control?(A=(0,s.jsx)(tL,{control:H.control,name:"status",render:a2}),B[46]=H.control,B[47]=A):A=B[47],B[48]!==k||B[49]!==A?(D=(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[k,A]}),B[48]=k,B[49]=A,B[50]=D):D=B[50],B[51]!==es?(I=e=>{let{field:t}=e;return(0,s.jsxs)(tB,{children:[(0,s.jsx)(tV,{children:"Procedure *"}),(0,s.jsxs)(tS,{value:t.value,onValueChange:t.onChange,children:[(0,s.jsx)(tK,{children:(0,s.jsx)(tP,{children:(0,s.jsx)(tC,{placeholder:"Select procedure"})})}),(0,s.jsx)(tD,{children:0===es.length?(0,s.jsx)(tI,{value:"",children:"No procedures available"}):es.map(a1)})]}),(0,s.jsx)(tW,{})]})},B[51]=es,B[52]=I):I=B[52],B[53]!==H.control||B[54]!==I?(T=(0,s.jsx)(tL,{control:H.control,name:"procedure",render:I}),B[53]=H.control,B[54]=I,B[55]=T):T=B[55],B[56]!==H.control?(Z=(0,s.jsx)(tL,{control:H.control,name:"notes",render:a0}),B[56]=H.control,B[57]=Z):Z=B[57],B[58]!==S||B[59]!==C||B[60]!==D||B[61]!==T||B[62]!==Z?(O=(0,s.jsxs)(tl,{children:[w,(0,s.jsxs)(td,{className:"space-y-4",children:[S,C,D,T,Z]})]}),B[58]=S,B[59]=C,B[60]=D,B[61]=T,B[62]=Z,B[63]=O):O=B[63],B[64]!==ei?(M=(0,s.jsx)(ey,{type:"button",variant:"outline",onClick:ei,children:"Cancel"}),B[64]=ei,B[65]=M):M=B[65];let ec=er.isPending?"Updating...":"Update Appointment";return B[66]!==ec||B[67]!==er.isPending?(E=(0,s.jsx)(ey,{type:"submit",className:"medical-button-primary",disabled:er.isPending,children:ec}),B[66]=ec,B[67]=er.isPending,B[68]=E):E=B[68],B[69]!==M||B[70]!==E?(F=(0,s.jsxs)("div",{className:"flex justify-end space-x-3 pt-4 border-t",children:[M,E]}),B[69]=M,B[70]=E,B[71]=F):F=B[71],B[72]!==b||B[73]!==O||B[74]!==F?($=(0,s.jsxs)("form",{onSubmit:b,className:"space-y-6",children:[O,F]}),B[72]=b,B[73]=O,B[74]=F,B[75]=$):$=B[75],B[76]!==H||B[77]!==$?(L=(0,s.jsxs)(tv,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[N,(0,s.jsx)(t$,{...H,children:$})]}),B[76]=H,B[77]=$,B[78]=L):L=B[78],B[79]!==ei||B[80]!==W||B[81]!==L?(z=(0,s.jsx)(tg,{open:W,onOpenChange:ei,children:L}),B[79]=ei,B[80]=W,B[81]=L,B[82]=z):z=B[82],z}function a0(e){let{field:t}=e;return(0,s.jsxs)(tB,{children:[(0,s.jsx)(tV,{children:"Notes"}),(0,s.jsx)(tK,{children:(0,s.jsx)(tT,{placeholder:"Additional notes or special instructions...",className:"min-h-[80px]",value:t.value||"",onChange:e=>t.onChange(e.target.value||null)})}),(0,s.jsx)(tW,{})]})}function a1(e){return(0,s.jsx)(tI,{value:e.id,children:e.name},e.id)}function a2(e){let{field:t}=e;return(0,s.jsxs)(tB,{children:[(0,s.jsx)(tV,{children:"Status *"}),(0,s.jsxs)(tS,{value:t.value,onValueChange:t.onChange,children:[(0,s.jsx)(tK,{children:(0,s.jsx)(tP,{children:(0,s.jsx)(tC,{placeholder:"Select status"})})}),(0,s.jsxs)(tD,{children:[(0,s.jsx)(tI,{value:"scheduled",children:"Scheduled"}),(0,s.jsx)(tI,{value:"confirmed",children:"Confirmed"}),(0,s.jsx)(tI,{value:"in-progress",children:"In Progress"}),(0,s.jsx)(tI,{value:"completed",children:"Completed"}),(0,s.jsx)(tI,{value:"cancelled",children:"Cancelled"}),(0,s.jsx)(tI,{value:"urgent",children:"Urgent"})]})]}),(0,s.jsx)(tW,{})]})}function a4(e){return(0,s.jsx)(tI,{value:e.id,children:e.label},e.id)}function a5(e){let{field:t}=e;return(0,s.jsxs)(tB,{children:[(0,s.jsxs)(tV,{className:"flex items-center space-x-1",children:[(0,s.jsx)(eL.Z,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:"Time *"})]}),(0,s.jsx)(tK,{children:(0,s.jsx)(e1,{type:"time",...t})}),(0,s.jsx)(tW,{})]})}function a3(e){let{field:t}=e;return(0,s.jsxs)(tB,{children:[(0,s.jsxs)(tV,{className:"flex items-center space-x-1",children:[(0,s.jsx)(e_.Z,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:"Date *"})]}),(0,s.jsx)(tK,{children:(0,s.jsx)(e1,{type:"date",value:t.value instanceof Date?t.value.toISOString().split("T")[0]:t.value,onChange:e=>t.onChange(new Date(e.target.value))})}),(0,s.jsx)(tW,{})]})}function a6(e){return(0,s.jsx)(tI,{value:e.id,children:`${e.firstName}${e.lastName?` ${e.lastName}`:""}${e.email?` - ${e.email}`:""}`},e.id)}function a8(e){return{id:String(e.id??e.procedureId??e._id??""),name:e.procedureName??e.procedure_name??String(e.id??e.procedureId??"")}}function a7(e){return{id:String(e.id??e.doctorId??e.userId??""),label:e.displayName??e.name??e.fullName??e.id??""}}function a9(e){return{id:String(e.id??e.patient_id??e.patientId??""),firstName:e.firstName??e.first_name??e.name??"",lastName:e.lastName??e.last_name??"",email:e.email??""}}function se(e){var t,a,r,n,i,c,o,d,m;let x,h,p,f,g,j,y,N,b,w,_,S,C,P,k,A,D,I,T,Z,O,M,E,F,$,R,L,z,B,V,K,W,q,G,H,J,Y=(0,l.c)(88),{patients:Q,isOpen:X,onClose:ee,selectedDate:et}=e;Y[0]!==et?(x=et||new Date,Y[0]=et,Y[1]=x):x=Y[1],Y[2]!==x?(h={defaultValues:{patientId:"",doctorId:"",appointmentDate:x,appointmentTime:"",procedure:"",status:"scheduled",notes:""}},Y[2]=x,Y[3]=h):h=Y[3];let ea=(0,tZ.cI)(h),{data:es,isLoading:er}=aY();Y[4]!==(null==es||null==(t=es.data)?void 0:t.doctors)?(p=(null==es||null==(n=es.data)?void 0:n.doctors)??[],Y[4]=null==es||null==(i=es.data)?void 0:i.doctors,Y[5]=p):p=Y[5];let el=p;Y[6]===Symbol.for("react.memo_cache_sentinel")?(f={page:1,limit:100,status:"all"},Y[6]=f):f=Y[6];let{data:ei,isLoading:ec}=tq(f);Y[7]!==(null==ei||null==(a=ei.data)?void 0:a.patients)?(g=(null==ei||null==(c=ei.data)?void 0:c.patients)??[],Y[7]=null==ei||null==(o=ei.data)?void 0:o.patients,Y[8]=g):g=Y[8];let eo=g,ed=eo.length>0?eo:Q;Y[9]===Symbol.for("react.memo_cache_sentinel")?(j={page:1,limit:100},Y[9]=j):j=Y[9];let{data:em,isLoading:eu}=aQ(j);Y[10]!==(null==em||null==(r=em.data)?void 0:r.procedures)?(y=(null==em||null==(d=em.data)?void 0:d.procedures)??[],Y[10]=null==em||null==(m=em.data)?void 0:m.procedures,Y[11]=y):y=Y[11];let ex=y,eh=function(){let e=(0,u.NL)(),{toast:t}=v();return(0,eO.D)({mutationFn:async e=>{let{data:{session:t}}=await U.auth.getSession();if(!t)throw Error("No authenticated session found");let{data:a,error:s}=await U.functions.invoke("create-appointment",{body:e,headers:{Authorization:`Bearer ${t.access_token}`}});if(s)throw s;return a},onSuccess:a=>(e.invalidateQueries({queryKey:["appointments"]}),t({title:"Appointment Created",description:(null==a?void 0:a.message)||"New appointment has been scheduled."}),a),onError:e=>{console.error("Error adding appointment:",e),t({title:"Error Creating Appointment",description:(null==e?void 0:e.message)||"Failed to create appointment. Please try again.",variant:"destructive"})}})}();Y[12]!==eh||Y[13]!==ex||Y[14]!==ea||Y[15]!==X||Y[16]!==ee?(_=()=>{ea.reset(),ee()},w=tg,P=X,k=_,b=tv,S="max-w-2xl max-h-[90vh] overflow-y-auto",Y[27]===Symbol.for("react.memo_cache_sentinel")?(C=(0,s.jsx)(tN,{children:(0,s.jsxs)(tb,{className:"flex items-center space-x-2 text-xl font-semibold text-professional-dark",children:[(0,s.jsx)(af.Z,{className:"h-5 w-5 text-medical-blue"}),(0,s.jsx)("span",{children:"Schedule New Appointment"})]})}),Y[27]=C):C=Y[27],N=t$,D=ea,A=ea.handleSubmit(e=>{let t=e.doctorId,a=e.procedure,s=ex.find(e=>e.id===a||e.procedureName===a||e.procedure_name===a),r=(null==s?void 0:s.procedureName)??(null==s?void 0:s.procedure_name)??String(a),n=e.appointmentDate instanceof Date?e.appointmentDate.toISOString():String(e.appointmentDate),l={patient:{id:e.patientId},doctor:{id:t},appointmentDate:n,appointmentTime:e.appointmentTime,duration:30,appointmentType:"consultation",reason:null,notes:e.notes||null,status:e.status,procedures:[{id:a,procedureName:r,performedDate:n,status:"planned"}]};eh.mutate(l,{onSuccess:()=>{_()}})}),Y[12]=eh,Y[13]=ex,Y[14]=ea,Y[15]=X,Y[16]=ee,Y[17]=N,Y[18]=b,Y[19]=w,Y[20]=_,Y[21]=S,Y[22]=C,Y[23]=P,Y[24]=k,Y[25]=A,Y[26]=D):(N=Y[17],b=Y[18],w=Y[19],_=Y[20],S=Y[21],C=Y[22],P=Y[23],k=Y[24],A=Y[25],D=Y[26]),Y[28]===Symbol.for("react.memo_cache_sentinel")?(I=(0,s.jsx)(ti,{children:(0,s.jsx)(tc,{className:"text-lg text-medical-blue",children:"Appointment Details"})}),Y[28]=I):I=Y[28],Y[29]!==ed||Y[30]!==ec?(T=e=>{let{field:t}=e;return(0,s.jsxs)(tB,{children:[(0,s.jsxs)(tV,{className:"flex items-center space-x-1",children:[(0,s.jsx)(en.Z,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:"Patient *"})]}),(0,s.jsxs)(tS,{onValueChange:t.onChange,defaultValue:t.value,children:[(0,s.jsx)(tK,{children:(0,s.jsx)(tP,{children:(0,s.jsx)(tC,{placeholder:"Select patient"})})}),(0,s.jsx)(tD,{children:ec?(0,s.jsx)(tI,{value:"__loading-patients",disabled:!0,children:"Loading patients..."}):((null==ed?void 0:ed.length)??0)===0?(0,s.jsx)(tI,{value:"__no-patients",disabled:!0,children:"No patients available"}):ed.map(si)})]}),(0,s.jsx)(tW,{})]})},Y[29]=ed,Y[30]=ec,Y[31]=T):T=Y[31],Y[32]!==ea.control||Y[33]!==T?(Z=(0,s.jsx)(tL,{control:ea.control,name:"patientId",render:T}),Y[32]=ea.control,Y[33]=T,Y[34]=Z):Z=Y[34],Y[35]!==ea.control?(O=(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsx)(tL,{control:ea.control,name:"appointmentDate",render:sl}),(0,s.jsx)(tL,{control:ea.control,name:"appointmentTime",render:sn})]}),Y[35]=ea.control,Y[36]=O):O=Y[36],Y[37]!==el||Y[38]!==er?(M=e=>{let{field:t}=e;return(0,s.jsxs)(tB,{children:[(0,s.jsx)(tV,{children:"Doctor *"}),(0,s.jsxs)(tS,{onValueChange:t.onChange,defaultValue:t.value,children:[(0,s.jsx)(tK,{children:(0,s.jsx)(tP,{children:(0,s.jsx)(tC,{placeholder:"Select doctor"})})}),(0,s.jsx)(tD,{children:er?(0,s.jsx)(tI,{value:"",disabled:!0,children:"Loading doctors..."}):0===el.length?(0,s.jsx)(tI,{value:"",disabled:!0,children:"No doctors available"}):el.map(sr)})]}),(0,s.jsx)(tW,{})]})},Y[37]=el,Y[38]=er,Y[39]=M):M=Y[39],Y[40]!==ea.control||Y[41]!==M?(E=(0,s.jsx)(tL,{control:ea.control,name:"doctorId",render:M}),Y[40]=ea.control,Y[41]=M,Y[42]=E):E=Y[42],Y[43]!==ea.control?(F=(0,s.jsx)(tL,{control:ea.control,name:"status",render:ss}),Y[43]=ea.control,Y[44]=F):F=Y[44],Y[45]!==E||Y[46]!==F?($=(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[E,F]}),Y[45]=E,Y[46]=F,Y[47]=$):$=Y[47],Y[48]!==ex||Y[49]!==eu?(R=e=>{let{field:t}=e;return(0,s.jsxs)(tB,{children:[(0,s.jsx)(tV,{children:"Procedure *"}),(0,s.jsxs)(tS,{onValueChange:t.onChange,defaultValue:t.value,children:[(0,s.jsx)(tK,{children:(0,s.jsx)(tP,{children:(0,s.jsx)(tC,{placeholder:"Select procedure"})})}),(0,s.jsx)(tD,{children:eu?(0,s.jsx)(tI,{value:"__loading-procedures",disabled:!0,children:"Loading procedures..."}):0===ex.length?(0,s.jsx)(tI,{value:"__no-procedures",disabled:!0,children:"No procedures available"}):ex.map(sa)})]}),(0,s.jsx)(tW,{})]})},Y[48]=ex,Y[49]=eu,Y[50]=R):R=Y[50],Y[51]!==ea.control||Y[52]!==R?(L=(0,s.jsx)(tL,{control:ea.control,name:"procedure",render:R}),Y[51]=ea.control,Y[52]=R,Y[53]=L):L=Y[53],Y[54]!==ea.control?(z=(0,s.jsx)(tL,{control:ea.control,name:"notes",render:st}),Y[54]=ea.control,Y[55]=z):z=Y[55],Y[56]!==Z||Y[57]!==O||Y[58]!==$||Y[59]!==L||Y[60]!==z?(B=(0,s.jsxs)(tl,{children:[I,(0,s.jsxs)(td,{className:"space-y-4",children:[Z,O,$,L,z]})]}),Y[56]=Z,Y[57]=O,Y[58]=$,Y[59]=L,Y[60]=z,Y[61]=B):B=Y[61],Y[62]!==_?(V=(0,s.jsx)(ey,{type:"button",variant:"outline",onClick:_,children:"Cancel"}),Y[62]=_,Y[63]=V):V=Y[63];let ep=eh.isPending?"Scheduling...":"Schedule Appointment";return Y[64]!==eh.isPending||Y[65]!==ep?(K=(0,s.jsx)(ey,{type:"submit",className:"medical-button-primary",disabled:eh.isPending,children:ep}),Y[64]=eh.isPending,Y[65]=ep,Y[66]=K):K=Y[66],Y[67]!==V||Y[68]!==K?(W=(0,s.jsxs)("div",{className:"flex justify-end space-x-3 pt-4 border-t",children:[V,K]}),Y[67]=V,Y[68]=K,Y[69]=W):W=Y[69],Y[70]!==B||Y[71]!==W||Y[72]!==A?(q=(0,s.jsxs)("form",{onSubmit:A,className:"space-y-6",children:[B,W]}),Y[70]=B,Y[71]=W,Y[72]=A,Y[73]=q):q=Y[73],Y[74]!==N||Y[75]!==q||Y[76]!==D?(G=(0,s.jsx)(N,{...D,children:q}),Y[74]=N,Y[75]=q,Y[76]=D,Y[77]=G):G=Y[77],Y[78]!==b||Y[79]!==S||Y[80]!==C||Y[81]!==G?(H=(0,s.jsxs)(b,{className:S,children:[C,G]}),Y[78]=b,Y[79]=S,Y[80]=C,Y[81]=G,Y[82]=H):H=Y[82],Y[83]!==w||Y[84]!==P||Y[85]!==k||Y[86]!==H?(J=(0,s.jsx)(w,{open:P,onOpenChange:k,children:H}),Y[83]=w,Y[84]=P,Y[85]=k,Y[86]=H,Y[87]=J):J=Y[87],J}function st(e){let{field:t}=e;return(0,s.jsxs)(tB,{children:[(0,s.jsx)(tV,{children:"Notes"}),(0,s.jsx)(tK,{children:(0,s.jsx)(tT,{placeholder:"Additional notes or special instructions...",className:"min-h-[80px]",value:t.value||"",onChange:e=>t.onChange(e.target.value||null)})}),(0,s.jsx)(tW,{})]})}function sa(e){return(0,s.jsx)(tI,{value:e.id,children:e.procedureName??e.procedure_name??`Procedure ${e.id}`},e.id)}function ss(e){let{field:t}=e;return(0,s.jsxs)(tB,{children:[(0,s.jsx)(tV,{children:"Status *"}),(0,s.jsxs)(tS,{onValueChange:t.onChange,defaultValue:t.value,children:[(0,s.jsx)(tK,{children:(0,s.jsx)(tP,{children:(0,s.jsx)(tC,{placeholder:"Select status"})})}),(0,s.jsxs)(tD,{children:[(0,s.jsx)(tI,{value:"scheduled",children:"Scheduled"}),(0,s.jsx)(tI,{value:"confirmed",children:"Confirmed"}),(0,s.jsx)(tI,{value:"in-progress",children:"In Progress"}),(0,s.jsx)(tI,{value:"completed",children:"Completed"}),(0,s.jsx)(tI,{value:"cancelled",children:"Cancelled"}),(0,s.jsx)(tI,{value:"urgent",children:"Urgent"})]})]}),(0,s.jsx)(tW,{})]})}function sr(e){return(0,s.jsx)(tI,{value:e.id,children:e.displayName??e.name},e.id)}function sn(e){let{field:t}=e;return(0,s.jsxs)(tB,{children:[(0,s.jsxs)(tV,{className:"flex items-center space-x-1",children:[(0,s.jsx)(eL.Z,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:"Time *"})]}),(0,s.jsx)(tK,{children:(0,s.jsx)(e1,{type:"time",...t})}),(0,s.jsx)(tW,{})]})}function sl(e){let{field:t}=e;return(0,s.jsxs)(tB,{children:[(0,s.jsxs)(tV,{className:"flex items-center space-x-1",children:[(0,s.jsx)(e_.Z,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:"Date *"})]}),(0,s.jsx)(tK,{children:(0,s.jsx)(e1,{type:"date",value:t.value instanceof Date?t.value.toISOString().split("T")[0]:t.value,onChange:e=>t.onChange(new Date(e.target.value))})}),(0,s.jsx)(tW,{})]})}function si(e){return(0,s.jsx)(tI,{value:e.id,children:e.firstName&&e.lastName?`${e.firstName} ${e.lastName} - ${e.email??""}`:`${e.name??`${e.email??"Unknown"}`} ${e.email?`- ${e.email}`:""}`},e.id)}function sc(){var e,t;let a,n,i,c,o,d,m,x,h,p,f,g,j,y,N,b,w,_,S,C=(0,l.c)(37);C[0]===Symbol.for("react.memo_cache_sentinel")?(a=(0,eT.WU)(new Date,"yyyy-MM-dd"),C[0]=a):a=C[0],(0,r.useState)(a);let[P,k]=(0,r.useState)(null),[A,D]=(0,r.useState)(!1),[I,T]=(0,r.useState)(!1),{toast:Z}=v();if((0,u.NL)(),C[1]===Symbol.for("react.memo_cache_sentinel")){let e=new Date;n=(0,aP.N)(e).toISOString(),i=(0,ak.V)(e).toISOString(),C[1]=n,C[2]=i}else n=C[1],i=C[2];let O=i;C[3]===Symbol.for("react.memo_cache_sentinel")?(c={start:n,end:O},C[3]=c):c=C[3];let{data:M,isLoading:E,error:F}=(e=c,(0,ew.a)({queryKey:["appointments",e],queryFn:async()=>{let{data:{session:t}}=await U.auth.getSession();if(!t)throw Error("No authenticated session found");let a=new URLSearchParams({start:e.start,end:e.end,...e.view&&{view:e.view},...e.limit&&{limit:e.limit.toString()},...e.status&&e.status.length>0&&{status:e.status.join(",")}}),s=await fetch(`${R}/functions/v1/get-appointments?${a.toString()}`,{method:"GET",headers:{Authorization:`Bearer ${t.access_token}`,"Content-Type":"application/json"}});if(!s.ok)throw Error(`HTTP error! status: ${s.status}`);let r=await s.json();if(!r.success)throw Error(r.error||"Failed to fetch appointments");return r.data},enabled:!!e.start&&!!e.end,staleTime:3e5}));C[4]!==M?(o=void 0===M?[]:M,C[4]=M,C[5]=o):o=C[5];let $=o;C[6]===Symbol.for("react.memo_cache_sentinel")?(d={page:1,limit:200},C[6]=d):d=C[6];let{data:L}=tq(d);C[7]!==L?(m=(null==L||null==(t=L.data)?void 0:t.patients)??(null==L?void 0:L.patients)??[],C[7]=L,C[8]=m):m=C[8];let z=m;C[9]===Symbol.for("react.memo_cache_sentinel")?(x=e=>{k(e),D(!0)},C[9]=x):x=C[9];let B=x;C[10]!==Z?(h=e=>{Z({title:"Create New Appointment",description:`Selected time slot: ${(0,eT.WU)(e.start,"MMM dd, yyyy 'at' h:mm a")}`})},C[10]=Z,C[11]=h):h=C[11];let V=h;if(E){let e;return C[12]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,s.jsx)("div",{className:"text-center",children:"Loading appointments..."})}),C[12]=e):e=C[12],e}if(F){let e;return C[13]!==F.message?(e=(0,s.jsx)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,s.jsxs)("div",{className:"text-center text-red-500",children:["Error loading appointments: ",F.message]})}),C[13]=F.message,C[14]=e):e=C[14],e}return C[15]===Symbol.for("react.memo_cache_sentinel")?(p=(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-semibold text-professional-dark",children:"Appointment Management"}),(0,s.jsx)("p",{className:"text-gray-600 mt-1",children:"Schedule and manage patient appointments with calendar view"})]}),C[15]=p):p=C[15],C[16]===Symbol.for("react.memo_cache_sentinel")?(f=(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-8",children:[p,(0,s.jsxs)(ey,{className:"mt-4 sm:mt-0 medical-button-primary",onClick:()=>T(!0),children:[(0,s.jsx)(tn.Z,{className:"h-4 w-4 mr-2"}),"New Appointment"]})]}),C[16]=f):f=C[16],C[17]!==$||C[18]!==V?(g=(0,s.jsx)(aW,{appointments:$,onEditAppointment:B,onDeleteAppointment:so,onSelectSlot:V}),C[17]=$,C[18]=V,C[19]=g):g=C[19],C[20]!==z?(j=z||[],C[20]=z,C[21]=j):j=C[21],C[22]===Symbol.for("react.memo_cache_sentinel")?(y=()=>T(!1),C[22]=y):y=C[22],C[23]!==I||C[24]!==j?(N=(0,s.jsx)(se,{patients:j,isOpen:I,onClose:y}),C[23]=I,C[24]=j,C[25]=N):N=C[25],C[26]!==z?(b=z||[],C[26]=z,C[27]=b):b=C[27],C[28]===Symbol.for("react.memo_cache_sentinel")?(w=()=>{D(!1),k(null)},C[28]=w):w=C[28],C[29]!==A||C[30]!==P||C[31]!==b?(_=(0,s.jsx)(aX,{appointment:P,patients:b,isOpen:A,onClose:w}),C[29]=A,C[30]=P,C[31]=b,C[32]=_):_=C[32],C[33]!==g||C[34]!==N||C[35]!==_?(S=(0,s.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[f,g,N,_]}),C[33]=g,C[34]=N,C[35]=_,C[36]=S):S=C[36],S}function so(e){confirm("Are you sure you want to delete this appointment?")}var sd=a(8415),sm=a(47453);function su(e){var t,a,r,n,i,c,o,d,m;let x,h,p,f,g,j,y,N,b,w,_,S,C,P,k,A,D,I,T,Z,O,M,E,F,$,R,L,U,z=(0,l.c)(70),{isOpen:B,onClose:V}=e,{toast:K}=v(),W=(0,u.NL)(),{data:q,isLoading:G}=tq(),{data:H,isLoading:J}=aQ(),{data:Y,isLoading:Q}=aY();z[0]!==(null==q||null==(t=q.data)?void 0:t.patients)?(x=(null==q||null==(n=q.data)?void 0:n.patients)||[],z[0]=null==q||null==(i=q.data)?void 0:i.patients,z[1]=x):x=z[1];let X=x;z[2]!==(null==H||null==(a=H.data)?void 0:a.procedures)?(h=(null==H||null==(c=H.data)?void 0:c.procedures)||[],z[2]=null==H||null==(o=H.data)?void 0:o.procedures,z[3]=h):h=z[3];let ee=h;z[4]!==(null==Y||null==(r=Y.data)?void 0:r.doctors)?(p=(null==Y||null==(d=Y.data)?void 0:d.doctors)||[],z[4]=null==Y||null==(m=Y.data)?void 0:m.doctors,z[5]=p):p=z[5];let et=p;z[6]===Symbol.for("react.memo_cache_sentinel")?(f=(0,tO.F)(t2),z[6]=f):f=z[6],z[7]===Symbol.for("react.memo_cache_sentinel")?(g={resolver:f,defaultValues:{patientId:"",procedureName:"",doctorName:"",performedDate:new Date,duration:0,status:"scheduled",description:"",notes:""}},z[7]=g):g=z[7];let ea=(0,tZ.cI)(g);z[8]!==K?(j=()=>{K({title:"Creation Failed",description:"Failed to create the procedure. Please try again.",variant:"destructive"})},z[8]=K,z[9]=j):j=z[9];let es=(0,eO.D)({mutationFn:sN,onSuccess:()=>{W.invalidateQueries({queryKey:["/api/procedures"]}),K({title:"Procedure Created",description:"The procedure has been scheduled successfully."}),el()},onError:j});z[10]!==es?(y=e=>{es.mutate(e)},z[10]=es,z[11]=y):y=z[11];let er=y,el=()=>{ea.reset(),V()};z[12]===Symbol.for("react.memo_cache_sentinel")?(N=(0,s.jsx)(tN,{children:(0,s.jsxs)(tb,{className:"flex items-center space-x-2 text-xl font-semibold text-professional-dark",children:[(0,s.jsx)(sm.Z,{className:"h-5 w-5 text-medical-blue"}),(0,s.jsx)("span",{children:"Add New Procedure"})]})}),z[12]=N):N=z[12],z[13]!==ea||z[14]!==er?(b=ea.handleSubmit(er),z[13]=ea,z[14]=er,z[15]=b):b=z[15],z[16]===Symbol.for("react.memo_cache_sentinel")?(w=(0,s.jsx)(ti,{children:(0,s.jsx)(tc,{className:"text-lg text-medical-blue",children:"Procedure Information"})}),z[16]=w):w=z[16],z[17]!==G||z[18]!==X?(_=e=>{let{field:t}=e;return(0,s.jsxs)(tB,{children:[(0,s.jsxs)(tV,{className:"flex items-center space-x-1",children:[(0,s.jsx)(en.Z,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:"Patient *"})]}),(0,s.jsxs)(tS,{onValueChange:t.onChange,defaultValue:t.value,disabled:G,children:[(0,s.jsx)(tK,{children:(0,s.jsx)(tP,{children:(0,s.jsx)(tC,{placeholder:G?"Loading patients...":"Select patient"})})}),(0,s.jsx)(tD,{children:null==X?void 0:X.map(sv)})]}),(0,s.jsx)(tW,{})]})},z[17]=G,z[18]=X,z[19]=_):_=z[19],z[20]!==ea.control||z[21]!==_?(S=(0,s.jsx)(tL,{control:ea.control,name:"patientId",render:_}),z[20]=ea.control,z[21]=_,z[22]=S):S=z[22],z[23]!==J||z[24]!==ee?(C=e=>{let{field:t}=e;return(0,s.jsxs)(tB,{children:[(0,s.jsx)(tV,{children:"Procedure Type *"}),(0,s.jsxs)(tS,{onValueChange:t.onChange,defaultValue:t.value,disabled:J,children:[(0,s.jsx)(tK,{children:(0,s.jsx)(tP,{children:(0,s.jsx)(tC,{placeholder:J?"Loading procedures...":"Select procedure type"})})}),(0,s.jsx)(tD,{children:null==ee?void 0:ee.map(sy)})]}),(0,s.jsx)(tW,{})]})},z[23]=J,z[24]=ee,z[25]=C):C=z[25],z[26]!==ea.control||z[27]!==C?(P=(0,s.jsx)(tL,{control:ea.control,name:"procedureName",render:C}),z[26]=ea.control,z[27]=C,z[28]=P):P=z[28],z[29]!==et||z[30]!==Q?(k=e=>{let{field:t}=e;return(0,s.jsxs)(tB,{children:[(0,s.jsx)(tV,{children:"Doctor *"}),(0,s.jsxs)(tS,{onValueChange:t.onChange,defaultValue:t.value,disabled:Q,children:[(0,s.jsx)(tK,{children:(0,s.jsx)(tP,{children:(0,s.jsx)(tC,{placeholder:Q?"Loading doctors...":"Select doctor"})})}),(0,s.jsx)(tD,{children:null==et?void 0:et.map(sj)})]}),(0,s.jsx)(tW,{})]})},z[29]=et,z[30]=Q,z[31]=k):k=z[31],z[32]!==ea.control||z[33]!==k?(A=(0,s.jsx)(tL,{control:ea.control,name:"doctorName",render:k}),z[32]=ea.control,z[33]=k,z[34]=A):A=z[34],z[35]!==ea.control?(D=(0,s.jsx)(tL,{control:ea.control,name:"status",render:sg}),z[35]=ea.control,z[36]=D):D=z[36],z[37]!==A||z[38]!==D?(I=(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[A,D]}),z[37]=A,z[38]=D,z[39]=I):I=z[39],z[40]!==ea.control?(T=(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsx)(tL,{control:ea.control,name:"performedDate",render:sf}),(0,s.jsx)(tL,{control:ea.control,name:"duration",render:sp})]}),Z=(0,s.jsx)(tL,{control:ea.control,name:"description",render:sh}),O=(0,s.jsx)(tL,{control:ea.control,name:"notes",render:sx}),z[40]=ea.control,z[41]=T,z[42]=Z,z[43]=O):(T=z[41],Z=z[42],O=z[43]),z[44]!==S||z[45]!==P||z[46]!==I||z[47]!==T||z[48]!==Z||z[49]!==O?(M=(0,s.jsxs)(tl,{children:[w,(0,s.jsxs)(td,{className:"space-y-4",children:[S,P,I,T,Z,O]})]}),z[44]=S,z[45]=P,z[46]=I,z[47]=T,z[48]=Z,z[49]=O,z[50]=M):M=z[50],z[51]!==el?(E=(0,s.jsx)(ey,{type:"button",variant:"outline",onClick:el,children:"Cancel"}),z[51]=el,z[52]=E):E=z[52];let ei=es.isPending?"Adding...":"Add Procedure";return z[53]!==es.isPending||z[54]!==ei?(F=(0,s.jsx)(ey,{type:"submit",className:"medical-button-primary",disabled:es.isPending,children:ei}),z[53]=es.isPending,z[54]=ei,z[55]=F):F=z[55],z[56]!==E||z[57]!==F?($=(0,s.jsxs)("div",{className:"flex justify-end space-x-3 pt-4 border-t",children:[E,F]}),z[56]=E,z[57]=F,z[58]=$):$=z[58],z[59]!==M||z[60]!==$||z[61]!==b?(R=(0,s.jsxs)("form",{onSubmit:b,className:"space-y-6",children:[M,$]}),z[59]=M,z[60]=$,z[61]=b,z[62]=R):R=z[62],z[63]!==ea||z[64]!==R?(L=(0,s.jsxs)(tv,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[N,(0,s.jsx)(t$,{...ea,children:R})]}),z[63]=ea,z[64]=R,z[65]=L):L=z[65],z[66]!==el||z[67]!==B||z[68]!==L?(U=(0,s.jsx)(tg,{open:B,onOpenChange:el,children:L}),z[66]=el,z[67]=B,z[68]=L,z[69]=U):U=z[69],U}function sx(e){let{field:t}=e;return(0,s.jsxs)(tB,{children:[(0,s.jsx)(tV,{children:"Additional Notes"}),(0,s.jsx)(tK,{children:(0,s.jsx)(tT,{placeholder:"Any additional notes about the procedure...",className:"min-h-[80px]",value:t.value||"",onChange:e=>t.onChange(e.target.value||null)})}),(0,s.jsx)(tW,{})]})}function sh(e){let{field:t}=e;return(0,s.jsxs)(tB,{children:[(0,s.jsx)(tV,{children:"Description"}),(0,s.jsx)(tK,{children:(0,s.jsx)(tT,{placeholder:"Description of the procedure...",className:"min-h-[80px]",value:t.value||"",onChange:e=>t.onChange(e.target.value||null)})}),(0,s.jsx)(tW,{})]})}function sp(e){let{field:t}=e;return(0,s.jsxs)(tB,{children:[(0,s.jsxs)(tV,{className:"flex items-center space-x-1",children:[(0,s.jsx)(eL.Z,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:"Duration (minutes)"})]}),(0,s.jsx)(tK,{children:(0,s.jsx)(e1,{type:"number",placeholder:"60",...t,onChange:e=>t.onChange(parseInt(e.target.value)||0)})}),(0,s.jsx)(tW,{})]})}function sf(e){let{field:t}=e;return(0,s.jsxs)(tB,{children:[(0,s.jsxs)(tV,{className:"flex items-center space-x-1",children:[(0,s.jsx)(e_.Z,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:"Procedure Date *"})]}),(0,s.jsx)(tK,{children:(0,s.jsx)(e1,{type:"date",value:t.value instanceof Date?t.value.toISOString().split("T")[0]:t.value,onChange:e=>t.onChange(new Date(e.target.value))})}),(0,s.jsx)(tW,{})]})}function sg(e){let{field:t}=e;return(0,s.jsxs)(tB,{children:[(0,s.jsx)(tV,{children:"Status *"}),(0,s.jsxs)(tS,{onValueChange:t.onChange,defaultValue:t.value,children:[(0,s.jsx)(tK,{children:(0,s.jsx)(tP,{children:(0,s.jsx)(tC,{placeholder:"Select status"})})}),(0,s.jsxs)(tD,{children:[(0,s.jsx)(tI,{value:"scheduled",children:"Scheduled"}),(0,s.jsx)(tI,{value:"in-progress",children:"In Progress"}),(0,s.jsx)(tI,{value:"completed",children:"Completed"}),(0,s.jsx)(tI,{value:"cancelled",children:"Cancelled"})]})]}),(0,s.jsx)(tW,{})]})}function sj(e){return(0,s.jsx)(tI,{value:e.name,children:e.displayName??e.name},e.id)}function sy(e){return(0,s.jsx)(tI,{value:e.procedureName,children:e.procedureName},e.id)}function sv(e){return(0,s.jsxs)(tI,{value:e.id,children:[e.name," - ",e.email]},e.id)}async function sN(e){return(await d("POST","/api/procedures",e)).json()}function sb(e){let t,a,r,n,i,c,o,m,x,h,p,f,g,j,y,N,b,w,_,S,C,P,k,A,D,I,T=(0,l.c)(73),{procedure:Z,patients:O,isOpen:M,onClose:E}=e,{toast:F}=v(),$=(0,u.NL)();T[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,tO.F)(t2),T[0]=t):t=T[0];let R=(null==Z?void 0:Z.patientId)||"",L=(null==Z?void 0:Z.procedureName)||"",U=(null==Z?void 0:Z.doctorName)||"";T[1]!==Z?(a=Z?new Date(Z.performedDate):new Date,T[1]=Z,T[2]=a):a=T[2];let z=(null==Z?void 0:Z.duration)||0,B=(null==Z?void 0:Z.status)||"scheduled",V=(null==Z?void 0:Z.description)||"",K=(null==Z?void 0:Z.notes)||"";T[3]!==R||T[4]!==L||T[5]!==U||T[6]!==a||T[7]!==z||T[8]!==B||T[9]!==V||T[10]!==K?(r={resolver:t,defaultValues:{patientId:R,procedureName:L,doctorName:U,performedDate:a,duration:z,status:B,description:V,notes:K}},T[3]=R,T[4]=L,T[5]=U,T[6]=a,T[7]=z,T[8]=B,T[9]=V,T[10]=K,T[11]=r):r=T[11];let W=(0,tZ.cI)(r);T[12]!==(null==Z?void 0:Z.id)?(n=async e=>(await d("PATCH",`/api/procedures/${null==Z?void 0:Z.id}`,e)).json(),T[12]=null==Z?void 0:Z.id,T[13]=n):n=T[13],T[14]!==E||T[15]!==$||T[16]!==F?(i=()=>{$.invalidateQueries({queryKey:["/api/procedures"]}),F({title:"Procedure Updated",description:"The procedure has been updated successfully."}),E()},T[14]=E,T[15]=$,T[16]=F,T[17]=i):i=T[17],T[18]!==F?(c=()=>{F({title:"Update Failed",description:"Failed to update the procedure. Please try again.",variant:"destructive"})},T[18]=F,T[19]=c):c=T[19],T[20]!==n||T[21]!==i||T[22]!==c?(o={mutationFn:n,onSuccess:i,onError:c},T[20]=n,T[21]=i,T[22]=c,T[23]=o):o=T[23];let q=(0,eO.D)(o);T[24]!==q?(m=e=>{q.mutate(e)},T[24]=q,T[25]=m):m=T[25];let G=m;T[26]!==W||T[27]!==E?(x=()=>{W.reset(),E()},T[26]=W,T[27]=E,T[28]=x):x=T[28];let H=x;if(!Z)return null;T[29]===Symbol.for("react.memo_cache_sentinel")?(h=(0,s.jsx)(tN,{children:(0,s.jsxs)(tb,{className:"flex items-center space-x-2 text-xl font-semibold text-professional-dark",children:[(0,s.jsx)(sm.Z,{className:"h-5 w-5 text-medical-blue"}),(0,s.jsx)("span",{children:"Edit Procedure"})]})}),T[29]=h):h=T[29],T[30]!==W||T[31]!==G?(p=W.handleSubmit(G),T[30]=W,T[31]=G,T[32]=p):p=T[32],T[33]===Symbol.for("react.memo_cache_sentinel")?(f=(0,s.jsx)(ti,{children:(0,s.jsx)(tc,{className:"text-lg text-medical-blue",children:"Procedure Information"})}),T[33]=f):f=T[33],T[34]!==O?(g=e=>{let{field:t}=e;return(0,s.jsxs)(tB,{children:[(0,s.jsxs)(tV,{className:"flex items-center space-x-1",children:[(0,s.jsx)(en.Z,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:"Patient *"})]}),(0,s.jsxs)(tS,{onValueChange:t.onChange,defaultValue:t.value,children:[(0,s.jsx)(tK,{children:(0,s.jsx)(tP,{children:(0,s.jsx)(tC,{placeholder:"Select patient"})})}),(0,s.jsx)(tD,{children:null==O?void 0:O.map(sD)})]}),(0,s.jsx)(tW,{})]})},T[34]=O,T[35]=g):g=T[35],T[36]!==W.control||T[37]!==g?(j=(0,s.jsx)(tL,{control:W.control,name:"patientId",render:g}),T[36]=W.control,T[37]=g,T[38]=j):j=T[38],T[39]!==W.control?(y=(0,s.jsx)(tL,{control:W.control,name:"procedureName",render:sA}),T[39]=W.control,T[40]=y):y=T[40],T[41]!==W.control?(N=(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsx)(tL,{control:W.control,name:"doctorName",render:sk}),(0,s.jsx)(tL,{control:W.control,name:"status",render:sP})]}),T[41]=W.control,T[42]=N):N=T[42],T[43]!==W.control?(b=(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsx)(tL,{control:W.control,name:"performedDate",render:sC}),(0,s.jsx)(tL,{control:W.control,name:"duration",render:sS})]}),w=(0,s.jsx)(tL,{control:W.control,name:"description",render:s_}),_=(0,s.jsx)(tL,{control:W.control,name:"notes",render:sw}),T[43]=W.control,T[44]=b,T[45]=w,T[46]=_):(b=T[44],w=T[45],_=T[46]),T[47]!==j||T[48]!==y||T[49]!==N||T[50]!==b||T[51]!==w||T[52]!==_?(S=(0,s.jsxs)(tl,{children:[f,(0,s.jsxs)(td,{className:"space-y-4",children:[j,y,N,b,w,_]})]}),T[47]=j,T[48]=y,T[49]=N,T[50]=b,T[51]=w,T[52]=_,T[53]=S):S=T[53],T[54]!==H?(C=(0,s.jsx)(ey,{type:"button",variant:"outline",onClick:H,children:"Cancel"}),T[54]=H,T[55]=C):C=T[55];let J=q.isPending?"Updating...":"Update Procedure";return T[56]!==J||T[57]!==q.isPending?(P=(0,s.jsx)(ey,{type:"submit",className:"medical-button-primary",disabled:q.isPending,children:J}),T[56]=J,T[57]=q.isPending,T[58]=P):P=T[58],T[59]!==C||T[60]!==P?(k=(0,s.jsxs)("div",{className:"flex justify-end space-x-3 pt-4 border-t",children:[C,P]}),T[59]=C,T[60]=P,T[61]=k):k=T[61],T[62]!==p||T[63]!==S||T[64]!==k?(A=(0,s.jsxs)("form",{onSubmit:p,className:"space-y-6",children:[S,k]}),T[62]=p,T[63]=S,T[64]=k,T[65]=A):A=T[65],T[66]!==W||T[67]!==A?(D=(0,s.jsxs)(tv,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[h,(0,s.jsx)(t$,{...W,children:A})]}),T[66]=W,T[67]=A,T[68]=D):D=T[68],T[69]!==H||T[70]!==M||T[71]!==D?(I=(0,s.jsx)(tg,{open:M,onOpenChange:H,children:D}),T[69]=H,T[70]=M,T[71]=D,T[72]=I):I=T[72],I}function sw(e){let{field:t}=e;return(0,s.jsxs)(tB,{children:[(0,s.jsx)(tV,{children:"Additional Notes"}),(0,s.jsx)(tK,{children:(0,s.jsx)(tT,{placeholder:"Any additional notes about the procedure...",className:"min-h-[80px]",value:t.value||"",onChange:e=>t.onChange(e.target.value||null)})}),(0,s.jsx)(tW,{})]})}function s_(e){let{field:t}=e;return(0,s.jsxs)(tB,{children:[(0,s.jsx)(tV,{children:"Description"}),(0,s.jsx)(tK,{children:(0,s.jsx)(tT,{placeholder:"Description of the procedure...",className:"min-h-[80px]",value:t.value||"",onChange:e=>t.onChange(e.target.value||null)})}),(0,s.jsx)(tW,{})]})}function sS(e){let{field:t}=e;return(0,s.jsxs)(tB,{children:[(0,s.jsxs)(tV,{className:"flex items-center space-x-1",children:[(0,s.jsx)(eL.Z,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:"Duration (minutes)"})]}),(0,s.jsx)(tK,{children:(0,s.jsx)(e1,{type:"number",placeholder:"60",...t,onChange:e=>t.onChange(parseInt(e.target.value)||0)})}),(0,s.jsx)(tW,{})]})}function sC(e){let{field:t}=e;return(0,s.jsxs)(tB,{children:[(0,s.jsxs)(tV,{className:"flex items-center space-x-1",children:[(0,s.jsx)(e_.Z,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:"Procedure Date *"})]}),(0,s.jsx)(tK,{children:(0,s.jsx)(e1,{type:"date",value:t.value instanceof Date?t.value.toISOString().split("T")[0]:t.value,onChange:e=>t.onChange(new Date(e.target.value))})}),(0,s.jsx)(tW,{})]})}function sP(e){let{field:t}=e;return(0,s.jsxs)(tB,{children:[(0,s.jsx)(tV,{children:"Status *"}),(0,s.jsxs)(tS,{onValueChange:t.onChange,defaultValue:t.value,children:[(0,s.jsx)(tK,{children:(0,s.jsx)(tP,{children:(0,s.jsx)(tC,{placeholder:"Select status"})})}),(0,s.jsxs)(tD,{children:[(0,s.jsx)(tI,{value:"scheduled",children:"Scheduled"}),(0,s.jsx)(tI,{value:"in-progress",children:"In Progress"}),(0,s.jsx)(tI,{value:"completed",children:"Completed"}),(0,s.jsx)(tI,{value:"cancelled",children:"Cancelled"})]})]}),(0,s.jsx)(tW,{})]})}function sk(e){let{field:t}=e;return(0,s.jsxs)(tB,{children:[(0,s.jsx)(tV,{children:"Doctor *"}),(0,s.jsxs)(tS,{onValueChange:t.onChange,defaultValue:t.value,children:[(0,s.jsx)(tK,{children:(0,s.jsx)(tP,{children:(0,s.jsx)(tC,{placeholder:"Select doctor"})})}),(0,s.jsxs)(tD,{children:[(0,s.jsx)(tI,{value:"Dr. Sarah Chen",children:"Dr. Sarah Chen"}),(0,s.jsx)(tI,{value:"Dr. Michael Rodriguez",children:"Dr. Michael Rodriguez"}),(0,s.jsx)(tI,{value:"Dr. Emily Johnson",children:"Dr. Emily Johnson"}),(0,s.jsx)(tI,{value:"Dr. David Kim",children:"Dr. David Kim"}),(0,s.jsx)(tI,{value:"Dr. Lisa Wang",children:"Dr. Lisa Wang"})]})]}),(0,s.jsx)(tW,{})]})}function sA(e){let{field:t}=e;return(0,s.jsxs)(tB,{children:[(0,s.jsx)(tV,{children:"Procedure Type *"}),(0,s.jsxs)(tS,{onValueChange:t.onChange,defaultValue:t.value,children:[(0,s.jsx)(tK,{children:(0,s.jsx)(tP,{children:(0,s.jsx)(tC,{placeholder:"Select procedure type"})})}),(0,s.jsxs)(tD,{children:[(0,s.jsx)(tI,{value:"Cataract Surgery",children:"Cataract Surgery"}),(0,s.jsx)(tI,{value:"LASIK Surgery",children:"LASIK Surgery"}),(0,s.jsx)(tI,{value:"Retinal Detachment Repair",children:"Retinal Detachment Repair"}),(0,s.jsx)(tI,{value:"Glaucoma Surgery",children:"Glaucoma Surgery"}),(0,s.jsx)(tI,{value:"Corneal Transplant",children:"Corneal Transplant"}),(0,s.jsx)(tI,{value:"Vitrectomy",children:"Vitrectomy"}),(0,s.jsx)(tI,{value:"Macular Degeneration Treatment",children:"Macular Degeneration Treatment"}),(0,s.jsx)(tI,{value:"Diabetic Retinopathy Treatment",children:"Diabetic Retinopathy Treatment"}),(0,s.jsx)(tI,{value:"Ptosis Repair",children:"Ptosis Repair"}),(0,s.jsx)(tI,{value:"Chalazion Removal",children:"Chalazion Removal"})]})]}),(0,s.jsx)(tW,{})]})}function sD(e){return(0,s.jsxs)(tI,{value:e.id,children:[e.firstName," ",e.lastName," - ",e.email]},e.id)}function sI(){var e,t,a;let n,i,c,o,d,m,x,h,p,f,g,j,y,N,b,w,_,S,C,P=(0,l.c)(41),[k,A]=(0,r.useState)(null),[D,I]=(0,r.useState)(!1),[T,Z]=(0,r.useState)(!1),{toast:O}=v(),M=(0,u.NL)(),{data:E,isLoading:F}=aQ();P[0]!==(null==E||null==(e=E.data)?void 0:e.procedures)?(n=(null==E||null==(t=E.data)?void 0:t.procedures)||[],P[0]=null==E||null==(a=E.data)?void 0:a.procedures,P[1]=n):n=P[1];let $=n;P[2]===Symbol.for("react.memo_cache_sentinel")?(i={queryKey:["/api/patients"]},P[2]=i):i=P[2];let{data:R}=(0,ew.a)(i);P[3]!==R?(c=e=>{let t=null==R?void 0:R.find(t=>t.id===e);return t?`${t.firstName} ${t.lastName}`:"Unknown Patient"},P[3]=R,P[4]=c):c=P[4];let L=c;P[5]!==M||P[6]!==O?(o=()=>{M.invalidateQueries({queryKey:["/api/procedures"]}),O({title:"Procedure Deleted",description:"The procedure has been deleted successfully."})},P[5]=M,P[6]=O,P[7]=o):o=P[7],P[8]!==O?(d=()=>{O({title:"Delete Failed",description:"Failed to delete the procedure. Please try again.",variant:"destructive"})},P[8]=O,P[9]=d):d=P[9],P[10]!==o||P[11]!==d?(m={mutationFn:sT,onSuccess:o,onError:d},P[10]=o,P[11]=d,P[12]=m):m=P[12];let U=(0,eO.D)(m);P[13]===Symbol.for("react.memo_cache_sentinel")?(x=e=>{A(e),Z(!0)},P[13]=x):x=P[13];let z=x;P[14]!==U?(h=e=>{confirm("Are you sure you want to delete this procedure?")&&U.mutate(e)},P[14]=U,P[15]=h):h=P[15];let B=h;if(F){let e;return P[16]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,s.jsx)("div",{className:"text-center",children:"Loading procedures..."})}),P[16]=e):e=P[16],e}return P[17]===Symbol.for("react.memo_cache_sentinel")?(p=(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-semibold text-professional-dark",children:"Procedure Management"}),(0,s.jsx)("p",{className:"text-gray-600 mt-1",children:"Track and manage medical procedures"})]}),P[17]=p):p=P[17],P[18]===Symbol.for("react.memo_cache_sentinel")?(f=(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-8",children:[p,(0,s.jsxs)(ey,{className:"mt-4 sm:mt-0 medical-button-primary",onClick:()=>I(!0),children:[(0,s.jsx)(tn.Z,{className:"h-4 w-4 mr-2"}),"New Procedure"]})]}),P[18]=f):f=P[18],P[19]===Symbol.for("react.memo_cache_sentinel")?(g=(0,s.jsx)("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:(0,s.jsxs)(ey,{variant:"outline",children:[(0,s.jsx)(sd.Z,{className:"h-4 w-4 mr-2"}),"Filter by Status"]})}),P[19]=g):g=P[19],P[20]!==L||P[21]!==B||P[22]!==$?(j=(null==$?void 0:$.length)===0?(0,s.jsx)(tl,{children:(0,s.jsxs)(td,{className:"text-center py-8",children:[(0,s.jsx)(af.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-gray-500",children:"No procedures recorded yet."})]})}):(0,s.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:null==$?void 0:$.map(e=>{var t;return(0,s.jsxs)(tl,{className:"hover:shadow-md transition-shadow",children:[(0,s.jsx)(ti,{children:(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(tc,{className:"text-lg",children:e.procedureName}),(0,s.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:["Patient: ",e.patient?e.patient.name:L((null==(t=e.patient)?void 0:t.id)||"")]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(tu,{className:function(e){switch(e){case"completed":return"bg-green-100 text-green-800";case"in-progress":return"bg-blue-100 text-blue-800";case"scheduled":return"bg-yellow-100 text-yellow-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}}(e.status),children:e.status.charAt(0).toUpperCase()+e.status.slice(1)}),(0,s.jsx)(ey,{variant:"outline",size:"sm",onClick:()=>z(e),children:(0,s.jsx)(aL.Z,{className:"h-3 w-3"})}),(0,s.jsx)(ey,{variant:"outline",size:"sm",onClick:()=>B(e.id),children:(0,s.jsx)(aU.Z,{className:"h-3 w-3"})})]})]})}),(0,s.jsx)(td,{children:(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,s.jsx)("span",{className:"text-gray-500",children:"Doctor:"}),(0,s.jsx)("span",{children:e.doctorName})]}),(0,s.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,s.jsx)("span",{className:"text-gray-500",children:"Date:"}),(0,s.jsx)("span",{children:e.performedDate?(0,eT.WU)(new Date(e.performedDate),"MMM dd, yyyy"):"N/A"})]}),e.duration&&(0,s.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,s.jsx)("span",{className:"text-gray-500",children:"Duration:"}),(0,s.jsxs)("span",{children:[e.duration," minutes"]})]}),e.description&&(0,s.jsxs)("div",{className:"mt-3",children:[(0,s.jsx)("p",{className:"text-sm text-gray-500 font-medium",children:"Description:"}),(0,s.jsx)("p",{className:"text-sm text-gray-700 mt-1",children:e.description})]}),e.notes&&(0,s.jsxs)("div",{className:"mt-3",children:[(0,s.jsx)("p",{className:"text-sm text-gray-500 font-medium",children:"Notes:"}),(0,s.jsx)("p",{className:"text-sm text-gray-700 mt-1",children:e.notes})]})]})})]},e.id)})}),P[20]=L,P[21]=B,P[22]=$,P[23]=j):j=P[23],P[24]!==R?(y=R||[],P[24]=R,P[25]=y):y=P[25],P[26]===Symbol.for("react.memo_cache_sentinel")?(N=()=>I(!1),P[26]=N):N=P[26],P[27]!==D||P[28]!==y?(b=(0,s.jsx)(su,{patients:y,isOpen:D,onClose:N}),P[27]=D,P[28]=y,P[29]=b):b=P[29],P[30]!==R?(w=R||[],P[30]=R,P[31]=w):w=P[31],P[32]===Symbol.for("react.memo_cache_sentinel")?(_=()=>{Z(!1),A(null)},P[32]=_):_=P[32],P[33]!==T||P[34]!==k||P[35]!==w?(S=(0,s.jsx)(sb,{procedure:k,patients:w,isOpen:T,onClose:_}),P[33]=T,P[34]=k,P[35]=w,P[36]=S):S=P[36],P[37]!==j||P[38]!==b||P[39]!==S?(C=(0,s.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[f,g,j,b,S]}),P[37]=j,P[38]=b,P[39]=S,P[40]=C):C=P[40],C}async function sT(e){return(await d("DELETE",`/api/procedures/${e}`)).json()}function sZ(){var e,t;let a,n,i,c,o,d,m,x,h,p,f,g,j,y,N,b,w,_,S,C,P,k,A,D,I,T=(0,l.c)(49),[,Z]=(0,r.useState)(null),[O,M]=(0,r.useState)(!1),{toast:E}=v(),F=(0,u.NL)();T[0]===Symbol.for("react.memo_cache_sentinel")?(a={queryKey:["/api/ai-diagnoses"]},T[0]=a):a=T[0];let{data:$,isLoading:R}=(0,ew.a)(a);T[1]===Symbol.for("react.memo_cache_sentinel")?(n={queryKey:["/api/patients"]},T[1]=n):n=T[1];let{data:L}=(0,ew.a)(n);T[2]!==F||T[3]!==E?(i=()=>{F.invalidateQueries({queryKey:["/api/ai-diagnoses"]}),Z(null),E({title:"Analysis Complete",description:"AI diagnosis has been generated successfully."})},T[2]=F,T[3]=E,T[4]=i):i=T[4],T[5]!==E?(c=()=>{E({title:"Analysis Failed",description:"Failed to analyze the image. Please try again.",variant:"destructive"})},T[5]=E,T[6]=c):c=T[6],T[7]!==i||T[8]!==c?(o={mutationFn:sM,onSuccess:i,onError:c},T[7]=i,T[8]=c,T[9]=o):o=T[9];let U=(0,eO.D)(o);T[10]===Symbol.for("react.memo_cache_sentinel")?(d=e=>{e.preventDefault(),e.stopPropagation(),"dragenter"===e.type||"dragover"===e.type?M(!0):"dragleave"===e.type&&M(!1)},T[10]=d):d=T[10];let z=d;T[11]!==U||T[12]!==(null==L||null==(e=L[0])?void 0:e.id)||T[13]!==E?(m=e=>{e.preventDefault(),e.stopPropagation(),M(!1);let t=e.dataTransfer.files;t&&t[0]&&x(t[0])},x=e=>{var t;if(!e.type.startsWith("image/"))return void E({title:"Invalid File Type",description:"Please upload an image file (PNG, JPG, JPEG).",variant:"destructive"});Z(e);let a=(null==L||null==(t=L[0])?void 0:t.id)||"mock-patient-id",s=URL.createObjectURL(e);U.mutate({patientId:a,imageUrl:s})},T[11]=U,T[12]=null==L||null==(t=L[0])?void 0:t.id,T[13]=E,T[14]=m,T[15]=x):(m=T[14],x=T[15]),T[16]!==x?(h=e=>{var t;let a=null==(t=e.target.files)?void 0:t[0];a&&x(a)},T[16]=x,T[17]=h):h=T[17];let B=h;T[18]!==L?(p=e=>{let t=null==L?void 0:L.find(t=>t.id===e);return t?`${t.firstName} ${t.lastName}`:"Unknown Patient"},T[18]=L,T[19]=p):p=T[19];let V=p;if(R){let e;return T[20]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,s.jsx)("div",{className:"text-center",children:"Loading AI diagnoses..."})}),T[20]=e):e=T[20],e}T[21]===Symbol.for("react.memo_cache_sentinel")?(f=(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,s.jsx)("div",{className:"w-8 h-8 bg-diagnostic-purple/10 rounded-lg flex items-center justify-center",children:(0,s.jsx)(eC.Z,{className:"text-diagnostic-purple"})}),(0,s.jsx)("h1",{className:"text-2xl font-semibold text-professional-dark",children:"AI Fundus Analysis"}),(0,s.jsx)(tu,{variant:"secondary",className:"bg-diagnostic-purple/10 text-diagnostic-purple",children:"BETA"})]}),(0,s.jsx)("p",{className:"text-gray-600",children:"Advanced AI-powered analysis for early detection of diabetic retinopathy, glaucoma, and macular degeneration"})]}),T[21]=f):f=T[21],T[22]===Symbol.for("react.memo_cache_sentinel")?(g=(0,s.jsx)(ti,{children:(0,s.jsxs)(tc,{className:"flex items-center space-x-2",children:[(0,s.jsx)(eF.Z,{className:"h-5 w-5"}),(0,s.jsx)("span",{children:"Upload Fundus Image"})]})}),T[22]=g):g=T[22];let K=`border-2 border-dashed rounded-lg p-8 text-center transition-colors ${O?"border-diagnostic-purple bg-diagnostic-purple/5":"border-gray-300 hover:border-diagnostic-purple"}`;T[23]!==U.isPending||T[24]!==B?(j=(0,s.jsx)("input",{type:"file",id:"fundus-upload",className:"hidden",accept:"image/*",onChange:B,disabled:U.isPending}),T[23]=U.isPending,T[24]=B,T[25]=j):j=T[25],T[26]===Symbol.for("react.memo_cache_sentinel")?(y=(0,s.jsx)("div",{className:"w-16 h-16 bg-diagnostic-purple/10 rounded-full flex items-center justify-center mx-auto",children:(0,s.jsx)(eF.Z,{className:"h-8 w-8 text-diagnostic-purple"})}),T[26]=y):y=T[26];let W=U.isPending?"Analyzing image...":"Click to upload or drag and drop";return T[27]!==W?(N=(0,s.jsx)("p",{className:"text-gray-600 font-medium",children:W}),T[27]=W,T[28]=N):N=T[28],T[29]===Symbol.for("react.memo_cache_sentinel")?(b=(0,s.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"PNG, JPG, JPEG up to 10MB"}),T[29]=b):b=T[29],T[30]!==N?(w=(0,s.jsx)("label",{htmlFor:"fundus-upload",className:"cursor-pointer",children:(0,s.jsxs)("div",{className:"space-y-4",children:[y,(0,s.jsxs)("div",{children:[N,b]})]})}),T[30]=N,T[31]=w):w=T[31],T[32]!==m||T[33]!==K||T[34]!==j||T[35]!==w?(_=(0,s.jsxs)("div",{className:K,onDragEnter:z,onDragLeave:z,onDragOver:z,onDrop:m,children:[j,w]}),T[32]=m,T[33]=K,T[34]=j,T[35]=w,T[36]=_):_=T[36],T[37]===Symbol.for("react.memo_cache_sentinel")?(S=(0,s.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[(0,s.jsx)(e$.Z,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:"94% accuracy rate"})]}),T[37]=S):S=T[37],T[38]===Symbol.for("react.memo_cache_sentinel")?(C=(0,s.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[(0,s.jsx)(eC.Z,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:"AI Model v2.1"})]}),T[38]=C):C=T[38],T[39]===Symbol.for("react.memo_cache_sentinel")?(P=(0,s.jsxs)("div",{className:"mt-6 space-y-3",children:[S,C,(0,s.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[(0,s.jsx)(tt.Z,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:"Instant results"})]})]}),T[39]=P):P=T[39],T[40]!==_?(k=(0,s.jsx)("div",{className:"lg:col-span-1",children:(0,s.jsxs)(tl,{className:"h-fit",children:[g,(0,s.jsxs)(td,{children:[_,P]})]})}),T[40]=_,T[41]=k):k=T[41],T[42]===Symbol.for("react.memo_cache_sentinel")?(A=(0,s.jsx)(ti,{children:(0,s.jsx)(tc,{children:"Analysis Results"})}),T[42]=A):A=T[42],T[43]!==$||T[44]!==V?(D=(0,s.jsx)("div",{className:"lg:col-span-2",children:(0,s.jsxs)(tl,{children:[A,(0,s.jsx)(td,{children:(null==$?void 0:$.length)===0?(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)(eC.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-gray-500",children:"No AI diagnoses available yet."}),(0,s.jsx)("p",{className:"text-sm text-gray-400 mt-2",children:"Upload a fundus image to get started."})]}):(0,s.jsx)("div",{className:"space-y-4",children:null==$?void 0:$.map(e=>(0,s.jsxs)("div",{className:"border rounded-lg p-4 hover:shadow-sm transition-shadow",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h3",{className:"font-semibold text-professional-dark",children:V(e.patientId)}),(0,s.jsx)("p",{className:"text-gray-600 mt-1",children:e.diagnosis})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsx)(tu,{className:function(e){switch(e){case"normal":return"bg-green-100 text-green-800";case"mild":return"bg-yellow-100 text-yellow-800";case"moderate":return"bg-orange-100 text-orange-800";case"severe":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}}(e.severity),children:e.severity.charAt(0).toUpperCase()+e.severity.slice(1)}),(0,s.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:[e.confidence,"% confidence"]})]})]}),e.recommendations&&e.recommendations.length>0&&(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Recommendations:"}),(0,s.jsx)("ul",{className:"list-disc list-inside space-y-1",children:e.recommendations.map(sO)})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[(0,s.jsxs)("span",{children:["Analyzed by ",e.analyzedBy]}),(0,s.jsx)("span",{children:(0,eT.WU)(new Date(e.createdAt),"MMM dd, yyyy HH:mm")})]}),!e.reviewedByDoctor&&(0,s.jsx)("div",{className:"mt-3 pt-3 border-t",children:(0,s.jsx)(ey,{size:"sm",variant:"outline",children:"Review & Approve"})})]},e.id))})})]})}),T[43]=$,T[44]=V,T[45]=D):D=T[45],T[46]!==k||T[47]!==D?(I=(0,s.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[f,(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[k,D]})]}),T[46]=k,T[47]=D,T[48]=I):I=T[48],I}function sO(e,t){return(0,s.jsx)("li",{className:"text-sm text-gray-600",children:e},t)}async function sM(e){return(await d("POST","/api/ai-diagnoses/analyze",e)).json()}a(88860),a(67177);var sE=a(88223),sF=a(56376),s$=a(52175),sR=a(42866),sL=a(55424),sU=a(36607),sz=a(35621);let sB={light:"",dark:".dark"},sV=r.createContext(null);function sK(){let e=r.useContext(sV);if(!e)throw Error("useChart must be used within a <ChartContainer />");return e}let sW=r.forwardRef((e,t)=>{let a,n,i,c,o,d,m,u,x,h,p,f=(0,l.c)(25);f[0]!==e?({id:c,className:n,children:a,config:i,...o}=e,f[0]=e,f[1]=a,f[2]=n,f[3]=i,f[4]=c,f[5]=o):(a=f[1],n=f[2],i=f[3],c=f[4],o=f[5]);let g=r.useId(),j=`chart-${c||g.replace(/:/g,"")}`;return f[6]!==i?(d={config:i},f[6]=i,f[7]=d):d=f[7],f[8]!==n?(m=C("flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-transparent [&_.recharts-rectangle.recharts-tooltip-cursor]:opacity-0",n),f[8]=n,f[9]=m):m=f[9],f[10]!==j||f[11]!==i?(u=(0,s.jsx)(sq,{id:j,config:i}),f[10]=j,f[11]=i,f[12]=u):u=f[12],f[13]!==a?(x=(0,s.jsx)(sL.h,{children:a}),f[13]=a,f[14]=x):x=f[14],f[15]!==j||f[16]!==o||f[17]!==t||f[18]!==m||f[19]!==u||f[20]!==x?(h=(0,s.jsxs)("div",{"data-chart":j,ref:t,className:m,...o,children:[u,x]}),f[15]=j,f[16]=o,f[17]=t,f[18]=m,f[19]=u,f[20]=x,f[21]=h):h=f[21],f[22]!==d||f[23]!==h?(p=(0,s.jsx)(sV.Provider,{value:d,children:h}),f[22]=d,f[23]=h,f[24]=p):p=f[24],p});sW.displayName="Chart";let sq=e=>{let t,a,r,n=(0,l.c)(6),{id:i,config:c}=e;if(n[0]!==c||n[1]!==i){a=Symbol.for("react.early_return_sentinel");e:{let e=Object.entries(c).filter(sY);if(!e.length){a=null;break e}t=Object.entries(sB).map(t=>{let[a,s]=t;return`
${s} [data-chart=${i}] {
${e.map(e=>{var t;let[s,r]=e,n=(null==(t=r.theme)?void 0:t[a])||r.color;return n?`  --color-${s}: ${n};`:null}).join("\n")}
}
`}).join("\n")}n[0]=c,n[1]=i,n[2]=t,n[3]=a}else t=n[2],a=n[3];return a!==Symbol.for("react.early_return_sentinel")?a:(n[4]!==t?(r=(0,s.jsx)("style",{dangerouslySetInnerHTML:{__html:t}}),n[4]=t,n[5]=r):r=n[5],r)},sG=sU.u,sH=r.forwardRef((e,t)=>{let{active:a,payload:n,className:l,indicator:i="dot",hideLabel:c=!1,hideIndicator:o=!1,label:d,labelFormatter:m,labelClassName:u,formatter:x,color:h,nameKey:p,labelKey:f}=e,{config:g}=sK(),j=r.useMemo(()=>{var e;if(c||!(null==n?void 0:n.length))return null;let[t]=n,a=`${f||(null==t?void 0:t.dataKey)||(null==t?void 0:t.name)||"value"}`,r=sJ(g,t,a),l=f||"string"!=typeof d?null==r?void 0:r.label:(null==(e=g[d])?void 0:e.label)||d;return m?(0,s.jsx)("div",{className:C("font-medium",u),children:m(l,n)}):l?(0,s.jsx)("div",{className:C("font-medium",u),children:l}):null},[d,m,n,c,u,g,f]);if(!a||!(null==n?void 0:n.length))return null;let y=1===n.length&&"dot"!==i;return(0,s.jsxs)("div",{ref:t,className:C("grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl",l),children:[y?null:j,(0,s.jsx)("div",{className:"grid gap-1.5",children:n.map((e,t)=>{let a=`${p||e.name||e.dataKey||"value"}`,r=sJ(g,e,a),n=h||e.payload.fill||e.color;return(0,s.jsx)("div",{className:C("flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground","dot"===i&&"items-center"),children:x&&(null==e?void 0:e.value)!==void 0&&e.name?x(e.value,e.name,e,t,e.payload):(0,s.jsxs)(s.Fragment,{children:[(null==r?void 0:r.icon)?(0,s.jsx)(r.icon,{}):!o&&(0,s.jsx)("div",{className:C("shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]",{"h-2.5 w-2.5":"dot"===i,"w-1":"line"===i,"w-0 border-[1.5px] border-dashed bg-transparent":"dashed"===i,"my-0.5":y&&"dashed"===i}),style:{"--color-bg":n,"--color-border":n}}),(0,s.jsxs)("div",{className:C("flex flex-1 justify-between leading-none",y?"items-end":"items-center"),children:[(0,s.jsxs)("div",{className:"grid gap-1.5",children:[y?j:null,(0,s.jsx)("span",{className:"text-muted-foreground",children:(null==r?void 0:r.label)||e.name})]}),e.value&&(0,s.jsx)("span",{className:"font-mono font-medium tabular-nums text-foreground",children:e.value.toLocaleString()})]})]})},e.dataKey)})})]})});function sJ(e,t,a){if("object"!=typeof t||null===t)return;let s="payload"in t&&"object"==typeof t.payload&&null!==t.payload?t.payload:void 0,r=a;return a in t&&"string"==typeof t[a]?r=t[a]:s&&a in s&&"string"==typeof s[a]&&(r=s[a]),r in e?e[r]:e[a]}function sY(e){let[,t]=e;return t.theme||t.color}sH.displayName="ChartTooltip",sz.D,r.forwardRef((e,t)=>{let a,r,n,i=(0,l.c)(16),{className:c,hideIcon:o,payload:d,verticalAlign:m,nameKey:u}=e,x=void 0!==o&&o,{config:h}=sK();if(!(null==d?void 0:d.length))return null;let p="top"===(void 0===m?"bottom":m)?"pb-3":"pt-3";if(i[0]!==c||i[1]!==p?(a=C("flex items-center justify-center gap-4",p,c),i[0]=c,i[1]=p,i[2]=a):a=i[2],i[3]!==h||i[4]!==x||i[5]!==u||i[6]!==d){let e;i[8]!==h||i[9]!==x||i[10]!==u?(e=e=>{let t=`${u||e.dataKey||"value"}`,a=sJ(h,e,t);return(0,s.jsxs)("div",{className:C("flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground"),children:[(null==a?void 0:a.icon)&&!x?(0,s.jsx)(a.icon,{}):(0,s.jsx)("div",{className:"h-2 w-2 shrink-0 rounded-[2px]",style:{backgroundColor:e.color}}),null==a?void 0:a.label]},e.value)},i[8]=h,i[9]=x,i[10]=u,i[11]=e):e=i[11],r=d.map(e),i[3]=h,i[4]=x,i[5]=u,i[6]=d,i[7]=r}else r=i[7];return i[12]!==t||i[13]!==a||i[14]!==r?(n=(0,s.jsx)("div",{ref:t,className:a,children:r}),i[12]=t,i[13]=a,i[14]=r,i[15]=n):n=i[15],n}).displayName="ChartLegend";var sQ=a(27817),sX=a(50010),s0=a(42082),s1=a(36980),s2=a(42692),s4=a(50636),s5=a(28025);function s3(e){if(null==e)return 0;let t=Number(e);if(!Number.isFinite(t))return 0;let a=t<=1?t:t/100;return Number.isFinite(a)?Math.max(0,Math.min(1,a)):0}let s6=["var(--chart-1)","var(--chart-2)","var(--chart-3)","var(--chart-4)","var(--chart-5)"];function s8(e,t){let a=function(e){if(!e)return null;if(e instanceof Date)return isNaN(e.getTime())?null:e;if("number"==typeof e){let t=new Date(e);return isNaN(t.getTime())?null:t}if("string"==typeof e){let t=e.trim();if(!t)return null;let a=new Date(t);if(!isNaN(a.getTime())||/^\d{4}-\d{2}-\d{2}T\d{2}:/i.test(t)&&!/[zZ]|[+-]\d{2}:?\d{2}$/.test(t)&&!isNaN((a=new Date(t+"Z")).getTime()))return a}return null}(e);if(!a)return"—";try{return(0,eT.WU)(a,t)}catch{return"—"}}function s7(e){let t=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a="string"==typeof e&&e.trim().endsWith("%")?parseFloat(e)/100:Number(e);return Number.isFinite(a)?a:t}(e,NaN);return Number.isNaN(t)?0:100*s3(t)}function s9(){var e;let[,t]=(0,i.TH)(),[,a]=(0,i.yj)("/ai-diagnosis/:id"),{data:n,isLoading:l,isError:c}=function(e){let{toast:t}=v();return(0,ew.a)({queryKey:["ai-analysis",e],enabled:!!e,staleTime:3e5,queryFn:async()=>{if(!e)return null;try{var a;let t,{data:{session:s}}=await U.auth.getSession();if(!s)throw Error("No authenticated session found");let r=`${R}/functions/v1/get-analysis-by-id/${e}`,n=await fetch(r,{method:"GET",headers:{Authorization:`Bearer ${s.access_token}`,"Content-Type":"application/json"}}),l=await n.text();try{t=JSON.parse(l)}catch{throw Error(`Unexpected response (${n.status})`)}if(!n.ok||"error"in t)throw Error(t.error||`HTTP ${n.status}`);return{id:(a=t.analysis).id,patientId:a.patient_id,imageUrl:a.image_url||"",diagnosis:function(e){let t=[],a=eV(e.dr_prediction,"dr"),s=eV(e.glaucoma_prediction,"glaucoma");return a&&t.push(a),s&&t.push(s),t.join(" | ")||"Analysis"}(a),confidence:function(e){let t=[eW(e.dr_confidence),eW(e.glaucoma_confidence)].filter(e=>"number"==typeof e);return t.length?Math.round(Math.max(...t)):0}(a),severity:function(e){let t=(e.risk_level||"").toLowerCase();return"mild"===t?"mild":"moderate"===t?"moderate":["severe","high","critical"].includes(t)?"severe":"normal"}(a),analyzedBy:a.analyzed_by||"AI Model",reviewedByDoctor:(a.status||"").toLowerCase().includes("review"),doctorNotes:a.clinical_notes||void 0,createdAt:new Date(a.created_at),drPrediction:a.dr_prediction,drConfidence:eW(a.dr_confidence),drProbability:eq(a.dr_probability),drDoctorNote:a.dr_doctor_note,drSeverityLevel:a.dr_severity_level,glaucomaPrediction:a.glaucoma_prediction,glaucomaConfidence:eW(a.glaucoma_confidence),glaucomaProbability:function(e){let t=e.glaucoma_probability;if(t&&("object"==typeof t||"string"==typeof t&&t.trim().startsWith("{")))return eq(t);if("number"==typeof t){let a=e.glaucoma_confidence;"number"!=typeof a&&(a=1-t);let s=eG(a),r=eG(t),n=s+r,l=n>0?s/n:0,i=n>0?r/n:0,c=(e.glaucoma_prediction||"").toLowerCase();return"normal"===c||c.includes("normal")?{Normal:l,Glaucoma:i}:{Glaucoma:l,Normal:i}}return null}(a),glaucomaDoctorNote:a.glaucoma_doctor_note,glaucomaSeverityLevel:a.glaucoma_severity_level,riskLevel:a.risk_level,status:a.status,imageMetadata:a.image_metadata}}catch(e){throw t({title:"Failed to load analysis",description:e.message,variant:"destructive"}),e}}})}((null==a?void 0:a.id)||""),{data:o}=(0,ew.a)({queryKey:["/api/patients"]}),d=(0,r.useMemo)(()=>{if(!n)return;let e=(e,t)=>void 0!==n[e]?n[e]:n[t];return{id:n.id,clinicId:e("clinic_id","clinicId"),patientId:e("patient_id","patientId"),doctorId:e("doctor_id","doctorId"),analyzedBy:e("analyzed_by","analyzedBy")??"AI Model",imageUrl:e("image_url","imageUrl"),imageMetadata:e("image_metadata","imageMetadata"),drPrediction:e("dr_prediction","drPrediction"),drConfidence:s7(e("dr_confidence","drConfidence")),drProbability:e("dr_probability","drProbability"),drSeverityLevel:e("dr_severity_level","drSeverityLevel"),drDoctorNote:e("dr_doctor_note","drDoctorNote"),glaucomaPrediction:e("glaucoma_prediction","glaucomaPrediction"),glaucomaConfidence:s7(e("glaucoma_confidence","glaucomaConfidence")),glaucomaProbability:e("glaucoma_probability","glaucomaProbability"),glaucomaSeverityLevel:e("glaucoma_severity_level","glaucomaSeverityLevel"),glaucomaDoctorNote:e("glaucoma_doctor_note","glaucomaDoctorNote"),riskLevel:e("risk_level","riskLevel"),clinicalNotes:e("clinical_notes","clinicalNotes"),status:n.status,createdAt:e("created_at","createdAt"),updatedAt:e("updated_at","updatedAt")}},[n]),m=(0,r.useMemo)(()=>null==o?void 0:o.find(e=>e.id===(null==d?void 0:d.patientId)),[o,d]),u=(0,r.useMemo)(()=>(null==d?void 0:d.drProbability)?Object.entries(d.drProbability).map(e=>{let[t,a]=e;return{label:t,value:s3(a)}}).sort((e,t)=>t.value-e.value):[],[d]),x=(0,r.useMemo)(()=>{if((null==d?void 0:d.glaucomaProbability)==null)return[];let e=s3(d.glaucomaProbability);if(!Number.isFinite(e))return[];let t=1-e;return[{label:"Normal",value:t<0?0:t},{label:"Glaucoma",value:e}]},[d]),h=(0,r.useMemo)(()=>[...u,...x].slice(0,14),[u,x]);if(l)return(0,s.jsx)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:(0,s.jsxs)("div",{className:"animate-pulse space-y-4",children:[(0,s.jsx)("div",{className:"h-6 w-72 bg-muted rounded"}),(0,s.jsx)("div",{className:"h-40 w-full bg-muted rounded"}),(0,s.jsx)("div",{className:"h-80 w-full bg-muted rounded"})]})});if(c)return(0,s.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[(0,s.jsx)("div",{className:"text-center text-red-600",children:"Failed to load analysis."}),(0,s.jsx)("div",{className:"mt-4 flex justify-center",children:(0,s.jsx)(ey,{variant:"outline",onClick:()=>t("/ai-diagnosis"),children:"Back"})})]});if(!d)return(0,s.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,s.jsxs)(ey,{variant:"ghost",className:"mb-6",onClick:()=>t("/ai-diagnosis"),children:[(0,s.jsx)(sE.Z,{className:"w-4 h-4 mr-1"})," Back to Analyses"]}),(0,s.jsxs)("div",{className:"text-center py-24 border rounded-lg bg-white",children:[(0,s.jsx)(eC.Z,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-gray-600 mb-2",children:"Analysis not found"}),(0,s.jsx)(ey,{onClick:()=>t("/ai-diagnosis"),variant:"outline",children:"Return to list"})]})]});let p=(e=d.riskLevel)?e.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase()):"";return(0,s.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 space-y-8",children:[(0,s.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(ey,{variant:"ghost",size:"sm",onClick:()=>t("/ai-diagnosis"),className:"-ml-2",children:(0,s.jsx)(sE.Z,{className:"w-4 h-4"})}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("h1",{className:"text-xl font-semibold text-professional-dark flex items-center gap-2",children:[(0,s.jsx)(eC.Z,{className:"w-5 h-5 text-diagnostic-purple"})," Detailed AI Analysis"]}),(0,s.jsx)("p",{className:"text-gray-500 text-sm",children:"Comprehensive diagnostic breakdown"})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[d.drPrediction&&(0,s.jsxs)(tu,{variant:"secondary",className:"bg-medical-blue/10 text-medical-blue",children:["DR: ",d.drPrediction]}),d.glaucomaPrediction&&(0,s.jsxs)(tu,{variant:"secondary",className:"bg-emerald-50 text-emerald-700",children:["Glaucoma: ",d.glaucomaPrediction]}),(0,s.jsxs)("span",{className:`px-2.5 py-1 rounded-full text-xs flex items-center gap-1 ${(e=>{switch(e){case"low":return"bg-green-50 text-green-700 ring-1 ring-green-200";case"moderate":return"bg-amber-50 text-amber-700 ring-1 ring-amber-200";case"high":return"bg-red-50 text-red-700 ring-1 ring-red-200";default:return"bg-gray-50 text-gray-700 ring-1 ring-gray-200"}})(d.riskLevel)}`,children:[(0,s.jsx)(sF.Z,{className:"w-3.5 h-3.5"})," Risk: ",p||"—"]}),"completed"!==d.status?(0,s.jsxs)(tu,{className:"bg-amber-100 text-amber-700",children:[(0,s.jsx)(s$.Z,{className:"w-3 h-3 mr-1"})," Pending"]}):(0,s.jsxs)(tu,{className:"bg-green-100 text-green-700",children:[(0,s.jsx)(sR.Z,{className:"w-3 h-3 mr-1"})," Completed"]})]})]}),(0,s.jsxs)("div",{className:"grid gap-8 lg:grid-cols-12",children:[(0,s.jsx)("aside",{className:"space-y-6 lg:col-span-4 xl:col-span-3 self-start lg:sticky lg:top-6",children:(0,s.jsxs)(tl,{className:"shadow-sm",children:[(0,s.jsx)(ti,{className:"pb-3",children:(0,s.jsx)(tc,{className:"text-sm font-medium",children:"Patient & Clinical Summary"})}),(0,s.jsxs)(td,{className:"space-y-5",children:[(0,s.jsxs)("div",{className:"space-y-3 text-xs",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-gray-500",children:"Patient"}),(0,s.jsx)("span",{className:"font-medium truncate max-w-[140px] text-right",children:m?`${m.firstName} ${m.lastName}`:d.patientId||"—"})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-gray-500",children:"Date"}),(0,s.jsx)("span",{children:s8(d.createdAt,"PP")})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-gray-500",children:"Time"}),(0,s.jsx)("span",{children:s8(d.createdAt,"p")})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-gray-500",children:"Analyzed By"}),(0,s.jsx)("span",{children:d.analyzedBy})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-gray-500",children:"Status"}),(0,s.jsx)("span",{className:"capitalize",children:d.status})]})]}),(0,s.jsxs)("div",{className:"border-t pt-4",children:[(0,s.jsx)("p",{className:"text-[11px] font-semibold tracking-wide text-gray-600 mb-1",children:"AI SUMMARY"}),(0,s.jsx)("p",{className:"text-xs text-gray-700 leading-relaxed whitespace-pre-line line-clamp-6",title:d.clinicalNotes,children:d.clinicalNotes})]}),d.drDoctorNote||d.glaucomaDoctorNote?(0,s.jsxs)("div",{className:"border-t pt-4 space-y-2",children:[(0,s.jsx)("p",{className:"text-[11px] font-semibold tracking-wide text-diagnostic-purple mb-1",children:"DOCTOR NOTES"}),d.drDoctorNote&&(0,s.jsx)("p",{className:"text-xs text-professional-dark whitespace-pre-line",children:d.drDoctorNote}),d.glaucomaDoctorNote&&(0,s.jsx)("p",{className:"text-xs text-professional-dark whitespace-pre-line",children:d.glaucomaDoctorNote})]}):null,(0,s.jsxs)("div",{className:"border-t pt-3 text-[11px] text-gray-500 flex items-start gap-2",children:[(0,s.jsx)(eR.Z,{className:"w-3.5 h-3.5 mt-0.5"}),(0,s.jsx)("span",{children:"This AI output is for clinical decision support and should be reviewed by a qualified professional."})]})]})]})}),(0,s.jsxs)("div",{className:"space-y-8 lg:col-span-8 xl:col-span-9",children:[(0,s.jsxs)(tl,{className:"overflow-hidden relative",children:[(0,s.jsx)(ti,{children:(0,s.jsxs)(tc,{className:"text-sm font-medium flex items-center gap-2",children:[(0,s.jsx)(sm.Z,{className:"w-4 h-4 text-primary"})," Model Confidence"]})}),(0,s.jsxs)(td,{children:[(0,s.jsx)("div",{className:"h-72",children:(0,s.jsx)(sW,{className:"h-full !aspect-auto",config:{dr:{label:"DR",color:"var(--chart-1)"},glaucoma:{label:"Glaucoma",color:"var(--chart-2)"}},children:(0,s.jsxs)(sQ.v,{data:[{label:"Confidence",dr:Number.isFinite(d.drConfidence)?Number(d.drConfidence.toFixed(2)):0,glaucoma:Number.isFinite(d.glaucomaConfidence)?Number(d.glaucomaConfidence.toFixed(2)):0,drPrediction:d.drPrediction||"—",glaucomaPrediction:d.glaucomaPrediction||"—",risk:p||"—"}],margin:{left:16,right:16,top:24,bottom:8},children:[(0,s.jsx)(sX.q,{strokeDasharray:"3 3",stroke:"var(--border)"}),(0,s.jsx)(s0.K,{dataKey:"label",tick:!1}),(0,s.jsx)(s1.B,{domain:[0,100],tickFormatter:e=>`${e}%`,width:45}),(0,s.jsx)(sG,{cursor:{fill:"transparent"},content:(0,s.jsx)(sH,{hideLabel:!0,formatter:(e,t,a,r,n)=>{let l="DR"===t?n.drPrediction:n.glaucomaPrediction;return(0,s.jsxs)("div",{className:"flex flex-col gap-0.5",children:[(0,s.jsxs)("span",{className:"font-medium",children:[t," Model"]}),(0,s.jsxs)("span",{className:"text-[11px] text-muted-foreground",children:["Prediction: ",l]}),n.risk&&"DR"===t&&(0,s.jsxs)("span",{className:"text-[11px] text-muted-foreground",children:["Overall Risk: ",n.risk]}),(0,s.jsxs)("span",{className:"font-mono",children:[Math.round(e),"%"]})]})}})}),(0,s.jsx)(s2.$,{dataKey:"dr",name:"DR",fill:"var(--chart-1)",radius:[4,4,0,0],children:(0,s.jsx)(s4.e,{dataKey:"dr",position:"top",formatter:e=>`${Math.round(e)}%`,className:"fill-professional-dark text-[11px]"})}),(0,s.jsx)(s2.$,{dataKey:"glaucoma",name:"Glaucoma",fill:"var(--chart-2)",radius:[4,4,0,0],children:(0,s.jsx)(s4.e,{dataKey:"glaucoma",position:"top",formatter:e=>`${Math.round(e)}%`,className:"fill-professional-dark text-[11px]"})})]})})}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4 mt-4 text-xs",children:[(0,s.jsxs)("div",{className:"p-2 rounded border bg-white flex flex-col gap-1",children:[(0,s.jsx)("span",{className:"text-gray-500",children:"DR Prediction"}),(0,s.jsxs)("span",{className:"font-semibold text-professional-dark flex items-center gap-1",children:[d.drPrediction||"—"," ",(0,s.jsxs)("span",{className:"text-[11px] font-normal text-gray-500",children:["(",Number.isFinite(d.drConfidence)?Math.round(d.drConfidence):0,"%)"]})]})]}),(0,s.jsxs)("div",{className:"p-2 rounded border bg-white flex flex-col gap-1",children:[(0,s.jsx)("span",{className:"text-gray-500",children:"Glaucoma Prediction"}),(0,s.jsxs)("span",{className:"font-semibold text-professional-dark flex items-center gap-1",children:[d.glaucomaPrediction||"—"," ",(0,s.jsxs)("span",{className:"text-[11px] font-normal text-gray-500",children:["(",Number.isFinite(d.glaucomaConfidence)?Math.round(d.glaucomaConfidence):0,"%)"]})]})]})]})]})]}),(0,s.jsxs)(tl,{className:"overflow-hidden",children:[(0,s.jsx)(ti,{children:(0,s.jsxs)(tc,{className:"text-sm font-medium flex items-center gap-2",children:[(0,s.jsx)(e$.Z,{className:"w-4 h-4 text-diagnostic-purple"})," DR Class Distribution"]})}),(0,s.jsx)(td,{children:0===u.length?(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"No DR probability data."}):(0,s.jsx)("div",{className:"h-80",children:(0,s.jsx)(sW,{className:"h-full !aspect-auto",config:u.reduce((e,t,a)=>(e[t.label.replace(/[^a-zA-Z0-9_-]/g,"_")]={label:t.label,color:s6[a%s6.length]},e),{}),children:(0,s.jsxs)(sQ.v,{data:u.map(e=>({name:e.label,pct:+(100*e.value).toFixed(2)})),layout:"vertical",margin:{left:8,right:16,top:8,bottom:8},children:[(0,s.jsx)(sX.q,{strokeDasharray:"3 3",stroke:"var(--border)",horizontal:!1}),(0,s.jsx)(s0.K,{type:"number",tickFormatter:e=>`${e}%`,domain:[0,100]}),(0,s.jsx)(s1.B,{type:"category",dataKey:"name",width:140}),(0,s.jsxs)(s2.$,{dataKey:"pct",radius:[0,4,4,0],children:[u.map((e,t)=>(0,s.jsx)(s5.b,{fill:s6[t%s6.length]},t)),(0,s.jsx)(s4.e,{dataKey:"pct",position:"right",formatter:e=>`${Number.isFinite(e)?e:0}%`,className:"fill-professional-dark text-[10px]"})]}),(0,s.jsx)(sG,{cursor:{fill:"transparent"},content:(0,s.jsx)(sH,{})})]})})})})]}),(0,s.jsxs)(tl,{className:"overflow-hidden",children:[(0,s.jsx)(ti,{children:(0,s.jsxs)(tc,{className:"text-sm font-medium flex items-center gap-2",children:[(0,s.jsx)(e$.Z,{className:"w-4 h-4 text-medical-blue"})," Glaucoma Probability"]})}),(0,s.jsx)(td,{children:0===x.length?(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"No glaucoma probability data."}):(0,s.jsx)("div",{className:"h-60",children:(0,s.jsx)(sW,{className:"h-full !aspect-auto",config:x.reduce((e,t,a)=>(e[t.label.replace(/[^a-zA-Z0-9_-]/g,"_")]={label:t.label,color:s6[a%s6.length]},e),{}),children:(0,s.jsxs)(sQ.v,{data:x.map(e=>({name:e.label,pct:+(100*e.value).toFixed(2)})),layout:"vertical",margin:{left:8,right:16,top:8,bottom:8},children:[(0,s.jsx)(sX.q,{strokeDasharray:"3 3",stroke:"var(--border)",horizontal:!1}),(0,s.jsx)(s0.K,{type:"number",tickFormatter:e=>`${e}%`,domain:[0,100]}),(0,s.jsx)(s1.B,{type:"category",dataKey:"name",width:120}),(0,s.jsxs)(s2.$,{dataKey:"pct",radius:[0,4,4,0],children:[x.map((e,t)=>(0,s.jsx)(s5.b,{fill:s6[t%s6.length]},t)),(0,s.jsx)(s4.e,{dataKey:"pct",position:"right",formatter:e=>`${Number.isFinite(e)?e:0}%`,className:"fill-professional-dark text-[10px]"})]}),(0,s.jsx)(sG,{cursor:{fill:"transparent"},content:(0,s.jsx)(sH,{})})]})})})})]}),(0,s.jsxs)(tl,{className:"overflow-hidden",children:[(0,s.jsx)(ti,{children:(0,s.jsxs)(tc,{className:"text-sm font-medium flex items-center gap-2",children:[(0,s.jsx)(sm.Z,{className:"w-4 h-4 text-primary"})," Combined Snapshot"]})}),(0,s.jsx)(td,{children:0===h.length?(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"No probability data."}):(0,s.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:h.map((e,t)=>(0,s.jsxs)("div",{className:"rounded-md border p-2",children:[(0,s.jsx)("div",{className:"text-[11px] text-gray-600 truncate",children:e.label}),(0,s.jsx)("div",{className:"h-14",children:(0,s.jsx)(sL.h,{width:"100%",height:"100%",children:(0,s.jsxs)(sQ.v,{data:[{name:e.label,pct:+(100*e.value).toFixed(2)}],children:[(0,s.jsx)(s0.K,{dataKey:"name",hide:!0}),(0,s.jsx)(s1.B,{hide:!0,domain:[0,100]}),(0,s.jsxs)(s2.$,{dataKey:"pct",radius:[4,4,0,0],maxBarSize:18,children:[(0,s.jsx)(s5.b,{fill:s6[t%s6.length]}),(0,s.jsx)(s4.e,{dataKey:"pct",position:"top",formatter:e=>`${Number.isFinite(e)?e:0}%`,className:"fill-professional-dark text-[10px]"})]})]})})})]},e.label))})})]}),(0,s.jsxs)(tl,{children:[(0,s.jsx)(ti,{children:(0,s.jsx)(tc,{className:"text-sm font-medium",children:"Technical Metadata & Timings"})}),(0,s.jsx)(td,{className:"space-y-6",children:d.imageMetadata?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-xs",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-gray-500",children:"Request ID"}),(0,s.jsx)("p",{className:"font-mono mt-0.5",children:d.imageMetadata.request_id||"—"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-gray-500",children:"Model Version"}),(0,s.jsx)("p",{className:"mt-0.5",children:d.imageMetadata.model_version||"—"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-gray-500",children:"Image Size"}),(0,s.jsx)("p",{className:"mt-0.5",children:d.imageMetadata.image_size||"—"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-gray-500",children:"Inference Time"}),(0,s.jsxs)("p",{className:"mt-0.5",children:[d.imageMetadata.inference_time_ms," ms"]})]}),(0,s.jsxs)("div",{className:"col-span-2",children:[(0,s.jsx)("p",{className:"text-gray-500",children:"Optimizations"}),(0,s.jsx)("p",{className:"mt-0.5 text-[11px]",children:(d.imageMetadata.optimizations_applied||[]).join(", ")||"—"})]})]}),d.imageMetadata.timing?(0,s.jsx)("div",{className:"h-56",children:(0,s.jsx)(sW,{className:"!aspect-auto",config:{image_loading_ms:{label:"Image Load",color:s6[0]},dr_prediction_ms:{label:"DR Predict",color:s6[1]},glaucoma_prediction_ms:{label:"Glaucoma Predict",color:s6[2]}},children:(0,s.jsx)(sL.h,{width:"100%",height:"100%",children:(0,s.jsxs)(sQ.v,{data:[{stage:"Image Load",ms:d.imageMetadata.timing.image_loading_ms},{stage:"DR Prediction",ms:d.imageMetadata.timing.dr_prediction_ms},{stage:"Glaucoma Prediction",ms:d.imageMetadata.timing.glaucoma_prediction_ms}],margin:{left:8,right:8,top:8,bottom:8},children:[(0,s.jsx)(sX.q,{strokeDasharray:"3 3",stroke:"var(--border)"}),(0,s.jsx)(s0.K,{dataKey:"stage",tick:{fontSize:11}}),(0,s.jsx)(s1.B,{tickFormatter:e=>`${e}ms`,width:50}),(0,s.jsxs)(s2.$,{dataKey:"ms",radius:[4,4,0,0],children:[(0,s.jsx)(s5.b,{fill:s6[0]}),(0,s.jsx)(s5.b,{fill:s6[1]}),(0,s.jsx)(s5.b,{fill:s6[2]})]}),(0,s.jsx)(sG,{cursor:{fill:"transparent"},content:(0,s.jsx)(sH,{})})]})})})}):null]}):(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"No metadata available."})})]})]})]})]})}var re=a(32289);function rt(e){var t,a,r;let n,i,c,o,d,m,x,h,p,f,g,j,y,N,b,w,_,S,C,P,k,A,D,I,T,Z=(0,l.c)(64),{isOpen:O,onClose:M}=e,{toast:E}=v(),F=(0,u.NL)(),{data:$,isLoading:R}=tq();Z[0]!==(null==$||null==(t=$.data)?void 0:t.patients)?(n=(null==$||null==(a=$.data)?void 0:a.patients)||[],Z[0]=null==$||null==(r=$.data)?void 0:r.patients,Z[1]=n):n=Z[1];let L=n;Z[2]===Symbol.for("react.memo_cache_sentinel")?(i={resolver:(0,tO.F)(t4),defaultValues:{patientId:"",amount:0,paymentMethod:"cash",paymentStatus:"pending",insuranceClaim:!1,insuranceAmount:void 0,patientAmount:void 0,paymentDate:void 0,dueDate:void 0,invoiceNumber:""}},Z[2]=i):i=Z[2];let U=(0,tZ.cI)(i);Z[3]!==E?(c=e=>{E({title:"Payment Failed",description:e.message||"Unable to record payment.",variant:"destructive"})},Z[3]=E,Z[4]=c):c=Z[4];let z=(0,eO.D)({mutationFn:ru,onSuccess:()=>{F.invalidateQueries({queryKey:["/api/payments"]}),E({title:"Payment Recorded",description:"The payment has been added successfully."}),V()},onError:c});Z[5]!==z?(o=e=>{z.mutate(e)},Z[5]=z,Z[6]=o):o=Z[6];let B=o,V=()=>{U.reset(),M()},K=U.watch("amount");Z[7]!==U?(d=U.watch("insuranceClaim"),Z[7]=U,Z[8]=d):d=Z[8];let W=d,q=U.watch("insuranceAmount"),G=U.watch("patientAmount");if(W&&q&&!G){let e=Number(K||0)-Number(q||0);e>=0&&K&&setTimeout(()=>U.setValue("patientAmount",e))}Z[9]!==V?(m=e=>{e||V()},Z[9]=V,Z[10]=m):m=Z[10],Z[11]===Symbol.for("react.memo_cache_sentinel")?(x=(0,s.jsx)(tN,{children:(0,s.jsxs)(tb,{className:"flex items-center space-x-2 text-xl font-semibold text-professional-dark",children:[(0,s.jsx)(eP.Z,{className:"h-5 w-5 text-medical-blue"}),(0,s.jsx)("span",{children:"Add Payment"})]})}),Z[11]=x):x=Z[11],Z[12]!==U||Z[13]!==B?(h=U.handleSubmit(B),Z[12]=U,Z[13]=B,Z[14]=h):h=Z[14],Z[15]===Symbol.for("react.memo_cache_sentinel")?(p=(0,s.jsx)(ti,{children:(0,s.jsx)(tc,{className:"text-lg text-medical-blue",children:"Payment Details"})}),Z[15]=p):p=Z[15],Z[16]!==R||Z[17]!==L?(f=e=>{let{field:t}=e;return(0,s.jsxs)(tB,{children:[(0,s.jsx)(tV,{children:"Patient *"}),(0,s.jsxs)(tS,{onValueChange:t.onChange,defaultValue:t.value,disabled:R,children:[(0,s.jsx)(tK,{children:(0,s.jsx)(tP,{children:(0,s.jsx)(tC,{placeholder:R?"Loading patients...":"Select patient"})})}),(0,s.jsx)(tD,{children:L.map(rm)})]}),(0,s.jsx)(tW,{})]})},Z[16]=R,Z[17]=L,Z[18]=f):f=Z[18],Z[19]!==U.control||Z[20]!==f?(g=(0,s.jsx)(tL,{control:U.control,name:"patientId",render:f}),Z[19]=U.control,Z[20]=f,Z[21]=g):g=Z[21],Z[22]!==U.control?(j=(0,s.jsx)(tL,{control:U.control,name:"amount",render:rd}),Z[22]=U.control,Z[23]=j):j=Z[23],Z[24]!==g||Z[25]!==j?(y=(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[g,j]}),Z[24]=g,Z[25]=j,Z[26]=y):y=Z[26],Z[27]!==U.control?(N=(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsx)(tL,{control:U.control,name:"paymentMethod",render:ro}),(0,s.jsx)(tL,{control:U.control,name:"paymentStatus",render:rc})]}),Z[27]=U.control,Z[28]=N):N=Z[28],Z[29]!==U.control?(b=(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsx)(tL,{control:U.control,name:"paymentDate",render:ri}),(0,s.jsx)(tL,{control:U.control,name:"dueDate",render:rl})]}),Z[29]=U.control,Z[30]=b):b=Z[30],Z[31]!==U.control?(w=(0,s.jsx)("div",{className:"flex items-center space-x-2",children:(0,s.jsx)(tL,{control:U.control,name:"insuranceClaim",render:rn})}),Z[31]=U.control,Z[32]=w):w=Z[32],Z[33]!==U.control||Z[34]!==W?(_=W&&(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsx)(tL,{control:U.control,name:"insuranceAmount",render:rr}),(0,s.jsx)(tL,{control:U.control,name:"patientAmount",render:rs})]}),Z[33]=U.control,Z[34]=W,Z[35]=_):_=Z[35],Z[36]!==U.control?(S=(0,s.jsx)(tL,{control:U.control,name:"invoiceNumber",render:ra}),Z[36]=U.control,Z[37]=S):S=Z[37],Z[38]!==y||Z[39]!==N||Z[40]!==b||Z[41]!==w||Z[42]!==_||Z[43]!==S?(C=(0,s.jsxs)(tl,{children:[p,(0,s.jsxs)(td,{className:"space-y-4",children:[y,N,b,w,_,S]})]}),Z[38]=y,Z[39]=N,Z[40]=b,Z[41]=w,Z[42]=_,Z[43]=S,Z[44]=C):C=Z[44],Z[45]!==V?(P=(0,s.jsx)(ey,{type:"button",variant:"outline",onClick:V,children:"Cancel"}),Z[45]=V,Z[46]=P):P=Z[46];let H=z.isPending?"Saving...":"Add Payment";return Z[47]!==z.isPending||Z[48]!==H?(k=(0,s.jsx)(ey,{type:"submit",className:"medical-button-primary",disabled:z.isPending,children:H}),Z[47]=z.isPending,Z[48]=H,Z[49]=k):k=Z[49],Z[50]!==P||Z[51]!==k?(A=(0,s.jsxs)("div",{className:"flex justify-end space-x-3 pt-4 border-t",children:[P,k]}),Z[50]=P,Z[51]=k,Z[52]=A):A=Z[52],Z[53]!==C||Z[54]!==A||Z[55]!==h?(D=(0,s.jsxs)("form",{onSubmit:h,className:"space-y-6",children:[C,A]}),Z[53]=C,Z[54]=A,Z[55]=h,Z[56]=D):D=Z[56],Z[57]!==U||Z[58]!==D?(I=(0,s.jsxs)(tv,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[x,(0,s.jsx)(t$,{...U,children:D})]}),Z[57]=U,Z[58]=D,Z[59]=I):I=Z[59],Z[60]!==O||Z[61]!==I||Z[62]!==m?(T=(0,s.jsx)(tg,{open:O,onOpenChange:m,children:I}),Z[60]=O,Z[61]=I,Z[62]=m,Z[63]=T):T=Z[63],T}function ra(e){let{field:t}=e;return(0,s.jsxs)(tB,{children:[(0,s.jsxs)(tV,{className:"flex items-center space-x-1",children:[(0,s.jsx)(re.Z,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:"Invoice Number"})]}),(0,s.jsx)(tK,{children:(0,s.jsx)(e1,{placeholder:"INV-2025-001",...t})}),(0,s.jsx)(tW,{})]})}function rs(e){let{field:t}=e;return(0,s.jsxs)(tB,{children:[(0,s.jsx)(tV,{children:"Patient Amount"}),(0,s.jsx)(tK,{children:(0,s.jsx)(e1,{type:"number",min:0,step:"0.01",value:t.value??"",onChange:e=>t.onChange(e.target.value?parseFloat(e.target.value):void 0)})}),(0,s.jsx)(tW,{})]})}function rr(e){let{field:t}=e;return(0,s.jsxs)(tB,{children:[(0,s.jsx)(tV,{children:"Insurance Amount"}),(0,s.jsx)(tK,{children:(0,s.jsx)(e1,{type:"number",min:0,step:"0.01",value:t.value??"",onChange:e=>t.onChange(e.target.value?parseFloat(e.target.value):void 0)})}),(0,s.jsx)(tW,{})]})}function rn(e){let{field:t}=e;return(0,s.jsxs)(tB,{className:"flex flex-row items-start space-x-3 space-y-0",children:[(0,s.jsx)(tK,{children:(0,s.jsx)(e3,{checked:t.value,onCheckedChange:e=>t.onChange(!!e)})}),(0,s.jsx)("div",{className:"space-y-0.5 leading-none",children:(0,s.jsx)(tV,{className:"text-sm",children:"Insurance Claim"})})]})}function rl(e){let{field:t}=e;return(0,s.jsxs)(tB,{children:[(0,s.jsxs)(tV,{className:"flex items-center space-x-1",children:[(0,s.jsx)(e_.Z,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:"Due Date"})]}),(0,s.jsx)(tK,{children:(0,s.jsx)(e1,{type:"date",value:t.value?t.value instanceof Date?t.value.toISOString().split("T")[0]:t.value:"",onChange:e=>t.onChange(e.target.value?new Date(e.target.value):void 0)})}),(0,s.jsx)(tW,{})]})}function ri(e){let{field:t}=e;return(0,s.jsxs)(tB,{children:[(0,s.jsxs)(tV,{className:"flex items-center space-x-1",children:[(0,s.jsx)(e_.Z,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:"Payment Date"})]}),(0,s.jsx)(tK,{children:(0,s.jsx)(e1,{type:"date",value:t.value?t.value instanceof Date?t.value.toISOString().split("T")[0]:t.value:"",onChange:e=>t.onChange(e.target.value?new Date(e.target.value):void 0)})}),(0,s.jsx)(tW,{})]})}function rc(e){let{field:t}=e;return(0,s.jsxs)(tB,{children:[(0,s.jsx)(tV,{children:"Status *"}),(0,s.jsxs)(tS,{onValueChange:t.onChange,defaultValue:t.value,children:[(0,s.jsx)(tK,{children:(0,s.jsx)(tP,{children:(0,s.jsx)(tC,{placeholder:"Select status"})})}),(0,s.jsxs)(tD,{children:[(0,s.jsx)(tI,{value:"pending",children:"Pending"}),(0,s.jsx)(tI,{value:"paid",children:"Paid"}),(0,s.jsx)(tI,{value:"partial",children:"Partial"}),(0,s.jsx)(tI,{value:"overdue",children:"Overdue"})]})]}),(0,s.jsx)(tW,{})]})}function ro(e){let{field:t}=e;return(0,s.jsxs)(tB,{children:[(0,s.jsx)(tV,{children:"Method *"}),(0,s.jsxs)(tS,{onValueChange:t.onChange,defaultValue:t.value,children:[(0,s.jsx)(tK,{children:(0,s.jsx)(tP,{children:(0,s.jsx)(tC,{placeholder:"Select method"})})}),(0,s.jsxs)(tD,{children:[(0,s.jsx)(tI,{value:"cash",children:"Cash"}),(0,s.jsx)(tI,{value:"card",children:"Card"}),(0,s.jsx)(tI,{value:"insurance",children:"Insurance"}),(0,s.jsx)(tI,{value:"check",children:"Check"})]})]}),(0,s.jsx)(tW,{})]})}function rd(e){let{field:t}=e;return(0,s.jsxs)(tB,{children:[(0,s.jsx)(tV,{children:"Amount (USD) *"}),(0,s.jsx)(tK,{children:(0,s.jsx)(e1,{type:"number",min:0,step:"0.01",value:t.value,onChange:e=>t.onChange(parseFloat(e.target.value)||0)})}),(0,s.jsx)(tW,{})]})}function rm(e){return(0,s.jsx)(tI,{value:e.id,children:e.name},e.id)}async function ru(e){let t={...e};return t.paymentDate instanceof Date&&(t.paymentDate=t.paymentDate.toISOString()),t.dueDate instanceof Date&&(t.dueDate=t.dueDate.toISOString()),Object.keys(t).forEach(e=>{(""===t[e]||null===t[e])&&delete t[e]}),(await d("POST","/api/payments",t)).json()}function rx(){let e,t,a,n,i,c,o,d,m,u,x,h,p,f,g,j,y,v,N,b,w,_,S,C,P,k,A,D,I=(0,l.c)(79),[T,Z]=(0,r.useState)(!1);I[0]===Symbol.for("react.memo_cache_sentinel")?(e={queryKey:["/api/payments"]},I[0]=e):e=I[0];let{data:O,isLoading:M}=(0,ew.a)(e);I[1]===Symbol.for("react.memo_cache_sentinel")?(t={queryKey:["/api/patients"]},I[1]=t):t=I[1];let{data:E}=(0,ew.a)(t);I[2]!==E?(a=e=>{let t=null==E?void 0:E.find(t=>t.id===e);return t?`${t.firstName} ${t.lastName}`:"Unknown Patient"},I[2]=E,I[3]=a):a=I[3];let F=a;if(I[4]!==T||I[5]!==M||I[6]!==O){u=Symbol.for("react.early_return_sentinel");e:{let e,t,a,r,l,v,N,b,w,_,S,C,P,k=(null==O?void 0:O.filter(ry).reduce(rj,0))||0,A=(null==O?void 0:O.filter(rg).reduce(rf,0))||0,D=(null==O?void 0:O.filter(rp).reduce(rh,0))||0;if(M){let e;I[21]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,s.jsx)("div",{className:"text-center",children:"Loading billing information..."})}),I[21]=e):e=I[21],u=e;break e}o="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",I[22]===Symbol.for("react.memo_cache_sentinel")?(e=()=>Z(!1),I[22]=e):e=I[22],I[23]!==T?(d=(0,s.jsx)(rt,{isOpen:T,onClose:e}),I[23]=T,I[24]=d):d=I[24],I[25]===Symbol.for("react.memo_cache_sentinel")?(t=(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-semibold text-professional-dark",children:"Billing & Payments"}),(0,s.jsx)("p",{className:"text-gray-600 mt-1",children:"Manage invoices, payments, and financial records"})]}),I[25]=t):t=I[25],I[26]===Symbol.for("react.memo_cache_sentinel")?(a=(0,s.jsxs)(ey,{variant:"outline",children:[(0,s.jsx)(tt.Z,{className:"h-4 w-4 mr-2"}),"Generate Invoice"]}),I[26]=a):a=I[26],I[27]===Symbol.for("react.memo_cache_sentinel")?(m=(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-8",children:[t,(0,s.jsxs)("div",{className:"flex space-x-3 mt-4 sm:mt-0",children:[a,(0,s.jsxs)(ey,{className:"medical-button-primary",onClick:()=>Z(!0),children:[(0,s.jsx)(tn.Z,{className:"h-4 w-4 mr-2"}),"New Payment"]})]})]}),I[27]=m):m=I[27],j="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",I[28]===Symbol.for("react.memo_cache_sentinel")?(r=(0,s.jsx)(ti,{className:"pb-3",children:(0,s.jsx)(tc,{className:"text-sm font-medium text-gray-600",children:"Total Revenue"})}),I[28]=r):r=I[28];let E=k.toLocaleString();I[29]!==E?(l=(0,s.jsxs)("span",{className:"text-2xl font-semibold text-professional-dark",children:["$",E]}),I[29]=E,I[30]=l):l=I[30],I[31]===Symbol.for("react.memo_cache_sentinel")?(v=(0,s.jsx)("div",{className:"w-8 h-8 bg-healthcare-green/10 rounded-lg flex items-center justify-center",children:(0,s.jsx)(eP.Z,{className:"h-4 w-4 text-healthcare-green"})}),I[31]=v):v=I[31],I[32]!==l?(N=(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[l,v]}),I[32]=l,I[33]=N):N=I[33],I[34]===Symbol.for("react.memo_cache_sentinel")?(b=(0,s.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"This month"}),I[34]=b):b=I[34],I[35]!==N?(y=(0,s.jsxs)(tl,{children:[r,(0,s.jsxs)(td,{children:[N,b]})]}),I[35]=N,I[36]=y):y=I[36],I[37]===Symbol.for("react.memo_cache_sentinel")?(w=(0,s.jsx)(ti,{className:"pb-3",children:(0,s.jsx)(tc,{className:"text-sm font-medium text-gray-600",children:"Pending Payments"})}),I[37]=w):w=I[37];let F=A.toLocaleString();I[38]!==F?(_=(0,s.jsxs)("span",{className:"text-2xl font-semibold text-professional-dark",children:["$",F]}),I[38]=F,I[39]=_):_=I[39],I[40]===Symbol.for("react.memo_cache_sentinel")?(S=(0,s.jsx)("div",{className:"w-8 h-8 bg-yellow-100 rounded-lg flex items-center justify-center",children:(0,s.jsx)(eP.Z,{className:"h-4 w-4 text-yellow-600"})}),I[40]=S):S=I[40],I[41]!==_?(C=(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[_,S]}),I[41]=_,I[42]=C):C=I[42],I[43]===Symbol.for("react.memo_cache_sentinel")?(P=(0,s.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"Awaiting payment"}),I[43]=P):P=I[43],I[44]!==C?(c=(0,s.jsxs)(tl,{children:[w,(0,s.jsxs)(td,{children:[C,P]})]}),I[44]=C,I[45]=c):c=I[45],i=tl,I[46]===Symbol.for("react.memo_cache_sentinel")?(g=(0,s.jsx)(ti,{className:"pb-3",children:(0,s.jsx)(tc,{className:"text-sm font-medium text-gray-600",children:"Overdue Payments"})}),I[46]=g):g=I[46],n=td,f="flex items-center justify-between",x="text-2xl font-semibold text-professional-dark",h="$",p=D.toLocaleString()}I[4]=T,I[5]=M,I[6]=O,I[7]=n,I[8]=i,I[9]=c,I[10]=o,I[11]=d,I[12]=m,I[13]=u,I[14]=x,I[15]=h,I[16]=p,I[17]=f,I[18]=g,I[19]=j,I[20]=y}else n=I[7],i=I[8],c=I[9],o=I[10],d=I[11],m=I[12],u=I[13],x=I[14],h=I[15],p=I[16],f=I[17],g=I[18],j=I[19],y=I[20];return u!==Symbol.for("react.early_return_sentinel")?u:(I[47]!==x||I[48]!==h||I[49]!==p?(v=(0,s.jsxs)("span",{className:x,children:[h,p]}),I[47]=x,I[48]=h,I[49]=p,I[50]=v):v=I[50],I[51]===Symbol.for("react.memo_cache_sentinel")?(N=(0,s.jsx)("div",{className:"w-8 h-8 bg-red-100 rounded-lg flex items-center justify-center",children:(0,s.jsx)(eP.Z,{className:"h-4 w-4 text-red-600"})}),I[51]=N):N=I[51],I[52]!==v||I[53]!==f?(b=(0,s.jsxs)("div",{className:f,children:[v,N]}),I[52]=v,I[53]=f,I[54]=b):b=I[54],I[55]===Symbol.for("react.memo_cache_sentinel")?(w=(0,s.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"Requires follow-up"}),I[55]=w):w=I[55],I[56]!==n||I[57]!==b?(_=(0,s.jsxs)(n,{children:[b,w]}),I[56]=n,I[57]=b,I[58]=_):_=I[58],I[59]!==i||I[60]!==_||I[61]!==g?(S=(0,s.jsxs)(i,{children:[g,_]}),I[59]=i,I[60]=_,I[61]=g,I[62]=S):S=I[62],I[63]!==c||I[64]!==S||I[65]!==j||I[66]!==y?(C=(0,s.jsxs)("div",{className:j,children:[y,c,S]}),I[63]=c,I[64]=S,I[65]=j,I[66]=y,I[67]=C):C=I[67],I[68]===Symbol.for("react.memo_cache_sentinel")?(P=(0,s.jsx)("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:(0,s.jsxs)(ey,{variant:"outline",children:[(0,s.jsx)(sd.Z,{className:"h-4 w-4 mr-2"}),"Filter by Status"]})}),I[68]=P):P=I[68],I[69]===Symbol.for("react.memo_cache_sentinel")?(k=(0,s.jsx)(ti,{children:(0,s.jsx)(tc,{children:"Recent Payments"})}),I[69]=k):k=I[69],I[70]!==F||I[71]!==O?(A=(0,s.jsxs)(tl,{children:[k,(0,s.jsx)(td,{children:(null==O?void 0:O.length)===0?(0,s.jsxs)("div",{className:"text-center py-8",children:[(0,s.jsx)(eP.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-gray-500",children:"No payment records found."})]}):(0,s.jsx)("div",{className:"space-y-4",children:null==O?void 0:O.map(e=>(0,s.jsxs)("div",{className:"border rounded-lg p-4 hover:shadow-sm transition-shadow",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h3",{className:"font-semibold text-professional-dark",children:F(e.patientId)}),(0,s.jsxs)("p",{className:"text-gray-600 text-sm mt-1",children:["Invoice: ",e.invoiceNumber||"N/A"]}),(0,s.jsxs)("div",{className:"flex items-center space-x-4 mt-2 text-sm text-gray-500",children:[(0,s.jsxs)("span",{children:["Method: ",e.paymentMethod]}),e.dueDate&&(0,s.jsxs)("span",{children:["Due: ",(0,eT.WU)(new Date(e.dueDate),"MMM dd, yyyy")]})]})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsxs)("p",{className:"text-lg font-semibold text-professional-dark",children:["$",Number(e.amount).toLocaleString()]}),(0,s.jsx)(tu,{className:function(e){switch(e){case"paid":return"bg-green-100 text-green-800";case"partial":return"bg-yellow-100 text-yellow-800";case"pending":return"bg-blue-100 text-blue-800";case"overdue":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}}(e.paymentStatus),children:e.paymentStatus.charAt(0).toUpperCase()+e.paymentStatus.slice(1)}),e.paymentDate&&(0,s.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:["Paid: ",(0,eT.WU)(new Date(e.paymentDate),"MMM dd, yyyy")]})]})]}),e.insuranceClaim&&(0,s.jsxs)("div",{className:"mt-3 pt-3 border-t",children:[(0,s.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"Insurance Amount:"}),(0,s.jsxs)("span",{children:["$",e.insuranceAmount||"0"]})]}),(0,s.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"Patient Amount:"}),(0,s.jsxs)("span",{children:["$",e.patientAmount||"0"]})]})]})]},e.id))})})]}),I[70]=F,I[71]=O,I[72]=A):A=I[72],I[73]!==o||I[74]!==d||I[75]!==m||I[76]!==C||I[77]!==A?(D=(0,s.jsxs)("main",{className:o,children:[d,m,C,P,A]}),I[73]=o,I[74]=d,I[75]=m,I[76]=C,I[77]=A,I[78]=D):D=I[78],D)}function rh(e,t){return e+Number(t.amount)}function rp(e){return"overdue"===e.paymentStatus}function rf(e,t){return e+Number(t.amount)}function rg(e){return"pending"===e.paymentStatus}function rj(e,t){return e+Number(t.amount)}function ry(e){return"paid"===e.paymentStatus}var rv=a(46042),rN=a(91996);let rb=tG.Ry({email:tG.Z_().email("Please enter a valid email address"),password:tG.Z_().min(6,"Password must be at least 6 characters")});function rw(){let[e,t]=(0,r.useState)(!1),[a,n]=(0,r.useState)(!1),{toast:l}=v(),{loginAndRedirect:c}=ev(),o=(0,tZ.cI)({resolver:(0,tO.F)(rb),defaultValues:{email:"",password:""}}),d=async e=>{n(!0);try{let{error:t}=await c(e.email,e.password,"/dashboard");t?l({title:"Login Failed",description:t.message,variant:"destructive"}):l({title:"Login Successful",description:"Welcome back to EyeCare Pro!"})}catch(e){l({title:"Login Failed",description:"An unexpected error occurred. Please try again.",variant:"destructive"})}finally{n(!1)}};return(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-medical-blue/10 to-medical-blue/5 flex items-center justify-center p-4",children:(0,s.jsxs)("div",{className:"w-full max-w-md space-y-8",children:[(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"mx-auto h-12 w-12 bg-medical-blue rounded-full flex items-center justify-center mb-4",children:(0,s.jsx)(af.Z,{className:"h-6 w-6 text-white"})}),(0,s.jsx)("h1",{className:"text-3xl font-bold text-professional-dark",children:"EyeCare Pro"}),(0,s.jsx)("p",{className:"text-gray-600 mt-2",children:"Sign in to your medical practice account"})]}),(0,s.jsxs)(tl,{className:"shadow-lg border-0",children:[(0,s.jsxs)(ti,{className:"space-y-1 pb-6",children:[(0,s.jsx)(tc,{className:"text-2xl text-center text-professional-dark",children:"Welcome Back"}),(0,s.jsx)(to,{className:"text-center text-gray-600",children:"Enter your credentials to access your dashboard"})]}),(0,s.jsxs)(td,{children:[(0,s.jsx)(t$,{...o,children:(0,s.jsxs)("form",{onSubmit:o.handleSubmit(d),className:"space-y-4",children:[(0,s.jsx)(tL,{control:o.control,name:"email",render:e=>{let{field:t}=e;return(0,s.jsxs)(tB,{children:[(0,s.jsxs)(tV,{className:"flex items-center space-x-1",children:[(0,s.jsx)(tp.Z,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:"Email Address"})]}),(0,s.jsx)(tK,{children:(0,s.jsx)(e1,{type:"email",placeholder:"doctor@eyecare.com",className:"h-11",...t})}),(0,s.jsx)(tW,{})]})}}),(0,s.jsx)(tL,{control:o.control,name:"password",render:a=>{let{field:r}=a;return(0,s.jsxs)(tB,{children:[(0,s.jsxs)(tV,{className:"flex items-center space-x-1",children:[(0,s.jsx)(rv.Z,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:"Password"})]}),(0,s.jsx)(tK,{children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(e1,{type:e?"text":"password",placeholder:"Enter your password",className:"h-11 pr-10",...r}),(0,s.jsx)(ey,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>t(!e),children:e?(0,s.jsx)(rN.Z,{className:"h-4 w-4 text-gray-400"}):(0,s.jsx)(e$.Z,{className:"h-4 w-4 text-gray-400"})})]})}),(0,s.jsx)(tW,{})]})}}),(0,s.jsx)("div",{className:"flex items-center justify-between",children:(0,s.jsx)(i.rU,{href:"/forgot-password",className:"text-sm text-medical-blue hover:underline",children:"Forgot password?"})}),(0,s.jsx)(ey,{type:"submit",className:"w-full h-11 medical-button-primary",disabled:a||o.formState.isSubmitting,children:a||o.formState.isSubmitting?"Signing in...":"Sign In"})]})}),(0,s.jsx)("div",{className:"mt-6 text-center",children:(0,s.jsxs)("p",{className:"text-sm text-gray-600",children:["Don't have an account?"," ",(0,s.jsx)(i.rU,{href:"/signup",className:"text-medical-blue hover:underline font-medium",children:"Sign up here"})]})})]})]}),(0,s.jsx)(tl,{className:"bg-gray-50 border-gray-200",children:(0,s.jsxs)(td,{className:"pt-4",children:[(0,s.jsx)("p",{className:"text-xs text-gray-500 text-center mb-2",children:"Demo Credentials (for testing):"}),(0,s.jsxs)("div",{className:"text-xs text-gray-600 space-y-1",children:[(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Email:"})," demo@eyecare.com"]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Password:"})," demo123"]})]})]})})]})})}var r_=a(44576);let rS=tG.Ry({firstName:tG.Z_().min(2,"First name must be at least 2 characters"),lastName:tG.Z_().min(2,"Last name must be at least 2 characters"),email:tG.Z_().email("Please enter a valid email address"),phone:tG.Z_().min(10,"Please enter a valid phone number"),specialty:tG.Z_().min(1,"Please select your specialty"),licenseNumber:tG.Z_().min(5,"Please enter your medical license number"),clinicName:tG.Z_().min(2,"Clinic name must be at least 2 characters"),clinicAddress:tG.Z_().min(10,"Please enter a complete clinic address"),clinicPhone:tG.Z_().min(10,"Please enter a valid clinic phone number"),clinicEmail:tG.Z_().email("Please enter a valid clinic email address"),clinicLicenseNumber:tG.Z_().min(5,"Please enter your clinic license number"),password:tG.Z_().min(8,"Password must be at least 8 characters"),confirmPassword:tG.Z_()}).refine(e=>e.password===e.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]});function rC(){let e,t,a,n,c,o,d,m,u,x,h,p,f,g,j,y,N,b,w,_,S,C,P,k,A,D,I,T=(0,l.c)(62),[Z,O]=(0,r.useState)(!1),[M,E]=(0,r.useState)(!1),[,F]=(0,i.TH)(),{toast:$}=v(),{signUp:R}=function(){let[e,t]=(0,r.useState)(null),[a,s]=(0,r.useState)(null),[n,l]=(0,r.useState)(!0),{toast:i}=v();return(0,r.useEffect)(()=>{let e;K().then(e=>{let{session:a}=e;s(a),t((null==a?void 0:a.user)??null),l(!1)});let{data:{subscription:a}}=(e=(e,a)=>{s(a),t((null==a?void 0:a.user)??null),l(!1),"SIGNED_IN"===e?i({title:"Signed In",description:"Welcome back!"}):"SIGNED_OUT"===e&&i({title:"Signed Out",description:"You have been signed out."})},U.auth.onAuthStateChange(e));return()=>a.unsubscribe()},[i]),{user:e,session:a,loading:n,signUp:async(e,t,a)=>{l(!0);let{data:s,error:r}=await z(e,t,a);return l(!1),r?i({title:"Sign Up Error",description:r.message,variant:"destructive"}):i({title:"Check your email",description:"We sent you a confirmation link."}),{data:s,error:r}},signIn:async(e,t)=>{l(!0);let{data:a,error:s}=await B(e,t);return l(!1),s&&i({title:"Sign In Error",description:s.message,variant:"destructive"}),{data:a,error:s}},signOut:async()=>{l(!0);let{error:e}=await V();return l(!1),e&&i({title:"Sign Out Error",description:e.message,variant:"destructive"}),{error:e}}}}();T[0]===Symbol.for("react.memo_cache_sentinel")?(e={resolver:(0,tO.F)(rS),defaultValues:{firstName:"",lastName:"",email:"",phone:"",specialty:"",licenseNumber:"",clinicName:"",clinicAddress:"",clinicPhone:"",clinicEmail:"",clinicLicenseNumber:"",password:"",confirmPassword:""}},T[0]=e):e=T[0];let L=(0,tZ.cI)(e);T[1]!==F||T[2]!==R||T[3]!==$?(t=async e=>{try{let t={firstName:e.firstName,lastName:e.lastName,phone:e.phone,specialty:e.specialty,licenseNumber:e.licenseNumber,clinicName:e.clinicName,clinicAddress:e.clinicAddress,clinicPhone:e.clinicPhone,clinicEmail:e.clinicEmail,clinicLicenseNumber:e.clinicLicenseNumber},a=await R(e.email,e.password,t);if(console.log("result",a),a.error)$({title:"Signup Failed",description:a.error.message,variant:"destructive"});else{$({title:"Account Created Successfully",description:"Check your email for a confirmation link."});let t=encodeURIComponent(e.email);F(`/registration-success?email=${t}`)}}catch(e){console.error(e),$({title:"Signup Failed",description:"Something went wrong. Please try again.",variant:"destructive"})}},T[1]=F,T[2]=R,T[3]=$,T[4]=t):t=T[4];let W=t;T[5]===Symbol.for("react.memo_cache_sentinel")?(a=(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"mx-auto h-12 w-12 bg-medical-blue rounded-full flex items-center justify-center mb-4",children:(0,s.jsx)(af.Z,{className:"h-6 w-6 text-white"})}),(0,s.jsx)("h1",{className:"text-3xl font-bold text-professional-dark",children:"EyeCare Pro"}),(0,s.jsx)("p",{className:"text-gray-600 mt-2",children:"Create your medical practice account"})]}),T[5]=a):a=T[5],T[6]===Symbol.for("react.memo_cache_sentinel")?(n=(0,s.jsxs)(ti,{className:"space-y-1 pb-6",children:[(0,s.jsx)(tc,{className:"text-2xl text-center text-professional-dark",children:"Create Account"}),(0,s.jsx)(to,{className:"text-center text-gray-600",children:"Join thousands of medical professionals using EyeCare Pro"})]}),T[6]=n):n=T[6],T[7]!==L||T[8]!==W?(c=L.handleSubmit(W),T[7]=L,T[8]=W,T[9]=c):c=T[9],T[10]!==L.control?(o=(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsx)(tL,{control:L.control,name:"firstName",render:rF}),(0,s.jsx)(tL,{control:L.control,name:"lastName",render:rE})]}),T[10]=L.control,T[11]=o):o=T[11],T[12]!==L.control?(d=(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsx)(tL,{control:L.control,name:"email",render:rM}),(0,s.jsx)(tL,{control:L.control,name:"phone",render:rO})]}),T[12]=L.control,T[13]=d):d=T[13],T[14]!==L.control?(m=(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsx)(tL,{control:L.control,name:"specialty",render:rZ}),(0,s.jsx)(tL,{control:L.control,name:"licenseNumber",render:rT})]}),T[14]=L.control,T[15]=m):m=T[15],T[16]===Symbol.for("react.memo_cache_sentinel")?(u=(0,s.jsxs)("h3",{className:"text-lg font-semibold text-professional-dark flex items-center space-x-2",children:[(0,s.jsx)(r_.Z,{className:"h-5 w-5"}),(0,s.jsx)("span",{children:"Clinic Information"})]}),T[16]=u):u=T[16],T[17]!==L.control?(h=(0,s.jsx)(tL,{control:L.control,name:"clinicName",render:rI}),x=(0,s.jsx)(tL,{control:L.control,name:"clinicAddress",render:rD}),T[17]=L.control,T[18]=x,T[19]=h):(x=T[18],h=T[19]),T[20]!==L.control?(p=(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsx)(tL,{control:L.control,name:"clinicPhone",render:rA}),(0,s.jsx)(tL,{control:L.control,name:"clinicEmail",render:rk})]}),f=(0,s.jsx)(tL,{control:L.control,name:"clinicLicenseNumber",render:rP}),T[20]=L.control,T[21]=p,T[22]=f):(p=T[21],f=T[22]),T[23]!==x||T[24]!==p||T[25]!==f||T[26]!==h?(g=(0,s.jsxs)("div",{className:"space-y-4 pt-4 border-t border-gray-200",children:[u,h,x,p,f]}),T[23]=x,T[24]=p,T[25]=f,T[26]=h,T[27]=g):g=T[27],T[28]!==Z?(j=e=>{let{field:t}=e;return(0,s.jsxs)(tB,{children:[(0,s.jsxs)(tV,{className:"flex items-center space-x-1",children:[(0,s.jsx)(rv.Z,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:"Password"})]}),(0,s.jsx)(tK,{children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(e1,{type:Z?"text":"password",placeholder:"Create a strong password",className:"h-11 pr-10",...t}),(0,s.jsx)(ey,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>O(!Z),children:Z?(0,s.jsx)(rN.Z,{className:"h-4 w-4 text-gray-400"}):(0,s.jsx)(e$.Z,{className:"h-4 w-4 text-gray-400"})})]})}),(0,s.jsx)(tW,{})]})},T[28]=Z,T[29]=j):j=T[29],T[30]!==L.control||T[31]!==j?(y=(0,s.jsx)(tL,{control:L.control,name:"password",render:j}),T[30]=L.control,T[31]=j,T[32]=y):y=T[32],T[33]!==M?(N=e=>{let{field:t}=e;return(0,s.jsxs)(tB,{children:[(0,s.jsx)(tV,{children:"Confirm Password"}),(0,s.jsx)(tK,{children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(e1,{type:M?"text":"password",placeholder:"Confirm your password",className:"h-11 pr-10",...t}),(0,s.jsx)(ey,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>E(!M),children:M?(0,s.jsx)(rN.Z,{className:"h-4 w-4 text-gray-400"}):(0,s.jsx)(e$.Z,{className:"h-4 w-4 text-gray-400"})})]})}),(0,s.jsx)(tW,{})]})},T[33]=M,T[34]=N):N=T[34],T[35]!==L.control||T[36]!==N?(b=(0,s.jsx)(tL,{control:L.control,name:"confirmPassword",render:N}),T[35]=L.control,T[36]=N,T[37]=b):b=T[37],T[38]!==y||T[39]!==b?(w=(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[y,b]}),T[38]=y,T[39]=b,T[40]=w):w=T[40];let q=L.formState.isSubmitting?"Creating Account...":"Create Account";return T[41]!==L.formState.isSubmitting||T[42]!==q?(_=(0,s.jsx)(ey,{type:"submit",className:"w-full h-11 medical-button-primary mt-6",disabled:L.formState.isSubmitting,children:q}),T[41]=L.formState.isSubmitting,T[42]=q,T[43]=_):_=T[43],T[44]!==g||T[45]!==w||T[46]!==_||T[47]!==c||T[48]!==o||T[49]!==d||T[50]!==m?(S=(0,s.jsxs)("form",{onSubmit:c,className:"space-y-4",children:[o,d,m,g,w,_]}),T[44]=g,T[45]=w,T[46]=_,T[47]=c,T[48]=o,T[49]=d,T[50]=m,T[51]=S):S=T[51],T[52]!==L||T[53]!==S?(C=(0,s.jsx)(t$,{...L,children:S}),T[52]=L,T[53]=S,T[54]=C):C=T[54],T[55]===Symbol.for("react.memo_cache_sentinel")?(P=(0,s.jsx)("div",{className:"mt-6 text-center",children:(0,s.jsxs)("p",{className:"text-sm text-gray-600",children:["Already have an account?"," ",(0,s.jsx)(i.rU,{href:"/login",className:"text-medical-blue hover:underline font-medium",children:"Sign in here"})]})}),T[55]=P):P=T[55],T[56]!==C?(k=(0,s.jsxs)(tl,{className:"shadow-lg border-0",children:[n,(0,s.jsxs)(td,{children:[C,P]})]}),T[56]=C,T[57]=k):k=T[57],T[58]===Symbol.for("react.memo_cache_sentinel")?(A=(0,s.jsx)(i.rU,{href:"/terms",className:"text-medical-blue hover:underline",children:"Terms of Service"}),T[58]=A):A=T[58],T[59]===Symbol.for("react.memo_cache_sentinel")?(D=(0,s.jsxs)("p",{className:"text-xs text-gray-500 text-center",children:["By creating an account, you agree to our"," ",A," ","and"," ",(0,s.jsx)(i.rU,{href:"/privacy",className:"text-medical-blue hover:underline",children:"Privacy Policy"})]}),T[59]=D):D=T[59],T[60]!==k?(I=(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-medical-blue/10 to-medical-blue/5 flex items-center justify-center p-4",children:(0,s.jsxs)("div",{className:"w-full max-w-2xl space-y-8",children:[a,k,D]})}),T[60]=k,T[61]=I):I=T[61],I}function rP(e){let{field:t}=e;return(0,s.jsxs)(tB,{children:[(0,s.jsx)(tV,{children:"Clinic License Number"}),(0,s.jsx)(tK,{children:(0,s.jsx)(e1,{placeholder:"CLI123456",className:"h-11",...t})}),(0,s.jsx)(tW,{})]})}function rk(e){let{field:t}=e;return(0,s.jsxs)(tB,{children:[(0,s.jsxs)(tV,{className:"flex items-center space-x-1",children:[(0,s.jsx)(tp.Z,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:"Clinic Email"})]}),(0,s.jsx)(tK,{children:(0,s.jsx)(e1,{type:"email",placeholder:"info@eyecarecenter.com",className:"h-11",...t})}),(0,s.jsx)(tW,{})]})}function rA(e){let{field:t}=e;return(0,s.jsxs)(tB,{children:[(0,s.jsxs)(tV,{className:"flex items-center space-x-1",children:[(0,s.jsx)(th.Z,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:"Clinic Phone"})]}),(0,s.jsx)(tK,{children:(0,s.jsx)(e1,{type:"tel",placeholder:"(555) 987-6543",className:"h-11",...t})}),(0,s.jsx)(tW,{})]})}function rD(e){let{field:t}=e;return(0,s.jsxs)(tB,{children:[(0,s.jsxs)(tV,{className:"flex items-center space-x-1",children:[(0,s.jsx)(tx.Z,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:"Clinic Address"})]}),(0,s.jsx)(tK,{children:(0,s.jsx)(e1,{placeholder:"123 Medical Plaza, Suite 100, City, State 12345",className:"h-11",...t})}),(0,s.jsx)(tW,{})]})}function rI(e){let{field:t}=e;return(0,s.jsxs)(tB,{children:[(0,s.jsxs)(tV,{className:"flex items-center space-x-1",children:[(0,s.jsx)(r_.Z,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:"Clinic Name"})]}),(0,s.jsx)(tK,{children:(0,s.jsx)(e1,{placeholder:"EyeCare Medical Center",className:"h-11",...t})}),(0,s.jsx)(tW,{})]})}function rT(e){let{field:t}=e;return(0,s.jsxs)(tB,{children:[(0,s.jsx)(tV,{children:"Medical License Number"}),(0,s.jsx)(tK,{children:(0,s.jsx)(e1,{placeholder:"MD123456",className:"h-11",...t})}),(0,s.jsx)(tW,{})]})}function rZ(e){let{field:t}=e;return(0,s.jsxs)(tB,{children:[(0,s.jsx)(tV,{children:"Medical Specialty"}),(0,s.jsxs)(tS,{onValueChange:t.onChange,defaultValue:t.value,children:[(0,s.jsx)(tK,{children:(0,s.jsx)(tP,{className:"h-11",children:(0,s.jsx)(tC,{placeholder:"Select your specialty"})})}),(0,s.jsxs)(tD,{children:[(0,s.jsx)(tI,{value:"ophthalmology",children:"Ophthalmology"}),(0,s.jsx)(tI,{value:"optometry",children:"Optometry"}),(0,s.jsx)(tI,{value:"retinal-specialist",children:"Retinal Specialist"}),(0,s.jsx)(tI,{value:"corneal-specialist",children:"Corneal Specialist"}),(0,s.jsx)(tI,{value:"glaucoma-specialist",children:"Glaucoma Specialist"}),(0,s.jsx)(tI,{value:"pediatric-ophthalmology",children:"Pediatric Ophthalmology"}),(0,s.jsx)(tI,{value:"oculoplastic-surgery",children:"Oculoplastic Surgery"}),(0,s.jsx)(tI,{value:"other",children:"Other"})]})]}),(0,s.jsx)(tW,{})]})}function rO(e){let{field:t}=e;return(0,s.jsxs)(tB,{children:[(0,s.jsxs)(tV,{className:"flex items-center space-x-1",children:[(0,s.jsx)(th.Z,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:"Phone Number"})]}),(0,s.jsx)(tK,{children:(0,s.jsx)(e1,{type:"tel",placeholder:"(555) 123-4567",className:"h-11",...t})}),(0,s.jsx)(tW,{})]})}function rM(e){let{field:t}=e;return(0,s.jsxs)(tB,{children:[(0,s.jsxs)(tV,{className:"flex items-center space-x-1",children:[(0,s.jsx)(tp.Z,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:"Email Address"})]}),(0,s.jsx)(tK,{children:(0,s.jsx)(e1,{type:"email",placeholder:"doctor@eyecare.com",className:"h-11",...t})}),(0,s.jsx)(tW,{})]})}function rE(e){let{field:t}=e;return(0,s.jsxs)(tB,{children:[(0,s.jsx)(tV,{children:"Last Name"}),(0,s.jsx)(tK,{children:(0,s.jsx)(e1,{placeholder:"Smith",className:"h-11",...t})}),(0,s.jsx)(tW,{})]})}function rF(e){let{field:t}=e;return(0,s.jsxs)(tB,{children:[(0,s.jsxs)(tV,{className:"flex items-center space-x-1",children:[(0,s.jsx)(en.Z,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:"First Name"})]}),(0,s.jsx)(tK,{children:(0,s.jsx)(e1,{placeholder:"John",className:"h-11",...t})}),(0,s.jsx)(tW,{})]})}var r$=a(75518);function rR(){let e,t,a,r,n,c,o,d,m,u,x,h=(0,l.c)(16),[p]=(0,i.lr)();h[0]!==p?(e=(null==p?void 0:p.get("email"))??void 0,h[0]=p,h[1]=e):e=h[1];let f=e;return h[2]===Symbol.for("react.memo_cache_sentinel")?(t=(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"mx-auto h-12 w-12 bg-medical-blue rounded-full flex items-center justify-center mb-4",children:(0,s.jsx)(af.Z,{className:"h-6 w-6 text-white"})}),(0,s.jsx)("h1",{className:"text-3xl font-bold text-professional-dark",children:"Registration Successful"}),(0,s.jsx)("p",{className:"text-gray-600 mt-2",children:"Thank you for creating an account with EyeCare Pro"})]}),h[2]=t):t=h[2],h[3]===Symbol.for("react.memo_cache_sentinel")?(a=(0,s.jsxs)(ti,{className:"space-y-1 pb-6",children:[(0,s.jsx)(tc,{className:"text-2xl text-center text-professional-dark",children:"Almost done"}),(0,s.jsx)(to,{className:"text-center text-gray-600",children:"Please verify your email address to activate your account."})]}),h[3]=a):a=h[3],h[4]===Symbol.for("react.memo_cache_sentinel")?(r=(0,s.jsx)("div",{className:"p-4 bg-medical-blue/5 rounded-full",children:(0,s.jsx)(r$.Z,{className:"h-10 w-10 text-medical-blue"})}),h[4]=r):r=h[4],h[5]!==f?(n=f?(0,s.jsxs)(s.Fragment,{children:[": ",(0,s.jsx)("strong",{className:"text-professional-dark",children:f})]}):".",h[5]=f,h[6]=n):n=h[6],h[7]!==n?(c=(0,s.jsxs)("p",{className:"text-sm text-gray-700",children:["We sent a confirmation link to the email address you provided",n," Open the email and click the link to verify your account."]}),h[7]=n,h[8]=c):c=h[8],h[9]===Symbol.for("react.memo_cache_sentinel")?(o=(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"If you don't see the email, check your spam folder or request a new verification email from the login page."}),h[9]=o):o=h[9],h[10]===Symbol.for("react.memo_cache_sentinel")?(d=(0,s.jsx)("div",{className:"w-full mt-4",children:(0,s.jsx)(i.rU,{href:"/login",children:(0,s.jsx)(ey,{className:"w-full h-11 medical-button-primary",children:"Go to Sign In"})})}),h[10]=d):d=h[10],h[11]!==c?(m=(0,s.jsxs)(tl,{className:"shadow-lg border-0",children:[a,(0,s.jsx)(td,{className:"text-center",children:(0,s.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[r,c,o,d]})})]}),h[11]=c,h[12]=m):m=h[12],h[13]===Symbol.for("react.memo_cache_sentinel")?(u=(0,s.jsxs)("p",{className:"text-xs text-gray-500 text-center",children:["Didn't receive an email? Visit the ",(0,s.jsx)(i.rU,{href:"/login",className:"text-medical-blue hover:underline",children:"Sign In"})," page to request a new verification message."]}),h[13]=u):u=h[13],h[14]!==m?(x=(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-medical-blue/10 to-medical-blue/5 flex items-center justify-center p-4",children:(0,s.jsxs)("div",{className:"w-full max-w-md space-y-8",children:[t,m,u]})}),h[14]=m,h[15]=x):x=h[15],x}function rL(){let e,t=(0,l.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)("div",{className:"min-h-screen w-full flex items-center justify-center bg-gray-50",children:(0,s.jsx)(tl,{className:"w-full max-w-md mx-4",children:(0,s.jsxs)(td,{className:"pt-6",children:[(0,s.jsxs)("div",{className:"flex mb-4 gap-2",children:[(0,s.jsx)(s$.Z,{className:"h-8 w-8 text-red-500"}),(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"404 Page Not Found"})]}),(0,s.jsx)("p",{className:"mt-4 text-sm text-gray-600",children:"Did you forget to add the page to the router?"})]})})}),t[0]=e):e=t[0],e}function rU(){let e,t,a,r,n,c,o,d,m,u,x,h=(0,l.c)(11);return h[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)(i.AW,{path:"/login",children:(0,s.jsx)(ea,{children:(0,s.jsx)(rw,{})})}),h[0]=e):e=h[0],h[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,s.jsx)(i.AW,{path:"/signup",children:(0,s.jsx)(ea,{children:(0,s.jsx)(rC,{})})}),h[1]=t):t=h[1],h[2]===Symbol.for("react.memo_cache_sentinel")?(a=(0,s.jsx)(i.AW,{path:"/registration-success",children:(0,s.jsx)(ea,{restrictWhenAuthenticated:!1,children:(0,s.jsx)(rR,{})})}),h[2]=a):a=h[2],h[3]===Symbol.for("react.memo_cache_sentinel")?(r=(0,s.jsx)(i.AW,{path:"/",children:(0,s.jsx)(et,{children:(0,s.jsx)(tr,{})})}),h[3]=r):r=h[3],h[4]===Symbol.for("react.memo_cache_sentinel")?(n=(0,s.jsx)(i.AW,{path:"/dashboard",children:(0,s.jsx)(et,{children:(0,s.jsx)(tr,{})})}),h[4]=n):n=h[4],h[5]===Symbol.for("react.memo_cache_sentinel")?(c=(0,s.jsx)(i.AW,{path:"/patients",children:(0,s.jsx)(et,{children:(0,s.jsx)(a_,{})})}),h[5]=c):c=h[5],h[6]===Symbol.for("react.memo_cache_sentinel")?(o=(0,s.jsx)(i.AW,{path:"/appointments",children:(0,s.jsx)(et,{children:(0,s.jsx)(sc,{})})}),h[6]=o):o=h[6],h[7]===Symbol.for("react.memo_cache_sentinel")?(d=(0,s.jsx)(i.AW,{path:"/procedures",children:(0,s.jsx)(et,{children:(0,s.jsx)(sI,{})})}),h[7]=d):d=h[7],h[8]===Symbol.for("react.memo_cache_sentinel")?(m=(0,s.jsx)(i.AW,{path:"/ai-diagnosis",children:(0,s.jsx)(et,{children:(0,s.jsx)(sZ,{})})}),h[8]=m):m=h[8],h[9]===Symbol.for("react.memo_cache_sentinel")?(u=(0,s.jsx)(i.AW,{path:"/ai-diagnosis/:id",children:(0,s.jsx)(et,{children:(0,s.jsx)(s9,{})})}),h[9]=u):u=h[9],h[10]===Symbol.for("react.memo_cache_sentinel")?(x=(0,s.jsxs)(i.rs,{children:[e,t,a,r,n,c,o,d,m,u,(0,s.jsx)(i.AW,{path:"/billing",children:(0,s.jsx)(et,{children:(0,s.jsx)(rx,{})})}),(0,s.jsx)(i.AW,{component:rL})]}),h[10]=x):x=h[10],x}function rz(){let e,t,a,r=(0,l.c)(5),[n]=(0,i.TH)(),c=!["/login","/signup","/registration-success"].includes(n);return r[0]!==c?(e=c&&(0,s.jsx)(eN,{}),r[0]=c,r[1]=e):e=r[1],r[2]===Symbol.for("react.memo_cache_sentinel")?(t=(0,s.jsx)(rU,{}),r[2]=t):t=r[2],r[3]!==e?(a=(0,s.jsxs)("div",{className:"min-h-screen bg-clinical-white",children:[e,t]}),r[3]=e,r[4]=a):a=r[4],a}console.log("Base URL:","/netraAI");let rB=document.getElementById("root");rB&&n.createRoot(rB).render((0,s.jsx)(r.StrictMode,{children:(0,s.jsx)(()=>{let e,t=(0,l.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)(u.aH,{client:m,children:(0,s.jsx)(H,{children:(0,s.jsxs)(F,{children:[(0,s.jsx)(rz,{}),(0,s.jsx)(O,{})]})})}),t[0]=e):e=t[0],e},{})}))}},t={};function a(s){var r=t[s];if(void 0!==r)return r.exports;var n=t[s]={id:s,loaded:!1,exports:{}};return e[s].call(n.exports,n,n.exports,a),n.loaded=!0,n.exports}a.m=e,a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;a.t=function(s,r){if(1&r&&(s=this(s)),8&r||"object"==typeof s&&s&&(4&r&&s.__esModule||16&r&&"function"==typeof s.then))return s;var n=Object.create(null);a.r(n);var l={};e=e||[null,t({}),t([]),t(t)];for(var i=2&r&&s;"object"==typeof i&&!~e.indexOf(i);i=t(i))Object.getOwnPropertyNames(i).forEach(e=>{l[e]=()=>s[e]});return l.default=()=>s,a.d(n,l),n}})(),a.d=(e,t)=>{for(var s in t)a.o(t,s)&&!a.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},a.g=(()=>{if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(e){if("object"==typeof window)return window}})(),a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),a.nc=void 0,(()=>{var e=[];a.O=(t,s,r,n)=>{if(s){n=n||0;for(var l=e.length;l>0&&e[l-1][2]>n;l--)e[l]=e[l-1];e[l]=[s,r,n];return}for(var i=1/0,l=0;l<e.length;l++){for(var[s,r,n]=e[l],c=!0,o=0;o<s.length;o++)(!1&n||i>=n)&&Object.keys(a.O).every(e=>a.O[e](s[o]))?s.splice(o--,1):(c=!1,n<i&&(i=n));if(c){e.splice(l--,1);var d=r();void 0!==d&&(t=d)}}return t}})(),(()=>{var e={980:0};a.O.j=t=>0===e[t];var t=(t,s)=>{var r,n,[l,i,c]=s,o=0;if(l.some(t=>0!==e[t])){for(r in i)a.o(i,r)&&(a.m[r]=i[r]);if(c)var d=c(a)}for(t&&t(s);o<l.length;o++)n=l[o],a.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return a.O(d)},s=self.webpackChunknetra_ai=self.webpackChunknetra_ai||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))})();var s=a.O(void 0,["126","361","603"],function(){return a(57606)});s=a.O(s)})();